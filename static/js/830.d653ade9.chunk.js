(self.webpackChunkmultibility=self.webpackChunkmultibility||[]).push([[830],{98338:function(t,e,n){"use strict";n.r(e),n.d(e,{LoadPDF:function(){return I},getNotePageImage:function(){return y},getOneImage:function(){return b},getPDFImages:function(){return d}});var r=n(1413),a=n(29439),u=n(74165),c=n(15861);function s(t,e){var n=document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("can't get virtual canvas context");return n.width=t,n.height=e,{canvas:n,context:r}}function i(t){if(t){t.width=1,t.height=1;var e=t.getContext("2d");null===e||void 0===e||e.clearRect(0,0,1,1)}}var o=n(92198),p=n(61842),f=n.n(p),h=n(92810),l=n(62560),v=n(20434),x=n.n(v),g=n(72058);l.GlobalWorkerOptions.workerSrc=x();var m=function(){var t=(0,c.Z)((0,u.Z)().mark((function t(e){var n;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e.arrayBuffer();case 3:return t.t1=t.sent,n=new t.t0(t.t1),t.abrupt("return",l.getDocument(n).promise);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=(0,c.Z)((0,u.Z)().mark((function t(e,n,r){var a,c,o,p,f,h,l,v,x;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPage(n);case 2:return a=t.sent,c=a.getViewport({scale:r}),o=c.height,p=c.width,f=o/p,h=s(Math.floor(p*r),Math.floor(o*r)),l=h.canvas,v=h.context,t.next=9,a.render({canvasContext:v,viewport:c,transform:[r,0,0,r,0,0]}).promise;case 9:return x=l.toDataURL(),i(l),t.abrupt("return",[x,f]);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();function d(t){return Z.apply(this,arguments)}function Z(){return Z=(0,c.Z)((0,u.Z)().mark((function t(e){var n,r,c,s,i,o,p,f,h,l,v,x=arguments;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=x.length>1&&void 0!==x[1]?x[1]:2,r=x.length>2?x[2]:void 0,t.next=4,m(e);case 4:c=t.sent,s=c.numPages,i=[],o=[],p=1;case 9:if(!(p<=s)){t.next=22;break}return t.next=12,w(c,p,n);case 12:f=t.sent,h=(0,a.Z)(f,2),l=h[0],v=h[1],i.push(l),o.push(v),r&&r(Math.floor(p/s*100));case 19:p+=1,t.next=9;break;case 22:return t.abrupt("return",{images:i,ratios:o});case 23:case"end":return t.stop()}}),t)}))),Z.apply(this,arguments)}function b(t,e){return k.apply(this,arguments)}function k(){return k=(0,c.Z)((0,u.Z)().mark((function t(e,n){var r,c,s,i,o,p,f=arguments;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:2,t.next=3,m(e);case 3:if(c=t.sent,s=c.numPages,!(n>s)){t.next=7;break}throw new Error("index out of range");case 7:return t.next=9,w(c,n,r);case 9:return i=t.sent,o=(0,a.Z)(i,1),p=o[0],t.abrupt("return",p);case 13:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function y(t,e){return P.apply(this,arguments)}function P(){return(P=(0,c.Z)((0,u.Z)().mark((function t(e,n){var r,a,c;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.mp)(e,n);case 2:if(!(r=t.sent)){t.next=5;break}return t.abrupt("return",r);case 5:return t.next=7,f().getItem("PDF_".concat(e));case 7:if(a=t.sent){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,b(a,n,2);case 12:return c=t.sent,(0,g.pW)(e,n,c),t.abrupt("return",c);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t,e){return C.apply(this,arguments)}function C(){return C=(0,c.Z)((0,u.Z)().mark((function t(e,n){var a,c,s,i,p,f,l,v;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e,.5,n);case 2:return a=t.sent,c=a.images,s=a.ratios,i={},p=[],c.forEach((function(t,e){var n=(0,h.Z)(),r=s[e];r&&(i[n]={image:t,ratio:r,state:{strokes:{}},pdfIndex:e+1},p.push(n))})),f=e.name.replace(".pdf",""),t.next=11,e.arrayBuffer();case 11:return l=t.sent,v=new Blob([l],{type:"application/pdf"}),t.abrupt("return",(0,r.Z)((0,r.Z)({},(0,o.Xn)()),{},{name:f,withImg:!0,pdf:v,pageRec:i,pageOrder:p}));case 14:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}},14601:function(){},32767:function(){},28251:function(){},57677:function(){},1543:function(){},87324:function(){}}]);
//# sourceMappingURL=830.d653ade9.chunk.js.map