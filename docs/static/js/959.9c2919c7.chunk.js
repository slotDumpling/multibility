"use strict";(self.webpackChunkmultibility=self.webpackChunkmultibility||[]).push([[959],{85494:function(e,t,n){n.r(t),n.d(t,{MenuMethodCtx:function(){return Fe},MenuStateCtx:function(){return Ue},NewNoteButton:function(){return Pe},default:function(){return Me}});var s=n(15861),r=n(29439),a=n(87757),i=n.n(a),c=n(72791),o=n(75783),l=n(92198),u=n(30501),d=n(1413),x=n(70140),p=n(87309),f=n(50419),m=n(56075),h=n(20662),j=n(96038),g=n(69228),v=n(99660),Z=n(29529),N=n(92414),y=n(99372),C=n(66776),b=n(14057),k=n(12056),T=n(61753),S=n(56200),w=n(82305),A=n(69951),E=n(24595),D=n(51570),U=n(16871),F=n(44379),M=n(67415),P=n(61842),L=n.n(P),I=n(80184),O=(0,c.createContext)({setActive:function(){}});function B(){return(0,I.jsxs)("div",{className:"right-tools",children:[(0,I.jsx)(Y,{}),(0,I.jsx)(V,{})]})}var R=function(){var e=(0,c.useContext)(O).setActive;return(0,I.jsx)("div",{className:"other-menu",children:(0,I.jsx)(x.Z,{onClick:function(t){var n=t.key;return e(n)},items:[{key:"PDF",icon:(0,I.jsx)(v.Z,{}),label:"Import PDF"},{key:"PROFILE",icon:(0,I.jsx)(Z.Z,{}),label:"My profile"},{key:"SETTINGS",icon:(0,I.jsx)(N.Z,{}),label:"Settings"}]})})},H=function(e){var t=e.children,n=e.title,s=(0,c.useContext)(O).setActive;return(0,I.jsxs)("div",{className:"secondary",children:[(0,I.jsxs)("nav",{children:[(0,I.jsx)(p.Z,{type:"text",shape:"circle",onClick:function(){return s("MENU")},icon:(0,I.jsx)(y.Z,{})}),(0,I.jsx)("h3",{children:n})]}),t]})};function W(){var e=(0,c.useState)(!1),t=(0,r.Z)(e,2),a=t[0],l=t[1],u=(0,c.useContext)(Ue).tagUid,d=(0,c.useContext)(Fe),x=d.setAllTags,p=d.setAllNotes,h=(0,c.useState)(0),j=(0,r.Z)(h,2),g=j[0],v=j[1];function Z(){return(Z=(0,s.Z)(i().mark((function e(t){var s,r,a,c,d,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/pdf"===t.type){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.next=5,Promise.all([n.e(643),n.e(701)]).then(n.bind(n,21176));case 5:return s=e.sent,r=s.LoadPDF,e.next=9,r(t,v);case 9:return(a=e.sent).tagID=u,e.next=13,(0,o.au)(a);case 13:return c=e.sent,d=c.tags,m=c.allNotes,x(d),p(m),l(!1),f.ZP.success("PDF Loaded"),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,I.jsx)(H,{title:"Import PDF",children:(0,I.jsxs)(F.Z,{disabled:a,multiple:!1,action:"#",accept:"application/pdf",beforeUpload:function(e){return Z.apply(this,arguments)},children:[(0,I.jsx)("p",{className:"ant-upload-drag-icon",children:a?(0,I.jsx)(m.Z,{width:48,type:"circle",percent:g}):(0,I.jsx)(C.Z,{})}),(0,I.jsx)("p",{className:"ant-upload-hint",children:"Click or drag a pdf file here."})]})})}var z=function(){var e=(0,A.vW)(),t=(0,c.useState)(e),n=(0,r.Z)(t,2),s=n[0],a=n[1],i=(0,c.useContext)(O).setActive;return(0,I.jsx)(H,{title:"My profile",children:(0,I.jsxs)("div",{className:"profile-page",children:[(0,I.jsx)(h.Z,{value:s,onChange:function(e){return a(e.target.value)},prefix:(0,I.jsx)(Z.Z,{}),allowClear:!0}),(0,I.jsx)(p.Z,{disabled:e===s||!s,onClick:function(){s&&((0,A.lu)(s),i("MENU"))},type:"primary",block:!0,children:"OK"})]})})},K=function(){var e=(0,c.useContext)(Fe).menuInit,t=function(){var t=(0,s.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L().clear();case 2:e();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,I.jsx)(H,{title:"Settings",children:(0,I.jsxs)("div",{className:"setting-menu",children:[(0,I.jsx)(p.Z,{icon:(0,I.jsx)(b.Z,{}),onClick:(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.E();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),block:!0,children:"Update"}),(0,I.jsx)(j.Z,{title:"Everything will be deleted.",onConfirm:t,icon:(0,I.jsx)(k.Z,{}),okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},cancelText:"Cancel",placement:"bottom",children:(0,I.jsx)(p.Z,{icon:(0,I.jsx)(k.Z,{}),danger:!0,block:!0,children:"Clear all"})})]})})},G=function(){var e=(0,c.useState)(0),t=(0,r.Z)(e,2),n=t[0],s=t[1],a=(0,c.useState)(""),i=(0,r.Z)(a,2),o=i[0],l=i[1],u={timeout:300,onEnter:function(e){s(e.clientHeight)},unmountOnExit:!0},x=(0,d.Z)((0,d.Z)({},u),{},{classNames:"secondary"});return(0,c.useEffect)((function(){return l("MENU")}),[]),(0,I.jsx)(O.Provider,{value:{setActive:l},children:(0,I.jsxs)("section",{className:"others-menu",style:{height:n},children:[(0,I.jsx)(E.Z,(0,d.Z)((0,d.Z)({classNames:"primary",in:"MENU"===o},u),{},{children:(0,I.jsx)(R,{})})),(0,I.jsx)(E.Z,(0,d.Z)((0,d.Z)({in:"PDF"===o},x),{},{children:(0,I.jsx)(W,{})})),(0,I.jsx)(E.Z,(0,d.Z)((0,d.Z)({in:"PROFILE"===o},x),{},{children:(0,I.jsx)(z,{})})),(0,I.jsx)(E.Z,(0,d.Z)((0,d.Z)({in:"SETTINGS"===o},x),{},{children:(0,I.jsx)(K,{})}))]})})},V=function(){var e={shape:"circle",icon:(0,I.jsx)(T.Z,{})};return(0,I.jsxs)(g.Z,{placement:"bottomRight",trigger:"click",content:(0,I.jsx)(G,{}),zIndex:900,children:[(0,I.jsx)(p.Z,(0,d.Z)({className:"large"},e)),(0,I.jsx)(p.Z,(0,d.Z)({className:"small",type:"text"},e))]})};function Y(){var e=(0,c.useState)(""),t=(0,r.Z)(e,2),n=t[0],a=t[1],o=(0,c.useState)(!1),l=(0,r.Z)(o,2),u=l[0],d=l[1],x=(0,U.s0)();function f(){return(f=(0,s.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.fI)(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",x("/team/".concat(n)));case 5:a(""),d(!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,I.jsxs)(g.Z,{placement:"bottomRight",trigger:"click",title:"Join a team note",destroyTooltipOnHide:!0,onVisibleChange:function(){return d(!1)},content:(0,I.jsx)(M.GD,{plain:!0,length:4,error:u,value:n,onChange:function(e){d(!1),a(e)},onFill:function(e){return f.apply(this,arguments)}}),children:[(0,I.jsx)(p.Z,{className:"team-btn large",shape:"round",icon:(0,I.jsx)(S.Z,{}),children:"Team"}),(0,I.jsx)(p.Z,{className:"team-btn small",type:"text",shape:"circle",icon:(0,I.jsx)(S.Z,{})})]})}var J=n(88894),X=n(96324),_=n(47323),q=n(74115),Q=n(82622),$=n(51147),ee=n(57768),te=n(11956),ne=n(81694),se=n.n(ne),re=function(e){var t=e.children,n=e.nowSwiped,s=e.setNowSwiped,a=e.uid,i=e.onDelete,o=e.disable,l=void 0!==o&&o,u=e.className,x=(0,c.useState)(!1),p=(0,r.Z)(x,2),f=p[0],m=p[1],h=(0,c.useState)(!1),j=(0,r.Z)(h,2),g=j[0],v=j[1],Z=(0,c.useState)(),N=(0,r.Z)(Z,2),y=N[0],C=N[1],b=(0,c.useRef)(null),k=g&&(void 0===n||n===a),T=(0,te.useSwipeable)({onSwipedLeft:function(){var e;v(!0),s&&s(a),C(null===(e=b.current)||void 0===e?void 0:e.clientHeight)},onSwipedRight:function(){v(!1),s&&s(""),C(void 0)},preventDefaultTouchmoveEvent:!0,trackTouch:!l});return(0,c.useEffect)((function(){l&&(C(void 0),s&&s(""),v(!1))}),[l,s]),(0,I.jsxs)("div",(0,d.Z)((0,d.Z)({className:se()("swipe-wrapper",u,{deleted:f,deleting:k})},T),{},{style:{height:y},onTransitionEnd:function(e){"height"===e.propertyName&&f&&i()},children:[(0,I.jsx)("div",{className:"content",ref:b,children:t}),(0,I.jsx)("div",{className:"button-wrapper",children:(0,I.jsx)("div",{className:"button",onClick:function(){return m(!0)},style:{height:y},children:"Delete"})})]}))},ae=n(80202),ie=function(e){var t=e.tagName,n=e.setTagName,s=e.tagColor,r=e.setTagColor,a=(0,I.jsx)(_.Z,{value:s,onSelect:r,listHeight:150,children:q.O9.map((function(e){return(0,I.jsx)(_.Z.Option,{value:e,children:(0,I.jsx)(ae.W,{className:"tag-circle",color:e})},e)}))});return(0,I.jsx)(h.Z,{autoFocus:!0,placeholder:"Tag name...",className:"tag-name-input",addonBefore:a,value:t,onChange:function(e){return n(e.target.value)}})},ce=function(e){var t=e.noteTag,n=e.removeTag,a=e.onClick,l=t.uid,u=t.color,x=t.name,f=t.notes,m=(0,c.useContext)(Ue),h=m.editing,g=m.tagUid,v=(0,c.useContext)(Fe).setAllTags,Z=(0,c.useState)(x),y=(0,r.Z)(Z,2),C=y[0],b=y[1],k=(0,c.useState)(u),T=(0,r.Z)(k,2),S=T[0],w=T[1],A=(0,c.useState)(!1),E=(0,r.Z)(A,2),D=E[0],U=E[1];(0,c.useEffect)((function(){return U(!1)}),[h]);var F=function(){var e=(0,s.Z)(i().mark((function e(){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,d.Z)((0,d.Z)({},t),{},{name:C,color:S}),e.next=3,(0,o.tk)(n);case 3:s=e.sent,v(s),U(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,I.jsxs)("div",{className:se()("tag-item",{curr:g===l,editing:D}),onClick:a,children:[D||(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ae.W,{className:"tag-circle",color:S}),(0,I.jsx)("span",{className:"tag-name",children:C})]}),h||(0,I.jsx)("span",{className:"tag-num",children:f.length}),h&&!D&&(0,I.jsx)(p.Z,{size:"small",type:"text",onClick:function(){return U(!0)},icon:(0,I.jsx)(N.Z,{})}),D&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ie,{tagName:C,setTagName:b,tagColor:S,setTagColor:w}),(0,I.jsxs)("div",{className:"buttons",children:[(0,I.jsx)(j.Z,{title:"This tag will be deleted.",onConfirm:n,placement:"left",cancelText:"Cancel",icon:(0,I.jsx)(Q.Z,{}),okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},children:(0,I.jsx)(p.Z,{danger:!0,children:"Delete"})}),(0,I.jsx)(p.Z,{onClick:function(){b(x),w(u),U(!1)},children:"Cancel"}),(0,I.jsx)(p.Z,{type:"primary",disabled:!C,onClick:F,children:"OK"})]})]})]})},oe=function(e){var t=e.setAdding,n=(0,c.useState)(""),s=(0,r.Z)(n,2),a=s[0],i=s[1],l=(0,c.useState)((0,q.mr)()),u=(0,r.Z)(l,2),d=u[0],x=u[1],f=(0,c.useContext)(Fe).setAllTags;return(0,I.jsx)("div",{className:"tag-wrapper",children:(0,I.jsxs)("div",{className:"tag-item curr editing",children:[(0,I.jsx)(ie,{tagName:a,setTagName:i,tagColor:d,setTagColor:x}),(0,I.jsxs)("div",{className:"buttons",children:[(0,I.jsx)(p.Z,{onClick:function(){return t(!1)},children:"Cancel"}),(0,I.jsx)(p.Z,{type:"primary",disabled:!a,onClick:function(){var e=a.trim();e&&((0,o.HO)(e,d).then(f),t(!1))},children:"OK"})]})]})})};function le(e){var t=e.onSelect,n=(0,c.useContext)(Ue),a=n.allTags,l=n.editing,u=n.tagUid,d=n.allNotes,x=(0,c.useContext)(Fe),f=x.setTagUid,m=x.setAllTags,h=(0,c.useContext)(Fe).setEditing,j=(0,c.useState)(""),g=(0,r.Z)(j,2),v=g[0],Z=g[1],N=(0,c.useState)(!1),y=(0,r.Z)(N,2),C=y[0],b=y[1];function k(){return(k=(0,s.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Pn)(t);case 2:n=e.sent,f("DEFAULT"),m(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){f(e),t&&t()},S=(0,I.jsx)("div",{className:"tag-wrapper",children:(0,I.jsxs)("div",{className:se()("tag-item",{curr:"DEFAULT"===u}),onClick:function(){return T("DEFAULT")},children:[(0,I.jsx)($.Z,{className:"all-note-icon"}),(0,I.jsx)("span",{className:"tag-name",children:"All Notes"}),(0,I.jsx)("span",{className:"tag-num",children:Object.keys(d).length})]})}),w=(0,I.jsx)(p.Z,{className:"edit-btn small",shape:"round",type:l?"primary":"default",onClick:function(){return h((function(e){return!e}))},children:l?"Done":"Edit"});return(0,I.jsxs)("aside",{className:"side-menu",children:[(0,I.jsxs)("div",{className:"tag-list",children:[S,Object.values(a).map((function(e){var t=e.uid,n=function(){return function(e){return k.apply(this,arguments)}(t)};return(0,I.jsx)("div",{className:"tag-wrapper",children:(0,I.jsx)(re,{uid:t,onDelete:n,nowSwiped:v,setNowSwiped:Z,disable:l,children:(0,I.jsx)(ce,{noteTag:e,removeTag:n,onClick:function(){return T(t)}})})},t)})),C&&(0,I.jsx)(oe,{setAdding:b})]}),(0,I.jsxs)("footer",{children:[(0,I.jsx)(p.Z,{shape:"round",icon:(0,I.jsx)(ee.Z,{}),onClick:function(){return b(!0)},disabled:C,children:"Add"}),w]})]})}function ue(){var e=(0,c.useState)(!1),t=(0,r.Z)(e,2),n=t[0],s=t[1],a=(0,c.useContext)(Ue).editing,i=(0,c.useContext)(Fe).setEditing;var o=(0,I.jsx)(p.Z,{className:"edit-btn large",onClick:function(){i((function(e){return!e}))},type:a?"primary":"text",children:a?"Done":"Edit"}),l=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(p.Z,{className:"aside-btn",type:"text",icon:(0,I.jsx)(X.Z,{}),onClick:function(){return s((function(e){return!e}))}}),(0,I.jsx)(J.Z,{className:"aside-drawer",width:300,placement:"left",closable:!1,visible:n,onClose:function(){return s(!1)},contentWrapperStyle:{boxShadow:"none"},bodyStyle:{padding:0,overflow:"hidden"},destroyOnClose:!0,children:(0,I.jsx)(le,{onSelect:function(){return a||s(!1)}})})]});return(0,I.jsxs)("div",{className:"left-tools",children:[l,o]})}var de=n(4942),xe=n(93433),pe=n(37762),fe=n(68692),me=n(13876),he=n(20054),je=n(9486),ge=n(1194),ve=n(11730),Ze=n(42553),Ne=n(37382),ye=n(47528),Ce=n(6593),be=n.n(Ce),ke=n(16911),Te=n(24124),Se=n(97892),we=n.n(Se);function Ae(e){var t=e.noteList,n=(0,c.useState)(""),a=(0,r.Z)(n,2),l=a[0],u=a[1],d=(0,c.useContext)(Ue).editing,x=(0,c.useContext)(Fe),p=x.setAllTags,f=x.setAllNotes,m=(0,c.useState)("LAST"),h=(0,r.Z)(m,2),j=h[0],g=h[1],v=(0,c.useState)(""),Z=(0,r.Z)(v,2),N=Z[0],y=Z[1],C=(0,c.useState)((0,Te.l4)()),b=(0,r.Z)(C,2),k=b[0],T=b[1],S=function(){var e=(0,s.Z)(i().mark((function e(t){var n,s,r,a,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,pe.Z)(t),e.prev=1,r.s();case 3:if((a=r.n()).done){e.next=12;break}return c=a.value,e.next=7,(0,o.f_)(c);case 7:l=e.sent,n=l.tags,s=l.allNotes;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:n&&p(n),s&&f(s);case 22:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)(i().mark((function e(t,n){var s,r,a,c,l,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,pe.Z)(t),e.prev=1,a.s();case 3:if((c=a.n()).done){e.next=12;break}return l=c.value,e.next=7,(0,o.tw)(l,n);case 7:u=e.sent,s=u.tags,r=u.allNotes;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:s&&p(s),r&&f(r);case 22:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),A=(0,c.useMemo)((function(){var e=function(e,t){return t-e};switch(j){case"CREATE":return t.sortBy((function(e){return e.createTime}),e);case"LAST":return t.sortBy((function(e){return e.lastTime}),e);case"NAME":return t.sortBy((function(e){return e.name.toUpperCase()}));default:return t}}),[t,j]),E=(0,c.useMemo)((function(){return A.filter((function(e){return e.name.toUpperCase().includes(N.trim().toUpperCase())}))}),[N,A]);return(0,c.useEffect)((function(){y(""),T((0,Te.l4)())}),[t,d]),(0,I.jsxs)("section",{className:"note-list",children:[(0,I.jsx)(Ee,{sortType:j,setSortType:g,searchText:N,setSearchText:y,onDelete:function(){return S(k.toArray())},onMove:function(e){return w(k.toArray(),e)},disabled:0===k.size}),E.map((function(e){var t=e.uid;return(0,I.jsx)(re,{onDelete:function(){return S([t])},nowSwiped:l,setNowSwiped:u,disable:d,uid:t,children:(0,I.jsx)(De,{noteInfo:e,selected:k.has(t),setSelectNotes:T})},t)}))]})}we().extend(be());var Ee=function(e){var t=e.sortType,n=e.setSortType,s=e.searchText,r=e.setSearchText,a=e.onDelete,i=e.onMove,o=e.disabled,l=void 0===o||o,u=(0,c.useContext)(Ue),d=u.editing,f=u.allTags,m=(0,I.jsx)(x.Z,{onClick:function(e){var t=e.key;return n(t)},selectedKeys:[t],className:"sort-drop",items:[{type:"group",label:"Sort by",children:[{icon:(0,I.jsx)(fe.Z,{}),key:"CREATE",label:"Date created"},{icon:(0,I.jsx)(me.Z,{}),key:"LAST",label:"Date modified"},{icon:(0,I.jsx)(he.Z,{}),key:"NAME",label:"Name"}]}]}),g=(0,I.jsx)(Ne.Z,{overlay:m,trigger:["click"],placement:"bottom",children:(0,I.jsx)(p.Z,{className:"sort-btn",type:"text",shape:"circle",icon:(0,I.jsx)(je.Z,{rotate:90})})}),v=(0,I.jsx)(j.Z,{title:"Notes will be deleted.",onConfirm:a,icon:(0,I.jsx)(Q.Z,{}),placement:"bottom",cancelText:"Cancel",disabled:l,okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},children:(0,I.jsx)(p.Z,{className:"del-btn",shape:"round",type:"text",disabled:l,danger:!l,icon:(0,I.jsx)(Q.Z,{}),children:"Delete"})}),Z=function(e){var t=e.color,n=e.name;return(0,I.jsxs)("div",{className:"tag-select",children:[(0,I.jsx)(ae.W,{color:t,className:"tag-circle"}),(0,I.jsx)("span",{className:"name",children:n})]})},N=(0,I.jsx)(x.Z,{onClick:function(e){var t=e.key;return i(t)},items:[{key:"DEFAULT",label:(0,I.jsx)(Z,{color:"#eee",name:"No tag"})}].concat((0,xe.Z)(Object.values(f).map((function(e){return{key:e.uid,label:(0,I.jsx)(Z,{color:e.color,name:e.name})}}))))}),y=(0,I.jsx)(Ne.Z,{disabled:l,overlay:N,trigger:["click"],placement:"bottom",children:(0,I.jsx)(p.Z,{shape:"round",type:"text",className:"tag-btn",icon:(0,I.jsx)(ge.Z,{}),style:{transition:"none"},children:"Tag"})});return(0,I.jsx)("div",{className:se()("head-tools",{editing:d}),children:d?(0,I.jsxs)(I.Fragment,{children:[y,v]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(h.Z,{value:s,onChange:function(e){return r(e.target.value)},className:"search-input",prefix:(0,I.jsx)(ve.Z,{}),bordered:!1,allowClear:!0}),g]})})},De=function(e){var t=e.noteInfo,n=e.selected,s=e.setSelectNotes,a=t.team,i=t.uid,l=t.name,u=t.thumbnail,x=t.lastTime,p=(0,c.useMemo)((function(){return we()(x).calendar()}),[x]),f="".concat(a?"team":"reader","/").concat(i),m=(0,c.useContext)(Ue).editing,j=(0,c.useContext)(Fe).setAllNotes,g=(0,c.useState)(l),v=(0,r.Z)(g,2),Z=v[0],N=v[1],y=(0,c.useState)(!1),C=(0,r.Z)(y,2),b=C[0],k=C[1],T=(0,U.s0)();return(0,I.jsxs)("div",{className:se()("note-item",{selected:n,loaded:b}),onClick:function(){if(!m)return T(f);s((function(e){return e.has(i)?e.delete(i):e.add(i)}))},onAnimationEnd:function(){return k(!0)},children:[(0,I.jsxs)("div",{className:"timg-wrapper",children:[(0,I.jsx)("img",{src:u||ke,alt:l,className:"timg"}),a&&(0,I.jsx)(ye.Z,{color:"blue",className:"cloud-icon",children:(0,I.jsx)(Ze.Z,{})})]}),(0,I.jsxs)("div",{className:"content",children:[m||(0,I.jsx)("p",{className:"name",children:l}),m&&(0,I.jsx)(h.Z,{className:"name-input",value:Z,onChange:function(e){return N(e.target.value)},onClick:function(e){return e.stopPropagation()},onBlur:function(){var e=Z.trim();if(!e||e===l)return N(l);(0,o.SP)(i,{name:e}),j((function(t){return(0,d.Z)((0,d.Z)({},t),{},(0,de.Z)({},i,(0,d.Z)((0,d.Z)({},t[i]),{},{name:e})))}))}}),(0,I.jsx)("p",{className:"date",children:p})]})]})},Ue=(0,c.createContext)({tagUid:"DEFAULT",editing:!1,allNotes:{},allTags:{}}),Fe=(0,c.createContext)({setAllNotes:function(){},setAllTags:function(){},setTagUid:function(){},setEditing:function(){},menuInit:function(){}});function Me(){var e=(0,c.useState)({}),t=(0,r.Z)(e,2),n=t[0],s=t[1],a=(0,c.useState)({}),i=(0,r.Z)(a,2),l=i[0],u=i[1],d=(0,c.useState)("DEFAULT"),x=(0,r.Z)(d,2),p=x[0],f=x[1],m=(0,c.useState)(!1),h=(0,r.Z)(m,2),j=h[0],g=h[1],v=(0,c.useMemo)((function(){return"DEFAULT"===p?{uid:"",name:"All Notes",color:"#000000",notes:Object.keys(n)}:l[p]}),[n,l,p]),Z=(0,c.useMemo)((function(){return(0,Te.aV)(v.notes.filter((function(e){return e in n})).map((function(e){return n[e]})))}),[v,n]),N=function(){(0,o.hY)().then(s),(0,o.Ys)().then(u),document.title="Multibility"};(0,c.useEffect)(N,[]);var y="DEFAULT"===p;return(0,I.jsx)(Ue.Provider,{value:{tagUid:p,editing:j,allNotes:n,allTags:l},children:(0,I.jsx)(Fe.Provider,{value:{setAllNotes:s,setAllTags:u,setEditing:g,setTagUid:f,menuInit:N},children:(0,I.jsxs)("div",{className:"main-menu container",children:[(0,I.jsxs)("header",{children:[(0,I.jsx)(ue,{}),(0,I.jsx)("h2",{className:se()({logo:y}),children:y?"Multibility":v.name}),(0,I.jsx)(B,{})]}),(0,I.jsxs)("main",{children:[(0,I.jsx)(le,{}),(0,I.jsx)(Ae,{noteList:Z}),(0,I.jsx)(Pe,{})]})]})})})}var Pe=function(){var e=(0,c.useContext)(Ue).tagUid,t=(0,c.useContext)(Fe),n=t.setAllTags,r=t.setAllNotes;function a(){return(a=(0,s.Z)(i().mark((function t(){var s,a,c,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=(0,l.Xn)()).tagID=e,t.next=4,(0,o.au)(s);case 4:a=t.sent,c=a.tags,u=a.allNotes,n(c),r(u);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,I.jsx)(p.Z,{className:"new-note",size:"large",type:"primary",shape:"circle",onClick:function(){return a.apply(this,arguments)},icon:(0,I.jsx)(u.Z,{})})}},16911:function(e,t,n){e.exports=n.p+"static/media/default.dd5512731ffc4dfd92ad.png"}}]);
//# sourceMappingURL=959.9c2919c7.chunk.js.map