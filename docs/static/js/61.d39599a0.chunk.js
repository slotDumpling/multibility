(self.webpackChunkmultibility=self.webpackChunkmultibility||[]).push([[61],{96153:function(t,n,e){"use strict";function r(t,n){var e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("can't get virtual canvas context");return e.width=t,e.height=n,{canvas:e,context:r}}function a(t){t.width=1,t.height=1;var n=t.getContext("2d");null===n||void 0===n||n.clearRect(0,0,1,1)}e.d(n,{j:function(){return a},v:function(){return r}})},21176:function(t,n,e){"use strict";e.r(n),e.d(n,{LoadPDF:function(){return I},getNotePageImage:function(){return Z},getOneImage:function(){return k},getPDFImages:function(){return w}});var r=e(1413),a=e(29439),u=e(15861),c=e(87757),s=e.n(c),i=e(96153),o=e(92198),p=e(61842),f=e.n(p),h=e(24610),l=e(62560),v=e(20434),x=e.n(v),g=e(72058);l.GlobalWorkerOptions.workerSrc=x();var m=function(){var t=(0,u.Z)(s().mark((function t(n){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,n.arrayBuffer();case 3:return t.t1=t.sent,e=new t.t0(t.t1),t.abrupt("return",l.getDocument(e).promise);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),d=function(){var t=(0,u.Z)(s().mark((function t(n,e,r){var a,u,c,o,p,f,h,l,v;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getPage(e);case 2:return a=t.sent,u=a.getViewport({scale:r}),c=u.height,o=u.width,p=c/o,f=(0,i.v)(Math.floor(o*r),Math.floor(c*r)),h=f.canvas,l=f.context,t.next=9,a.render({canvasContext:l,viewport:u,transform:[r,0,0,r,0,0]}).promise;case 9:return v=h.toDataURL(),(0,i.j)(h),t.abrupt("return",[v,p]);case 12:case"end":return t.stop()}}),t)})));return function(n,e,r){return t.apply(this,arguments)}}();function w(t){return b.apply(this,arguments)}function b(){return b=(0,u.Z)(s().mark((function t(n){var e,r,u,c,i,o,p,f,h,l,v,x=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=x.length>1&&void 0!==x[1]?x[1]:2,r=x.length>2?x[2]:void 0,t.next=4,m(n);case 4:u=t.sent,c=u.numPages,i=[],o=[],p=1;case 9:if(!(p<=c)){t.next=22;break}return t.next=12,d(u,p,e);case 12:f=t.sent,h=(0,a.Z)(f,2),l=h[0],v=h[1],i.push(l),o.push(v),r&&r(Math.floor(p/c*100));case 19:p+=1,t.next=9;break;case 22:return t.abrupt("return",{images:i,ratios:o});case 23:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function k(t,n){return y.apply(this,arguments)}function y(){return y=(0,u.Z)(s().mark((function t(n,e){var r,u,c,i,o,p,f=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:2,t.next=3,m(n);case 3:if(u=t.sent,c=u.numPages,!(e>c)){t.next=7;break}throw new Error("index out of range");case 7:return t.next=9,d(u,e,r);case 9:return i=t.sent,o=(0,a.Z)(i,1),p=o[0],t.abrupt("return",p);case 13:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function Z(t,n){return P.apply(this,arguments)}function P(){return(P=(0,u.Z)(s().mark((function t(n,e){var r,a,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.mp)(n,e);case 2:if(!(r=t.sent)){t.next=5;break}return t.abrupt("return",r);case 5:return t.next=7,f().getItem("PDF_".concat(n));case 7:if(a=t.sent){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,k(a,e,2);case 12:return u=t.sent,(0,g.pW)(n,e,u),t.abrupt("return",u);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t,n){return C.apply(this,arguments)}function C(){return(C=(0,u.Z)(s().mark((function t(n,e){var a,u,c,i,p,f,l,v;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(n,.5,e);case 2:return a=t.sent,u=a.images,c=a.ratios,i={},p=[],u.forEach((function(t,n){var e=(0,h.v4)();i[e]={image:t,ratio:c[n],state:{strokes:{}},pdfIndex:n+1},p.push(e)})),f=n.name.replace(".pdf",""),t.next=11,n.arrayBuffer();case 11:return l=t.sent,v=new Blob([l],{type:"application/pdf"}),t.abrupt("return",(0,r.Z)((0,r.Z)({},(0,o.Xn)()),{},{name:f,withImg:!0,pdf:v,thumbnail:u[0],pageRec:i,pageOrder:p}));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},14601:function(){},32767:function(){},28251:function(){},57677:function(){},1543:function(){},87324:function(){}}]);
//# sourceMappingURL=61.d39599a0.chunk.js.map