"use strict";(self.webpackChunkmultibility=self.webpackChunkmultibility||[]).push([[442],{72058:function(e,t,n){n.d(t,{eG:function(){return f},mp:function(){return u},pW:function(){return d}});var r=n(37762),a=n(93433),s=n(15861),c=n(87757),i=n.n(c),l=n(61842),o=n.n(l)().createInstance({name:"imageForage"}),u=function(){var e=(0,s.Z)(i().mark((function e(t,n){var r,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getItem("LIST");case 2:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==r;case 6:if(!e.t0){e.next=10;break}e.t2=r,e.next=11;break;case 10:e.t2=[];case 11:if(s=e.t2,c="".concat(t,"_").concat(n),s.includes(c)){e.next=15;break}return e.abrupt("return");case 15:return s=[c].concat((0,a.Z)(s.filter((function(e){return e!==c})))),e.next=18,o.setItem("LIST",s);case 18:return e.next=20,o.getItem(c);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,s.Z)(i().mark((function e(t,n,r){var s,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getItem("LIST");case 2:if(e.t1=s=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==s;case 6:if(!e.t0){e.next=10;break}e.t2=s,e.next=11;break;case 10:e.t2=[];case 11:return c=e.t2,l="".concat(t,"_").concat(n),(c=[l].concat((0,a.Z)(c.filter((function(e){return e!==l}))))).length>10&&(c=c.slice(0,10)),e.next=17,o.setItem("LIST",c);case 17:return e.next=19,o.setItem(l,r);case 19:x();case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),x=function(){var e=(0,s.Z)(i().mark((function e(){var t,n,a,s,c,l,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getItem("LIST");case 2:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==t;case 6:if(!e.t0){e.next=10;break}e.t2=t,e.next=11;break;case 10:e.t2=[];case 11:return n=e.t2,a=new Set(n),e.next=15,o.keys();case 15:s=e.sent,c=(0,r.Z)(s),e.prev=17,c.s();case 19:if((l=c.n()).done){e.next=28;break}if("LIST"!==(u=l.value)){e.next=23;break}return e.abrupt("continue",26);case 23:if(a.has(u)){e.next=26;break}return e.next=26,o.removeItem(u);case 26:e.next=19;break;case 28:e.next=33;break;case 30:e.prev=30,e.t3=e.catch(17),c.e(e.t3);case 33:return e.prev=33,c.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[17,30,33,36]])})));return function(){return e.apply(this,arguments)}}(),f=function(){return o.clear()}},40256:function(e,t,n){n.r(t),n.d(t,{default:function(){return _e}});var r=n(29439),a=n(72791),s=n(75783),c=n(1413),i=n(15861),l=n(87757),o=n.n(l),u=n(92414),d=n(82622),x=n(93309),f=n(96324),p=n(79286),m=n(86330),h=n(20662),j=n(87309),v=n(96038),g=n(74115),Z=n(52365),k=n(11956),b=n(81694),N=n.n(b),y=n(24610),T=n(80184),C=(0,a.createContext)(["",function(){}]),w=function(e){var t=e.children,n=(0,a.useState)("");return(0,T.jsx)(C.Provider,{value:n,children:t})},S=function(e){var t=e.children,n=e.onDelete,s=e.disable,l=void 0!==s&&s,u=e.className,d=(0,a.useState)(y.v4),x=(0,r.Z)(d,1)[0],f=(0,a.useContext)(C),p=(0,r.Z)(f,2),m=p[0],h=p[1],j=(0,a.useState)(!1),v=(0,r.Z)(j,2),g=v[0],b=v[1],w=g&&(!m||m===x),S=(0,a.useState)(!1),I=(0,r.Z)(S,2),D=I[0],E=I[1],A=(0,a.useState)(),F=(0,r.Z)(A,2),L=F[0],M=F[1],P=(0,a.useRef)(null);(0,a.useEffect)((function(){m!==x&&b(!1)}),[m,x]);var U=(0,k.useSwipeable)({onSwipedLeft:function(){var e;b(!0),h(x),M(null===(e=P.current)||void 0===e?void 0:e.clientHeight)},onSwipedRight:function(){b(!1),h(""),M(void 0)},preventDefaultTouchmoveEvent:!0,trackTouch:!l});(0,a.useEffect)((function(){l&&(M(void 0),h(""),b(!1))}),[l,h]);var O=(0,Z.mf)({propertyName:"height",active:D}),R=(0,r.Z)(O,2),z=R[0],B=R[1],W=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,z;case 3:n(),h("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",(0,c.Z)((0,c.Z)({className:N()("swipe-wrapper",u),"data-deleted":D,"data-deleting":w},U),{},{style:{height:L},onTransitionEnd:B,children:[(0,T.jsx)("div",{className:"content",ref:P,children:t}),(0,T.jsx)("div",{className:"button",onClick:W,style:{height:L},children:"Delete"})]}))},I=n(35873),D=function(e){var t=e.tagName,n=e.setTagName,r=e.tagColor,a=e.setTagColor,s=(0,T.jsx)(m.Z,{value:r,onSelect:a,listHeight:150,virtual:!1,children:g.O9.map((function(e){return(0,T.jsx)(m.Z.Option,{value:e,children:(0,T.jsx)(I.W,{className:"tag-circle",color:e})},e)}))});return(0,T.jsx)(h.Z,{placeholder:"Tag name...",className:"tag-name-input",addonBefore:s,value:t,onChange:function(e){return n(e.target.value)}})},E=function(e){var t=e.noteTag,n=t.uid,l=t.color,x=t.name,f=t.notes,p=(0,a.useContext)(Ge),m=p.currTagID,h=p.setAllTags,Z=p.setCurrTagID,k=(0,a.useState)(x),b=(0,r.Z)(k,2),N=b[0],y=b[1],C=(0,a.useState)(l),w=(0,r.Z)(C,2),E=w[0],A=w[1],F=(0,a.useState)(!1),L=(0,r.Z)(F,2),M=L[0],P=L[1],U=m===n;function O(){return R.apply(this,arguments)}function R(){return(R=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Pn)(n);case 2:t=e.sent,Z("DEFAULT"),h(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,a.useEffect)((function(){return P(!1)}),[U]);var z=function(){var e=(0,i.Z)(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,c.Z)((0,c.Z)({},t),{},{name:N,color:E}),e.next=3,(0,s.tk)(n);case 3:r=e.sent,h(r),P(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(I.W,{className:"tag-circle",color:E}),(0,T.jsx)("span",{className:"tag-name",children:N}),U?(0,T.jsx)(j.Z,{size:"small",type:"text",onClick:function(){return P(!0)},icon:(0,T.jsx)(u.Z,{})}):(0,T.jsx)("span",{className:"tag-num",children:f.length})]}),W=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(D,{tagName:N,setTagName:y,tagColor:E,setTagColor:A}),(0,T.jsxs)("div",{className:"buttons",children:[(0,T.jsx)(v.Z,{title:"This tag will be deleted.",onConfirm:O,placement:"left",cancelText:"Cancel",icon:(0,T.jsx)(d.Z,{}),okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},children:(0,T.jsx)(j.Z,{danger:!0,children:"Delete"})}),(0,T.jsx)(j.Z,{onClick:function(){y(x),A(l),P(!1)},children:"Cancel"}),(0,T.jsx)(j.Z,{type:"primary",disabled:!N,onClick:z,children:"OK"})]})]});return(0,T.jsx)(S,{className:"tag-wrapper",onDelete:O,disable:M,children:(0,T.jsx)("div",{className:"tag-item","data-curr":U,"data-editing":M,onClick:function(){return Z(n)},style:(0,g.MW)(l),children:M?W:B})})},A=function(e){var t=e.setAdding,n=(0,a.useState)(""),c=(0,r.Z)(n,2),i=c[0],l=c[1],o=(0,a.useState)((0,g.mr)()),u=(0,r.Z)(o,2),d=u[0],x=u[1],f=(0,a.useContext)(Ge).setAllTags;return(0,T.jsx)("div",{className:"tag-wrapper",children:(0,T.jsxs)("div",{className:"tag-item","data-curr":!0,"data-editing":!0,children:[(0,T.jsx)(D,{tagName:i,setTagName:l,tagColor:d,setTagColor:x}),(0,T.jsxs)("div",{className:"buttons",children:[(0,T.jsx)(j.Z,{onClick:function(){return t(!1)},children:"Cancel"}),(0,T.jsx)(j.Z,{type:"primary",disabled:!i,onClick:function(){var e=i.trim();e&&((0,s.HO)(e,d).then(f),t(!1))},children:"OK"})]})]})})},F=function(){var e=(0,a.useContext)(Ge),t=e.allTags,n=e.currTagID,s=e.allNotes,c=e.setCurrTagID,i=(0,a.useState)(!1),l=(0,r.Z)(i,2),o=l[0],u=l[1],d=(0,T.jsx)("div",{className:"tag-wrapper",children:(0,T.jsxs)("div",{className:"tag-item","data-curr":"DEFAULT"===n,onClick:function(){return c("DEFAULT")},children:[(0,T.jsx)(x.Z,{className:"all-note-icon"}),(0,T.jsx)("span",{className:"tag-name",children:"All Notes"}),(0,T.jsx)("span",{className:"tag-num",children:Object.keys(s).length})]})}),m=(0,T.jsxs)("header",{children:[(0,T.jsx)("label",{htmlFor:"aside-check",className:"aside-label",children:(0,T.jsx)(j.Z,{style:{pointerEvents:"none"},className:"aside-btn",type:"text",icon:(0,T.jsx)(f.Z,{})})}),(0,T.jsx)("h2",{className:"logo",children:"Multibility"}),(0,T.jsx)(j.Z,{className:"new-tag-btn",type:"text",icon:(0,T.jsx)(p.Z,{}),onClick:function(){return u(!0)},disabled:o})]});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("input",{type:"checkbox",name:"aside-check",id:"aside-check"}),(0,T.jsxs)("aside",{className:"side-menu",children:[m,(0,T.jsxs)("div",{className:"tag-list",children:[d,(0,T.jsx)(w,{children:Object.values(t).map((function(e){return(0,T.jsx)(E,{noteTag:e},e.uid)}))}),o&&(0,T.jsx)(A,{setAdding:u})]})]}),(0,T.jsx)("label",{htmlFor:"aside-check",className:"aside-label",children:(0,T.jsx)("div",{className:"aside-mask"})})]})},L=n(4942),M=n(37762),P=n(75660),U=n(89295),O=n(96989),R=n(37557),z=n(82670),B=n(16871),W=n(6593),H=n.n(W),K=n(69228),G=n(30501),_=n(56200),V=n(92198),Y=n(51570),J=n(67415),X=n(45987),q=n(50419),Q=n(28817),$=n(70140),ee=n(99372),te=n(66776),ne=n(29529),re=n(14057),ae=n(12056),se=n(99660),ce=n(61753),ie=n(82305),le=n(69951),oe=n(72058),ue=n(61842),de=n.n(ue),xe=["children","title","keyName"],fe=function(e){var t=e.children,n=e.title,a=e.keyName,s=(0,X.Z)(e,xe),i=(0,Z.zI)(),l=(0,r.Z)(i,2),o=l[0],u=l[1];return(0,T.jsx)(U.Z,(0,c.Z)((0,c.Z)({in:o===a},s),{},{children:(0,T.jsxs)("div",{className:"secondary",children:[(0,T.jsxs)("nav",{children:[(0,T.jsx)(j.Z,{type:"text",shape:"circle",onClick:function(){return u("MENU")},icon:(0,T.jsx)(ee.Z,{})}),(0,T.jsx)("h3",{children:n})]}),t]})}))},pe=function(){var e=(0,a.useState)(!1),t=(0,r.Z)(e,2),c=t[0],l=t[1],u=(0,a.useContext)(Ge),d=u.currTagID,x=u.setAllTags,f=u.setAllNotes,p=(0,a.useState)(0),m=(0,r.Z)(p,2),h=m[0],j=m[1];function v(){return(v=(0,i.Z)(o().mark((function e(t){var r,a,c,i,u,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/pdf"===t.type){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.next=5,Promise.all([n.e(643),n.e(61)]).then(n.bind(n,21176));case 5:return r=e.sent,a=r.LoadPDF,e.next=9,a(t,j);case 9:return(c=e.sent).tagID=d,e.next=13,(0,s.au)(c);case 13:return i=e.sent,u=i.tags,p=i.allNotes,x(u),f(p),l(!1),q.ZP.success("PDF Loaded"),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,T.jsxs)("label",{children:[(0,T.jsxs)("div",{className:"pdf-upload",children:[(0,T.jsx)("div",{className:"icon-wrapper",children:c?(0,T.jsx)(Q.Z,{width:48,type:"circle",percent:h}):(0,T.jsx)(te.Z,{className:"inbox-icon"})}),(0,T.jsx)("p",{className:"hint",children:"Click to upload a pdf file."})]}),(0,T.jsx)("input",{type:"file",multiple:!1,accept:".pdf",onChange:function(e){var t=e.target.files,n=t&&t[0];n&&function(e){v.apply(this,arguments)}(n)}})]})},me=function(){var e=(0,Z.zI)(),t=(0,r.Z)(e,2)[1],n=(0,le.vW)(),s=(0,a.useState)(n),c=(0,r.Z)(s,2),i=c[0],l=c[1];return(0,T.jsxs)("div",{className:"profile-page",children:[(0,T.jsx)(h.Z,{value:i,onChange:function(e){return l(e.target.value)},prefix:(0,T.jsx)(ne.Z,{}),allowClear:!0}),(0,T.jsx)(j.Z,{disabled:n===i||!i,onClick:function(){i&&((0,le.lu)(i),t("MENU"))},type:"primary",block:!0,children:"OK"})]})},he=function(){var e=(0,a.useContext)(Ge).menuInit,t=function(){var t=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de().clear();case 2:return t.next=4,(0,oe.eG)();case 4:e();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,T.jsxs)("div",{className:"setting-menu",children:[(0,T.jsx)(j.Z,{icon:(0,T.jsx)(re.Z,{}),onClick:(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.E();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),block:!0,children:"Update"}),(0,T.jsx)(v.Z,{title:"Everything will be deleted.",onConfirm:t,icon:(0,T.jsx)(ae.Z,{}),okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},cancelText:"Cancel",placement:"bottom",children:(0,T.jsx)(j.Z,{icon:(0,T.jsx)(ae.Z,{}),danger:!0,block:!0,children:"Clear all"})})]})},je=[{key:"PDF",label:"Import PDF",component:(0,T.jsx)(pe,{}),icon:(0,T.jsx)(se.Z,{})},{key:"PROFILE",label:"My profile",component:(0,T.jsx)(me,{}),icon:(0,T.jsx)(ne.Z,{})},{key:"SETTINGS",label:"Settings",component:(0,T.jsx)(he,{}),icon:(0,T.jsx)(u.Z,{})}],ve=function(){var e=(0,Z.zI)(),t=(0,r.Z)(e,2)[1];return(0,T.jsx)("div",{className:"primary-menu",children:(0,T.jsx)($.Z,{onClick:function(e){var n=e.key;return t(n)},items:je})})},ge=function(){var e=(0,a.useState)(0),t=(0,r.Z)(e,2),n=t[0],s=t[1],i=(0,Z.zI)(),l=(0,r.Z)(i,2),o=l[0],u=l[1],d={timeout:300,onEnter:function(e){s(e.clientHeight)},unmountOnExit:!0};return(0,a.useEffect)((function(){return u("MENU")}),[u]),(0,T.jsxs)("section",{className:"others-menu",style:{height:n},children:[(0,T.jsx)(U.Z,(0,c.Z)((0,c.Z)({in:"MENU"===o},d),{},{children:(0,T.jsx)(ve,{})})),je.map((function(e){var t=e.key,n=e.label,r=e.component;return(0,T.jsx)(fe,(0,c.Z)((0,c.Z)({keyName:t,title:n},d),{},{children:r}),t)}))]})};function Ze(){return(0,T.jsxs)(K.Z,{placement:"bottomRight",trigger:"click",content:(0,T.jsx)(Z.s2,{initKey:"",children:(0,T.jsx)(ge,{})}),zIndex:900,children:[(0,T.jsx)(j.Z,{className:"small",type:"text",icon:(0,T.jsx)(ce.Z,{})}),(0,T.jsx)(j.Z,{className:"large",shape:"circle",icon:(0,T.jsx)(ce.Z,{})})]})}var ke=function(){return(0,T.jsxs)("nav",{children:[(0,T.jsx)(be,{}),(0,T.jsx)(Ne,{})]})},be=function(){var e,t,n=(0,a.useContext)(Ge),r=null!==(e=null===(t=n.allTags[n.currTagID])||void 0===t?void 0:t.name)&&void 0!==e?e:"All notes";return(0,T.jsxs)("div",{className:"nav-left",children:[(0,T.jsx)("label",{htmlFor:"aside-check",className:"aside-label",children:(0,T.jsx)(j.Z,{style:{pointerEvents:"none"},className:"aside-btn small",type:"text",icon:(0,T.jsx)(f.Z,{})})}),(0,T.jsx)("h2",{children:(0,T.jsx)("b",{children:r})})]})},Ne=function(){return(0,T.jsxs)("div",{className:"nav-right",children:[(0,T.jsx)(ye,{}),(0,T.jsx)(Te,{}),(0,T.jsx)(Ze,{})]})},ye=function(){var e=(0,a.useContext)(Ge),t=e.currTagID,n=e.setAllTags,r=e.setAllNotes;function c(){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)(o().mark((function e(){var a,c,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=(0,V.Xn)()).tagID=t,e.next=4,(0,s.au)(a);case 4:c=e.sent,i=c.tags,l=c.allNotes,n(i),r(l);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(j.Z,{className:"new-note large",type:"primary",shape:"round",onClick:c,icon:(0,T.jsx)(G.Z,{}),children:"New"}),(0,T.jsx)(j.Z,{className:"new-note small",type:"link",onClick:c,icon:(0,T.jsx)(G.Z,{})})]})},Te=function(){var e=(0,a.useState)(""),t=(0,r.Z)(e,2),n=t[0],s=t[1],c=(0,a.useState)(!1),l=(0,r.Z)(c,2),u=l[0],d=l[1],x=(0,B.s0)();function f(){return(f=(0,i.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Y.fI)(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",x("/team/".concat(n)));case 5:s(""),d(!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,T.jsxs)(K.Z,{placement:"bottomRight",trigger:"click",title:"Join a team note",destroyTooltipOnHide:!0,onVisibleChange:function(){return d(!1)},content:(0,T.jsx)(J.GD,{plain:!0,length:4,error:u,value:n,onChange:function(e){d(!1),s(e)},onFill:function(e){return f.apply(this,arguments)}}),children:[(0,T.jsx)(j.Z,{className:"team-btn large",shape:"round",icon:(0,T.jsx)(_.Z,{}),children:"Team"}),(0,T.jsx)(j.Z,{className:"team-btn small",type:"text",icon:(0,T.jsx)(_.Z,{})})]})},Ce=function(e){var t=e.children;return(0,T.jsxs)("header",{children:[(0,T.jsx)(ke,{}),t]})},we=n(24124),Se=n(97892),Ie=n.n(Se),De=n(79856),Ee=n(93433),Ae=n(37382),Fe=n(68692),Le=n(13876),Me=n(20054),Pe=n(9486),Ue=n(1194),Oe=n(74270),Re=n(11730),ze=function(e){var t=e.sortType,n=e.setSortType,r=e.searchText,s=e.setSearchText,i=e.onDelete,l=e.onMove,o=e.disabled,u=void 0===o||o,x=(0,a.useContext)(Ge),f=x.editing,p=x.allTags,m=x.setEditing,g=(0,T.jsx)($.Z,{onClick:function(e){var t=e.key;return n(t)},selectedKeys:[t],items:[{type:"group",label:"Sort by",className:"sort-drop",children:[{icon:(0,T.jsx)(Fe.Z,{}),key:"CREATE",label:"Date created"},{icon:(0,T.jsx)(Le.Z,{}),key:"LAST",label:"Date modified"},{icon:(0,T.jsx)(Me.Z,{}),key:"NAME",label:"Name"}]}]}),Z={type:"text",shape:"circle"},k=(0,T.jsx)(Ae.Z,{overlay:g,trigger:["click"],placement:"bottomRight",children:(0,T.jsx)(j.Z,(0,c.Z)({className:"sort-btn",icon:(0,T.jsx)(Pe.Z,{rotate:90})},Z))}),b=(0,T.jsx)(v.Z,{title:"Notes will be deleted.",onConfirm:i,icon:(0,T.jsx)(d.Z,{}),placement:"bottom",cancelText:"Cancel",disabled:u,okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},children:(0,T.jsx)(j.Z,{className:"del-btn",shape:"round",type:"text",disabled:u,danger:!u,icon:(0,T.jsx)(d.Z,{}),children:"Delete"})}),N=function(e){var t=e.color,n=e.name;return(0,T.jsxs)("div",{className:"tag-select",children:[(0,T.jsx)(I.W,{color:t,className:"tag-circle"}),(0,T.jsx)("span",{className:"name",children:n})]})},y=(0,T.jsx)($.Z,{onClick:function(e){var t=e.key;return l(t)},items:[{key:"DEFAULT",label:(0,T.jsx)(N,{color:"#eee",name:"No tag"})}].concat((0,Ee.Z)(Object.values(p).map((function(e){return{key:e.uid,label:(0,T.jsx)(N,{color:e.color,name:e.name})}}))))}),C=(0,T.jsx)(Ae.Z,{overlayClassName:"tag-drop",disabled:u,overlay:y,trigger:["click"],placement:"bottom",children:(0,T.jsx)(j.Z,{shape:"round",type:"text",className:"tag-btn",icon:(0,T.jsx)(Ue.Z,{}),style:{transition:"none"},children:"Tag"})});return(0,T.jsx)("div",{className:"list-tools","data-editing":f,children:f?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(j.Z,(0,c.Z)({onClick:function(){return m(!1)},icon:(0,T.jsx)(ee.Z,{})},Z)),C,b]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(j.Z,(0,c.Z)({onClick:function(){return m(!0)},icon:(0,T.jsx)(Oe.Z,{})},Z)),(0,T.jsx)(h.Z,{value:r,onChange:function(e){return s(e.target.value)},className:"search-input",prefix:(0,T.jsx)(Re.Z,{}),bordered:!1,allowClear:!0}),k]})})};Ie().extend(H());var Be=function(e){var t=e.noteList,n=(0,a.useContext)(Ge),c=n.editing,l=n.setAllTags,u=n.setAllNotes,d=(0,a.useState)("LAST"),x=(0,r.Z)(d,2),f=x[0],p=x[1],m=(0,a.useState)(""),h=(0,r.Z)(m,2),j=h[0],v=h[1],g=(0,a.useState)((0,we.l4)()),Z=(0,r.Z)(g,2),k=Z[0],b=Z[1],y=function(){var e=(0,i.Z)(o().mark((function e(t){var n,r,a,c,i,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,M.Z)(t),e.prev=1,a.s();case 3:if((c=a.n()).done){e.next=12;break}return i=c.value,e.next=7,(0,s.f_)(i);case 7:d=e.sent,n=d.tags,r=d.allNotes;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:n&&l(n),r&&u(r);case 22:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,i.Z)(o().mark((function e(t,n){var r,a,c,i,d,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=(0,M.Z)(t),e.prev=1,c.s();case 3:if((i=c.n()).done){e.next=12;break}return d=i.value,e.next=7,(0,s.tw)(d,n);case 7:x=e.sent,r=x.tags,a=x.allNotes;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:r&&l(r),a&&u(a);case 22:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),I=(0,a.useMemo)((function(){var e=function(e,t){return t-e};switch(f){case"CREATE":return t.sortBy((function(e){return e.createTime}),e);case"LAST":return t.sortBy((function(e){return e.lastTime}),e);case"NAME":return t.sortBy((function(e){return e.name.toUpperCase()}));default:return t}}),[t,f]),D=(0,a.useMemo)((function(){return I.filter((function(e){return e.name.toUpperCase().includes(j.trim().toUpperCase())}))}),[j,I]);return(0,a.useEffect)((function(){v(""),b((0,we.l4)())}),[t,c]),(0,T.jsx)(w,{children:(0,T.jsxs)(P.Z,{className:"note-list",children:[(0,T.jsx)(Ce,{children:(0,T.jsx)(ze,{sortType:f,setSortType:p,searchText:j,setSearchText:v,onDelete:function(){return y(k.toArray())},onMove:function(e){return C(k.toArray(),e)},disabled:0===k.size})}),D.map((function(e,t){var n,r=e.uid,a=k.has(r),s=null===(n=D.get(t+1))||void 0===n?void 0:n.uid,i=(s&&k.has(s))!==a;return(0,T.jsx)(U.Z,{timeout:300,children:(0,T.jsx)(S,{className:N()("note-wrapper",{selected:a,last:i}),onDelete:function(){return y([r])},disable:c,children:(0,T.jsx)(We,{noteInfo:e,selected:a,setSelectNotes:b})})},r)}))]})})},We=function(e){var t=e.noteInfo,n=e.selected,i=e.setSelectNotes,l=t.team,o=t.uid,u=t.name,d=t.lastTime,x=t.tagID,f=(0,a.useMemo)((function(){return Ie()(d).calendar()}),[d]),p="".concat(l?"team":"reader","/").concat(o),m=(0,a.useContext)(Ge),j=m.editing,v=m.setAllNotes,Z=(0,a.useState)(u),k=(0,r.Z)(Z,2),b=k[0],N=k[1],y=(0,B.s0)(),C=(0,a.useContext)(Ge),w=C.allTags,S=C.currTagID,I=w[x];return(0,T.jsxs)("div",{className:"note-item","data-selected":n,onClick:function(){if(!j)return y(p);i((function(e){return e.has(o)?e.delete(o):e.add(o)}))},children:[(0,T.jsx)(Ke,{uid:o,team:l}),(0,T.jsxs)("div",{className:"content",children:[j||(0,T.jsx)("p",{className:"name",children:u}),j&&(0,T.jsx)(h.Z,{className:"name-input",value:b,onChange:function(e){return N(e.target.value)},onClick:function(e){return e.stopPropagation()},onBlur:function(){var e=b.trim();if(!e||e===u)return N(u);(0,s.SP)(o,{name:e}),v((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,L.Z)({},o,(0,c.Z)((0,c.Z)({},t),{},{name:e})))}))}}),(0,T.jsxs)("p",{className:"info",children:[(0,T.jsx)("span",{className:"date",children:f}),I&&"DEFAULT"===S&&(0,T.jsx)("span",{className:"tag",style:(0,g.MW)(I.color),children:I.name})]})]})]})},He=a.lazy((function(){return Promise.all([n.e(101),n.e(857),n.e(479)]).then(n.bind(n,96801))})),Ke=function(e){var t,n=e.uid,c=e.team,l=(0,a.useState)(),u=(0,r.Z)(l,2),d=u[0],x=u[1],f=(0,a.useMemo)((function(){if(d){var e=d.state,t=d.ratio;return z.Dw.loadFromFlat(e,t)}}),[d]),p=(0,a.useState)(),m=(0,r.Z)(p,2),h=m[0],j=m[1];return(0,a.useEffect)((function(){(0,i.Z)(o().mark((function e(){var t,r,a,c,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.U9)(n);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(r=t.pageRec,a=t.pageOrder,c=a[0]){e.next=9;break}return e.abrupt("return");case 9:return x(r[c]),e.next=12,(0,Y.yf)(n);case 12:if(i=e.sent){e.next=15;break}return e.abrupt("return");case 15:j(De.f.createFromTeamPages(i).getOnePageStateMap(c));case 16:case"end":return e.stop()}}),e)})))()}),[n]),(0,T.jsxs)("div",{className:"timg-wrapper","data-landscape":(null!==(t=null===d||void 0===d?void 0:d.ratio)&&void 0!==t?t:1.5)<1,children:[d&&f&&(0,T.jsx)(a.Suspense,{fallback:null,children:(0,T.jsx)(He,{drawState:f,teamStateMap:h,thumbnail:d.image,preview:!0})}),c&&(0,T.jsx)(O.Z,{className:"cloud-icon"}),(0,T.jsx)(R.Z,{className:"checked-icon"})]})},Ge=a.createContext({currTagID:"DEFAULT",editing:!1,allNotes:{},allTags:{},setAllNotes:function(){},setAllTags:function(){},setCurrTagID:function(){},setEditing:function(){},menuInit:function(){}});function _e(){var e=(0,a.useState)({}),t=(0,r.Z)(e,2),n=t[0],c=t[1],i=(0,a.useState)({}),l=(0,r.Z)(i,2),o=l[0],u=l[1],d=(0,a.useState)("DEFAULT"),x=(0,r.Z)(d,2),f=x[0],p=x[1],m=(0,a.useState)(!1),h=(0,r.Z)(m,2),j=h[0],v=h[1],g=(0,a.useMemo)((function(){var e;return null!==(e=o[f])&&void 0!==e?e:{uid:"",name:"All Notes",color:"#000000",notes:Object.keys(n)}}),[n,o,f]),Z=(0,a.useMemo)((function(){return(0,we.aV)(g.notes.map((function(e){return n[e]})).filter((function(e){return void 0!==e})))}),[g,n]),k=function(){(0,s.hY)().then(c),(0,s.Ys)().then(u),document.title="Multibility"};return(0,a.useEffect)(k,[]),(0,T.jsx)(Ge.Provider,{value:{currTagID:f,editing:j,allNotes:n,allTags:o,setAllNotes:c,setAllTags:u,setEditing:v,setCurrTagID:p,menuInit:k},children:(0,T.jsxs)("div",{className:"main-menu container",children:[(0,T.jsx)(F,{}),(0,T.jsx)(Be,{noteList:Z})]})})}}}]);
//# sourceMappingURL=442.c6999fbb.chunk.js.map