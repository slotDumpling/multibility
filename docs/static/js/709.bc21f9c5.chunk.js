"use strict";(self.webpackChunkmultibility=self.webpackChunkmultibility||[]).push([[709,226],{2862:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ge}});var r=n(15861),a=n(29439),s=n(87757),c=n.n(s),i=n(72791),o=n(75783),l=n(92198),u=n(30501),d=n(87309),x=n(88894),f=n(96324),p=n(1413),m=n(92414),h=n(82622),v=n(93309),j=n(57768),g=n(52365),Z=n(11956),k=n(81694),N=n.n(k),y=n(24610),b=n(80184),T=(0,i.createContext)(["",function(){}]),C=function(e){var t=e.children,n=(0,i.useState)("");return(0,b.jsx)(T.Provider,{value:n,children:t})},w=function(e){var t=e.children,n=e.onDelete,s=e.disable,o=void 0!==s&&s,l=e.className,u=(0,i.useState)(y.v4),d=(0,a.Z)(u,1)[0],x=(0,i.useContext)(T),f=(0,a.Z)(x,2),m=f[0],h=f[1],v=(0,i.useState)(!1),j=(0,a.Z)(v,2),k=j[0],C=j[1],w=k&&(!m||m===d),S=(0,i.useState)(!1),D=(0,a.Z)(S,2),I=D[0],E=D[1],A=(0,i.useState)(),F=(0,a.Z)(A,2),L=F[0],M=F[1],P=(0,i.useRef)(null);(0,i.useEffect)((function(){m!==d&&C(!1)}),[m,d]);var U=(0,Z.useSwipeable)({onSwipedLeft:function(){var e;C(!0),h(d),M(null===(e=P.current)||void 0===e?void 0:e.clientHeight)},onSwipedRight:function(){C(!1),h(""),M(void 0)},preventDefaultTouchmoveEvent:!0,trackTouch:!o});(0,i.useEffect)((function(){o&&(M(void 0),h(""),C(!1))}),[o,h]);var O=(0,g.mf)({propertyName:"height",active:I}),W=(0,a.Z)(O,2),z=W[0],B=W[1],R=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,z;case 3:n(),h("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)("div",(0,p.Z)((0,p.Z)({className:N()("swipe-wrapper",l),"data-deleted":I,"data-deleting":w},U),{},{style:{height:L},onTransitionEnd:B,children:[(0,b.jsx)("div",{className:"content",ref:P,children:t}),(0,b.jsx)("div",{className:"button",onClick:R,style:{height:L},children:"Delete"})]}))},S=n(86330),D=n(20662),I=n(96038),E=n(74115),A=n(80202),F=function(e){var t=e.tagName,n=e.setTagName,r=e.tagColor,a=e.setTagColor,s=(0,b.jsx)(S.Z,{value:r,onSelect:a,listHeight:150,virtual:!1,children:E.O9.map((function(e){return(0,b.jsx)(S.Z.Option,{value:e,children:(0,b.jsx)(A.W,{className:"tag-circle",color:e})},e)}))});return(0,b.jsx)(D.Z,{autoFocus:!0,placeholder:"Tag name...",className:"tag-name-input",addonBefore:s,value:t,onChange:function(e){return n(e.target.value)}})},L=function(e){var t=e.noteTag,n=t.uid,s=t.color,l=t.name,u=t.notes,x=(0,i.useContext)(Ke),f=x.editing,v=x.currTagID,j=x.setAllTags,g=x.setCurrTagID,Z=(0,i.useState)(l),k=(0,a.Z)(Z,2),N=k[0],y=k[1],T=(0,i.useState)(s),C=(0,a.Z)(T,2),S=C[0],D=C[1],L=(0,i.useState)(!1),M=(0,a.Z)(L,2),P=M[0],U=M[1];function O(){return W.apply(this,arguments)}function W(){return(W=(0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Pn)(n);case 2:t=e.sent,g("DEFAULT"),j(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,i.useEffect)((function(){return U(!1)}),[f]);var z=function(){var e=(0,r.Z)(c().mark((function e(){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.Z)((0,p.Z)({},t),{},{name:N,color:S}),e.next=3,(0,o.tk)(n);case 3:r=e.sent,j(r),U(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.W,{className:"tag-circle",color:S}),(0,b.jsx)("span",{className:"tag-name",children:N}),f||(0,b.jsx)("span",{className:"tag-num",children:u.length}),f&&(0,b.jsx)(d.Z,{size:"small",type:"text",onClick:function(){return U(!0)},icon:(0,b.jsx)(m.Z,{})})]}),R=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(F,{tagName:N,setTagName:y,tagColor:S,setTagColor:D}),(0,b.jsxs)("div",{className:"buttons",children:[(0,b.jsx)(I.Z,{title:"This tag will be deleted.",onConfirm:O,placement:"left",cancelText:"Cancel",icon:(0,b.jsx)(h.Z,{}),okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},children:(0,b.jsx)(d.Z,{danger:!0,children:"Delete"})}),(0,b.jsx)(d.Z,{onClick:function(){y(l),D(s),U(!1)},children:"Cancel"}),(0,b.jsx)(d.Z,{type:"primary",disabled:!N,onClick:z,children:"OK"})]})]});return(0,b.jsx)(w,{className:"tag-wrapper",onDelete:O,disable:f,children:(0,b.jsx)("div",{className:"tag-item","data-curr":v===n,"data-editing":P,onClick:function(){return g(n)},style:(0,E.MW)(s),children:P?R:B})})},M=function(e){var t=e.setAdding,n=(0,i.useState)(""),r=(0,a.Z)(n,2),s=r[0],c=r[1],l=(0,i.useState)((0,E.mr)()),u=(0,a.Z)(l,2),x=u[0],f=u[1],p=(0,i.useContext)(Ke).setAllTags;return(0,b.jsx)("div",{className:"tag-wrapper",children:(0,b.jsxs)("div",{className:"tag-item","data-curr":!0,"data-editing":!0,children:[(0,b.jsx)(F,{tagName:s,setTagName:c,tagColor:x,setTagColor:f}),(0,b.jsxs)("div",{className:"buttons",children:[(0,b.jsx)(d.Z,{onClick:function(){return t(!1)},children:"Cancel"}),(0,b.jsx)(d.Z,{type:"primary",disabled:!s,onClick:function(){var e=s.trim();e&&((0,o.HO)(e,x).then(p),t(!1))},children:"OK"})]})]})})},P=function(){var e=(0,i.useContext)(Ke),t=e.allTags,n=e.editing,r=e.currTagID,s=e.allNotes,c=e.setCurrTagID,o=e.setEditing,l=(0,i.useState)(!1),u=(0,a.Z)(l,2),x=u[0],f=u[1],p=(0,b.jsx)("div",{className:"tag-wrapper",children:(0,b.jsxs)("div",{className:"tag-item","data-curr":"DEFAULT"===r,onClick:function(){return c("DEFAULT")},children:[(0,b.jsx)(v.Z,{className:"all-note-icon"}),(0,b.jsx)("span",{className:"tag-name",children:"All Notes"}),(0,b.jsx)("span",{className:"tag-num",children:Object.keys(s).length})]})}),m=(0,b.jsx)(d.Z,{className:"edit-btn",shape:"round",type:n?"primary":"default",onClick:function(){return o((function(e){return!e}))},children:n?"Done":"Edit"});return(0,b.jsxs)("aside",{className:"side-menu",children:[(0,b.jsxs)("div",{className:"tag-list",children:[p,(0,b.jsx)(C,{children:Object.values(t).map((function(e){return(0,b.jsx)(L,{noteTag:e},e.uid)}))}),x&&(0,b.jsx)(M,{setAdding:f})]}),(0,b.jsxs)("footer",{children:[(0,b.jsx)(d.Z,{shape:"round",icon:(0,b.jsx)(j.Z,{}),onClick:function(){return f(!0)},disabled:x,children:"Add"}),m]})]})};function U(){var e=(0,i.useState)(!1),t=(0,a.Z)(e,2),n=t[0],r=t[1],s=(0,i.useContext)(Ke),c=s.editing,o=s.currTagID,l=s.setEditing;(0,i.useEffect)((function(){c||r(!1)}),[o]);var u=(0,b.jsx)(d.Z,{className:"edit-btn large",onClick:function(){return l((function(e){return!e}))},type:c?"primary":"text",children:c?"Done":"Edit"}),p=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{className:"aside-btn",type:"text",icon:(0,b.jsx)(f.Z,{}),onClick:function(){return r((function(e){return!e}))}}),(0,b.jsx)(x.Z,{className:"aside-drawer",width:300,placement:"left",closable:!1,visible:n,onClose:function(){return r(!1)},contentWrapperStyle:{boxShadow:"none"},bodyStyle:{padding:0,overflow:"hidden"},destroyOnClose:!0,children:(0,b.jsx)(P,{})})]});return(0,b.jsxs)("div",{className:"left-tools",children:[p,u]})}var O=n(45987),W=n(50419),z=n(28817),B=n(70140),R=n(69228),H=n(99372),K=n(66776),G=n(29529),_=n(14057),V=n(12056),Y=n(99660),J=n(61753),X=n(56200),q=n(82305),Q=n(69951),$=n(72058),ee=n(89295),te=n(51570),ne=n(16871),re=n(67415),ae=n(61842),se=n.n(ae),ce=["children","title","keyName"];function ie(){return(0,b.jsxs)("div",{className:"right-tools",children:[(0,b.jsx)(he,{}),(0,b.jsx)(me,{})]})}var oe=function(e){var t=e.children,n=e.title,r=e.keyName,s=(0,O.Z)(e,ce),c=(0,g.zI)(),i=(0,a.Z)(c,2),o=i[0],l=i[1];return(0,b.jsx)(ee.Z,(0,p.Z)((0,p.Z)({in:o===r},s),{},{children:(0,b.jsxs)("div",{className:"secondary",children:[(0,b.jsxs)("nav",{children:[(0,b.jsx)(d.Z,{type:"text",shape:"circle",onClick:function(){return l("MENU")},icon:(0,b.jsx)(H.Z,{})}),(0,b.jsx)("h3",{children:n})]}),t]})}))},le=function(){var e=(0,i.useState)(!1),t=(0,a.Z)(e,2),s=t[0],l=t[1],u=(0,i.useContext)(Ke),d=u.currTagID,x=u.setAllTags,f=u.setAllNotes,p=(0,i.useState)(0),m=(0,a.Z)(p,2),h=m[0],v=m[1];function j(){return(j=(0,r.Z)(c().mark((function e(t){var r,a,s,i,u,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/pdf"===t.type){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.next=5,Promise.all([n.e(643),n.e(701)]).then(n.bind(n,21176));case 5:return r=e.sent,a=r.LoadPDF,e.next=9,a(t,v);case 9:return(s=e.sent).tagID=d,e.next=13,(0,o.au)(s);case 13:return i=e.sent,u=i.tags,p=i.allNotes,x(u),f(p),l(!1),W.ZP.success("PDF Loaded"),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,b.jsxs)("label",{children:[(0,b.jsxs)("div",{className:"pdf-upload",children:[(0,b.jsx)("div",{className:"icon-wrapper",children:s?(0,b.jsx)(z.Z,{width:48,type:"circle",percent:h}):(0,b.jsx)(K.Z,{className:"inbox-icon"})}),(0,b.jsx)("p",{className:"hint",children:"Click to upload a pdf file."})]}),(0,b.jsx)("input",{type:"file",multiple:!1,accept:".pdf",onChange:function(e){var t=e.target.files,n=t&&t[0];n&&function(e){j.apply(this,arguments)}(n)}})]})},ue=function(){var e=(0,g.zI)(),t=(0,a.Z)(e,2)[1],n=(0,Q.vW)(),r=(0,i.useState)(n),s=(0,a.Z)(r,2),c=s[0],o=s[1];return(0,b.jsxs)("div",{className:"profile-page",children:[(0,b.jsx)(D.Z,{value:c,onChange:function(e){return o(e.target.value)},prefix:(0,b.jsx)(G.Z,{}),allowClear:!0}),(0,b.jsx)(d.Z,{disabled:n===c||!c,onClick:function(){c&&((0,Q.lu)(c),t("MENU"))},type:"primary",block:!0,children:"OK"})]})},de=function(){var e=(0,i.useContext)(Ke).menuInit,t=function(){var t=(0,r.Z)(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se().clear();case 2:return t.next=4,(0,$.eG)();case 4:e();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,b.jsxs)("div",{className:"setting-menu",children:[(0,b.jsx)(d.Z,{icon:(0,b.jsx)(_.Z,{}),onClick:(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.E();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),block:!0,children:"Update"}),(0,b.jsx)(I.Z,{title:"Everything will be deleted.",onConfirm:t,icon:(0,b.jsx)(V.Z,{}),okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},cancelText:"Cancel",placement:"bottom",children:(0,b.jsx)(d.Z,{icon:(0,b.jsx)(V.Z,{}),danger:!0,block:!0,children:"Clear all"})})]})},xe=[{key:"PDF",label:"Import PDF",component:(0,b.jsx)(le,{}),icon:(0,b.jsx)(Y.Z,{})},{key:"PROFILE",label:"My profile",component:(0,b.jsx)(ue,{}),icon:(0,b.jsx)(G.Z,{})},{key:"SETTINGS",label:"Settings",component:(0,b.jsx)(de,{}),icon:(0,b.jsx)(m.Z,{})}],fe=function(){var e=(0,g.zI)(),t=(0,a.Z)(e,2)[1];return(0,b.jsx)("div",{className:"primary-menu",children:(0,b.jsx)(B.Z,{onClick:function(e){var n=e.key;return t(n)},items:xe})})},pe=function(){var e=(0,i.useState)(0),t=(0,a.Z)(e,2),n=t[0],r=t[1],s=(0,g.zI)(),c=(0,a.Z)(s,2),o=c[0],l=c[1],u={timeout:300,onEnter:function(e){r(e.clientHeight)},unmountOnExit:!0};return(0,i.useEffect)((function(){return l("MENU")}),[l]),(0,b.jsxs)("section",{className:"others-menu",style:{height:n},children:[(0,b.jsx)(ee.Z,(0,p.Z)((0,p.Z)({in:"MENU"===o},u),{},{children:(0,b.jsx)(fe,{})})),xe.map((function(e){var t=e.key,n=e.label,r=e.component;return(0,b.jsx)(oe,(0,p.Z)((0,p.Z)({keyName:t,title:n},u),{},{children:r}),t)}))]})},me=function(){return(0,b.jsxs)(R.Z,{placement:"bottomRight",trigger:"click",content:(0,b.jsx)(g.s2,{initKey:"",children:(0,b.jsx)(pe,{})}),zIndex:900,children:[(0,b.jsx)(d.Z,{className:"large",shape:"circle",icon:(0,b.jsx)(J.Z,{})}),(0,b.jsx)(d.Z,{className:"small",type:"text",icon:(0,b.jsx)(J.Z,{})})]})},he=function(){var e=(0,i.useState)(""),t=(0,a.Z)(e,2),n=t[0],s=t[1],o=(0,i.useState)(!1),l=(0,a.Z)(o,2),u=l[0],x=l[1],f=(0,ne.s0)();function p(){return(p=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,te.fI)(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",f("/team/".concat(n)));case 5:s(""),x(!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,b.jsxs)(R.Z,{placement:"bottomRight",trigger:"click",title:"Join a team note",destroyTooltipOnHide:!0,onVisibleChange:function(){return x(!1)},content:(0,b.jsx)(re.GD,{plain:!0,length:4,error:u,value:n,onChange:function(e){x(!1),s(e)},onFill:function(e){return p.apply(this,arguments)}}),children:[(0,b.jsx)(d.Z,{className:"team-btn large",shape:"round",icon:(0,b.jsx)(X.Z,{}),children:"Team"}),(0,b.jsx)(d.Z,{className:"team-btn small",type:"text",icon:(0,b.jsx)(X.Z,{})})]})};function ve(){var e,t=(0,i.useContext)(Ke),n=t.currTagID,r=t.allTags,a="DEFAULT"===n;return(0,b.jsxs)("header",{children:[(0,b.jsx)(U,{}),(0,b.jsx)("h2",{"data-logo":a,children:a?"Multibility":null===(e=r[n])||void 0===e?void 0:e.name}),(0,b.jsx)(ie,{})]})}var je=n(4942),ge=n(37762),Ze=n(75660),ke=n(96989),Ne=n(37557),ye=n(82670),be=n(52972),Te=n(6593),Ce=n.n(Te),we=n(93433),Se=n(37382),De=n(68692),Ie=n(13876),Ee=n(20054),Ae=n(9486),Fe=n(1194),Le=n(53834),Me=n(11730),Pe=n(7974),Ue=function(e){var t=e.sortType,n=e.setSortType,r=e.searchText,a=e.setSearchText,s=e.onDelete,c=e.onMove,o=e.disabled,l=void 0===o||o,u=(0,i.useContext)(Ke),x=u.editing,f=u.allTags,m=u.setEditing,v=(0,b.jsx)(B.Z,{onClick:function(e){var t=e.key;return n(t)},selectedKeys:[t],items:[{type:"group",label:"Sort by",className:"sort-drop",children:[{icon:(0,b.jsx)(De.Z,{}),key:"CREATE",label:"Date created"},{icon:(0,b.jsx)(Ie.Z,{}),key:"LAST",label:"Date modified"},{icon:(0,b.jsx)(Ee.Z,{}),key:"NAME",label:"Name"}]}]}),j={type:"text",shape:"circle"},g=(0,b.jsx)(Se.Z,{overlay:v,trigger:["click"],placement:"bottom",children:(0,b.jsx)(d.Z,(0,p.Z)({className:"sort-btn",icon:(0,b.jsx)(Ae.Z,{rotate:90})},j))}),Z=(0,b.jsx)(I.Z,{title:"Notes will be deleted.",onConfirm:s,icon:(0,b.jsx)(h.Z,{}),placement:"bottom",cancelText:"Cancel",disabled:l,okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},children:(0,b.jsx)(d.Z,{className:"del-btn",shape:"round",type:"text",disabled:l,danger:!l,icon:(0,b.jsx)(h.Z,{}),children:"Delete"})}),k=function(e){var t=e.color,n=e.name;return(0,b.jsxs)("div",{className:"tag-select",children:[(0,b.jsx)(A.W,{color:t,className:"tag-circle"}),(0,b.jsx)("span",{className:"name",children:n})]})},N=(0,b.jsx)(B.Z,{onClick:function(e){var t=e.key;return c(t)},items:[{key:"DEFAULT",label:(0,b.jsx)(k,{color:"#eee",name:"No tag"})}].concat((0,we.Z)(Object.values(f).map((function(e){return{key:e.uid,label:(0,b.jsx)(k,{color:e.color,name:e.name})}}))))}),y=(0,b.jsx)(Se.Z,{overlayClassName:"tag-drop",disabled:l,overlay:N,trigger:["click"],placement:"bottom",children:(0,b.jsx)(d.Z,{shape:"round",type:"text",className:"tag-btn",icon:(0,b.jsx)(Fe.Z,{}),style:{transition:"none"},children:"Tag"})});return(0,b.jsx)("div",{className:"head-tools","data-editing":x,children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,(0,p.Z)({className:"small",onClick:function(){return m(!1)},icon:(0,b.jsx)(Le.Z,{})},j)),y,Z]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.Z,{value:r,onChange:function(e){return a(e.target.value)},className:"search-input",prefix:(0,b.jsx)(Me.Z,{}),bordered:!1,allowClear:!0}),g,(0,b.jsx)(d.Z,(0,p.Z)({className:"small",onClick:function(){return m(!0)},icon:(0,b.jsx)(Pe.Z,{})},j))]})})},Oe=n(24124),We=n(97892),ze=n.n(We),Be=n(79856);ze().extend(Ce());var Re=function(e){var t=e.noteList,n=(0,i.useContext)(Ke),s=n.editing,l=n.setAllTags,u=n.setAllNotes,d=(0,i.useState)("LAST"),x=(0,a.Z)(d,2),f=x[0],p=x[1],m=(0,i.useState)(""),h=(0,a.Z)(m,2),v=h[0],j=h[1],g=(0,i.useState)((0,Oe.l4)()),Z=(0,a.Z)(g,2),k=Z[0],y=Z[1],T=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r,a,s,i,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,ge.Z)(t),e.prev=1,a.s();case 3:if((s=a.n()).done){e.next=12;break}return i=s.value,e.next=7,(0,o.f_)(i);case 7:d=e.sent,n=d.tags,r=d.allNotes;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:n&&l(n),r&&u(r);case 22:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)(c().mark((function e(t,n){var r,a,s,i,d,x;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,ge.Z)(t),e.prev=1,s.s();case 3:if((i=s.n()).done){e.next=12;break}return d=i.value,e.next=7,(0,o.tw)(d,n);case 7:x=e.sent,r=x.tags,a=x.allNotes;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:r&&l(r),a&&u(a);case 22:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),D=(0,i.useMemo)((function(){var e=function(e,t){return t-e};switch(f){case"CREATE":return t.sortBy((function(e){return e.createTime}),e);case"LAST":return t.sortBy((function(e){return e.lastTime}),e);case"NAME":return t.sortBy((function(e){return e.name.toUpperCase()}));default:return t}}),[t,f]),I=(0,i.useMemo)((function(){return D.filter((function(e){return e.name.toUpperCase().includes(v.trim().toUpperCase())}))}),[v,D]);return(0,i.useEffect)((function(){j(""),y((0,Oe.l4)())}),[t,s]),(0,b.jsx)(C,{children:(0,b.jsxs)(Ze.Z,{className:"note-list",children:[(0,b.jsx)(Ue,{sortType:f,setSortType:p,searchText:v,setSearchText:j,onDelete:function(){return T(k.toArray())},onMove:function(e){return S(k.toArray(),e)},disabled:0===k.size}),I.map((function(e,t){var n,r=e.uid,a=k.has(r),c=null===(n=I.get(t+1))||void 0===n?void 0:n.uid,i=(c&&k.has(c))!==a;return(0,b.jsx)(ee.Z,{timeout:300,children:(0,b.jsx)(w,{className:N()("note-wrapper",{selected:a,last:i}),onDelete:function(){return T([r])},disable:s,children:(0,b.jsx)(He,{noteInfo:e,selected:a,setSelectNotes:y})})},r)}))]})})},He=function(e){var t,n=e.noteInfo,s=e.selected,l=e.setSelectNotes,u=n.team,d=n.uid,x=n.name,f=n.lastTime,m=n.tagID,h=(0,i.useMemo)((function(){return ze()(f).calendar()}),[f]),v="".concat(u?"team":"reader","/").concat(d),j=(0,i.useContext)(Ke),g=j.editing,Z=j.setAllNotes,k=(0,i.useState)(x),N=(0,a.Z)(k,2),y=N[0],T=N[1],C=(0,ne.s0)(),w=(0,i.useState)(),S=(0,a.Z)(w,2),I=S[0],A=S[1],F=(0,i.useMemo)((function(){if(I){var e=I.state,t=I.ratio;return ye.Dw.loadFromFlat(e,t)}}),[I]),L=(0,i.useState)(),M=(0,a.Z)(L,2),P=M[0],U=M[1];(0,i.useEffect)((function(){(0,r.Z)(c().mark((function e(){var t,n,r,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.U9)(d);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(n=t.pageRec,r=t.pageOrder,a=r[0]){e.next=9;break}return e.abrupt("return");case 9:return A(n[a]),e.next=12,(0,te.yf)(d);case 12:if(s=e.sent){e.next=15;break}return e.abrupt("return");case 15:U(Be.f.createFromTeamPages(s).getOnePageStateMap(a));case 16:case"end":return e.stop()}}),e)})))()}),[d]);var O=(0,i.useContext)(Ke),W=O.allTags,z=O.currTagID,B=W[m],R=(0,b.jsxs)("div",{className:"timg-wrapper","data-landscape":(null!==(t=null===I||void 0===I?void 0:I.ratio)&&void 0!==t?t:1.5)<1,children:[I&&F&&(0,b.jsx)(be.PageWrapper,{drawState:F,teamStateMap:P,thumbnail:I.image,preview:!0}),u&&(0,b.jsx)(ke.Z,{className:"cloud-icon"}),(0,b.jsx)(Ne.Z,{className:"checked-icon"})]});return(0,b.jsxs)("div",{className:"note-item","data-selected":s,onClick:function(){if(!g)return C(v);l((function(e){return e.has(d)?e.delete(d):e.add(d)}))},children:[R,(0,b.jsxs)("div",{className:"content",children:[g||(0,b.jsx)("p",{className:"name",children:x}),g&&(0,b.jsx)(D.Z,{className:"name-input",value:y,onChange:function(e){return T(e.target.value)},onClick:function(e){return e.stopPropagation()},onBlur:function(){var e=y.trim();if(!e||e===x)return T(x);(0,o.SP)(d,{name:e}),Z((function(t){return(0,p.Z)((0,p.Z)({},t),{},(0,je.Z)({},d,(0,p.Z)((0,p.Z)({},n),{},{name:e})))}))}}),(0,b.jsxs)("p",{className:"info",children:[(0,b.jsx)("span",{className:"date",children:h}),B&&"DEFAULT"===z&&(0,b.jsx)("span",{className:"tag",style:(0,E.MW)(B.color),children:B.name})]})]})]})},Ke=i.createContext({currTagID:"DEFAULT",editing:!1,allNotes:{},allTags:{},setAllNotes:function(){},setAllTags:function(){},setCurrTagID:function(){},setEditing:function(){},menuInit:function(){}});function Ge(){var e=(0,i.useState)({}),t=(0,a.Z)(e,2),n=t[0],r=t[1],s=(0,i.useState)({}),c=(0,a.Z)(s,2),l=c[0],u=c[1],d=(0,i.useState)("DEFAULT"),x=(0,a.Z)(d,2),f=x[0],p=x[1],m=(0,i.useState)(!1),h=(0,a.Z)(m,2),v=h[0],j=h[1],g=(0,i.useMemo)((function(){var e;return null!==(e=l[f])&&void 0!==e?e:{uid:"",name:"All Notes",color:"#000000",notes:Object.keys(n)}}),[n,l,f]),Z=(0,i.useMemo)((function(){return(0,Oe.aV)(g.notes.map((function(e){return n[e]})).filter((function(e){return void 0!==e})))}),[g,n]),k=function(){(0,o.hY)().then(r),(0,o.Ys)().then(u),document.title="Multibility"};return(0,i.useEffect)(k,[]),(0,b.jsx)(Ke.Provider,{value:{currTagID:f,editing:v,allNotes:n,allTags:l,setAllNotes:r,setAllTags:u,setEditing:j,setCurrTagID:p,menuInit:k},children:(0,b.jsxs)("div",{className:"main-menu container",children:[(0,b.jsx)(ve,{}),(0,b.jsxs)("main",{children:[(0,b.jsx)(P,{}),(0,b.jsx)(Re,{noteList:Z}),(0,b.jsx)(_e,{})]})]})})}var _e=function(){var e=(0,i.useContext)(Ke),t=e.currTagID,n=e.setAllTags,a=e.setAllNotes;function s(){return(s=(0,r.Z)(c().mark((function e(){var r,s,i,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=(0,l.Xn)()).tagID=t,e.next=4,(0,o.au)(r);case 4:s=e.sent,i=s.tags,u=s.allNotes,n(i),a(u);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,b.jsx)(d.Z,{className:"new-note",size:"large",type:"primary",shape:"circle",onClick:function(){return s.apply(this,arguments)},icon:(0,b.jsx)(u.Z,{})})}},72058:function(e,t,n){n.d(t,{eG:function(){return f},mp:function(){return u},pW:function(){return d}});var r=n(37762),a=n(93433),s=n(15861),c=n(87757),i=n.n(c),o=n(61842),l=n.n(o)().createInstance({name:"imageForage"}),u=function(){var e=(0,s.Z)(i().mark((function e(t,n){var r,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getItem("LIST");case 2:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==r;case 6:if(!e.t0){e.next=10;break}e.t2=r,e.next=11;break;case 10:e.t2=[];case 11:if(s=e.t2,c="".concat(t,"_").concat(n),s.includes(c)){e.next=15;break}return e.abrupt("return");case 15:return s=[c].concat((0,a.Z)(s.filter((function(e){return e!==c})))),e.next=18,l.setItem("LIST",s);case 18:return e.next=20,l.getItem(c);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,s.Z)(i().mark((function e(t,n,r){var s,c,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getItem("LIST");case 2:if(e.t1=s=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==s;case 6:if(!e.t0){e.next=10;break}e.t2=s,e.next=11;break;case 10:e.t2=[];case 11:return c=e.t2,o="".concat(t,"_").concat(n),(c=[o].concat((0,a.Z)(c.filter((function(e){return e!==o}))))).length>10&&(c=c.slice(0,10)),e.next=17,l.setItem("LIST",c);case 17:return e.next=19,l.setItem(o,r);case 19:x();case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),x=function(){var e=(0,s.Z)(i().mark((function e(){var t,n,a,s,c,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getItem("LIST");case 2:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==t;case 6:if(!e.t0){e.next=10;break}e.t2=t,e.next=11;break;case 10:e.t2=[];case 11:return n=e.t2,a=new Set(n),e.next=15,l.keys();case 15:s=e.sent,c=(0,r.Z)(s),e.prev=17,c.s();case 19:if((o=c.n()).done){e.next=28;break}if("LIST"!==(u=o.value)){e.next=23;break}return e.abrupt("continue",26);case 23:if(a.has(u)){e.next=26;break}return e.next=26,l.removeItem(u);case 26:e.next=19;break;case 28:e.next=33;break;case 30:e.prev=30,e.t3=e.catch(17),c.e(e.t3);case 33:return e.prev=33,c.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[17,30,33,36]])})));return function(){return e.apply(this,arguments)}}(),f=function(){return l.clear()}}}]);
//# sourceMappingURL=709.bc21f9c5.chunk.js.map