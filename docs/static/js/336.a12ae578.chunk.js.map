{"version":3,"file":"static/js/336.a12ae578.chunk.js","mappings":"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","sources":["../node_modules/darkreader/darkreader.js"],"sourcesContent":["/**\r\n * Dark Reader v4.9.58\r\n * https://darkreader.org/\r\n */\r\n\r\n(function (global, factory) {\r\n    typeof exports === \"object\" && typeof module !== \"undefined\"\r\n        ? factory(exports)\r\n        : typeof define === \"function\" && define.amd\r\n        ? define([\"exports\"], factory)\r\n        : ((global =\r\n              typeof globalThis !== \"undefined\" ? globalThis : global || self),\r\n          factory((global.DarkReader = {})));\r\n})(this, function (exports) {\r\n    \"use strict\";\r\n\r\n    /******************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n\r\n    var __assign = function () {\r\n        __assign =\r\n            Object.assign ||\r\n            function __assign(t) {\r\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                    s = arguments[i];\r\n                    for (var p in s)\r\n                        if (Object.prototype.hasOwnProperty.call(s, p))\r\n                            t[p] = s[p];\r\n                }\r\n                return t;\r\n            };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        function adopt(value) {\r\n            return value instanceof P\r\n                ? value\r\n                : new P(function (resolve) {\r\n                      resolve(value);\r\n                  });\r\n        }\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) {\r\n                try {\r\n                    step(generator.next(value));\r\n                } catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            function rejected(value) {\r\n                try {\r\n                    step(generator[\"throw\"](value));\r\n                } catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            function step(result) {\r\n                result.done\r\n                    ? resolve(result.value)\r\n                    : adopt(result.value).then(fulfilled, rejected);\r\n            }\r\n            step(\r\n                (generator = generator.apply(thisArg, _arguments || [])).next()\r\n            );\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = {\r\n                label: 0,\r\n                sent: function () {\r\n                    if (t[0] & 1) throw t[1];\r\n                    return t[1];\r\n                },\r\n                trys: [],\r\n                ops: []\r\n            },\r\n            f,\r\n            y,\r\n            t,\r\n            g;\r\n        return (\r\n            (g = {next: verb(0), throw: verb(1), return: verb(2)}),\r\n            typeof Symbol === \"function\" &&\r\n                (g[Symbol.iterator] = function () {\r\n                    return this;\r\n                }),\r\n            g\r\n        );\r\n        function verb(n) {\r\n            return function (v) {\r\n                return step([n, v]);\r\n            };\r\n        }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_)\r\n                try {\r\n                    if (\r\n                        ((f = 1),\r\n                        y &&\r\n                            (t =\r\n                                op[0] & 2\r\n                                    ? y[\"return\"]\r\n                                    : op[0]\r\n                                    ? y[\"throw\"] ||\r\n                                      ((t = y[\"return\"]) && t.call(y), 0)\r\n                                    : y.next) &&\r\n                            !(t = t.call(y, op[1])).done)\r\n                    )\r\n                        return t;\r\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\r\n                    switch (op[0]) {\r\n                        case 0:\r\n                        case 1:\r\n                            t = op;\r\n                            break;\r\n                        case 4:\r\n                            _.label++;\r\n                            return {value: op[1], done: false};\r\n                        case 5:\r\n                            _.label++;\r\n                            y = op[1];\r\n                            op = [0];\r\n                            continue;\r\n                        case 7:\r\n                            op = _.ops.pop();\r\n                            _.trys.pop();\r\n                            continue;\r\n                        default:\r\n                            if (\r\n                                !((t = _.trys),\r\n                                (t = t.length > 0 && t[t.length - 1])) &&\r\n                                (op[0] === 6 || op[0] === 2)\r\n                            ) {\r\n                                _ = 0;\r\n                                continue;\r\n                            }\r\n                            if (\r\n                                op[0] === 3 &&\r\n                                (!t || (op[1] > t[0] && op[1] < t[3]))\r\n                            ) {\r\n                                _.label = op[1];\r\n                                break;\r\n                            }\r\n                            if (op[0] === 6 && _.label < t[1]) {\r\n                                _.label = t[1];\r\n                                t = op;\r\n                                break;\r\n                            }\r\n                            if (t && _.label < t[2]) {\r\n                                _.label = t[2];\r\n                                _.ops.push(op);\r\n                                break;\r\n                            }\r\n                            if (t[2]) _.ops.pop();\r\n                            _.trys.pop();\r\n                            continue;\r\n                    }\r\n                    op = body.call(thisArg, _);\r\n                } catch (e) {\r\n                    op = [6, e];\r\n                    y = 0;\r\n                } finally {\r\n                    f = t = 0;\r\n                }\r\n            if (op[0] & 5) throw op[1];\r\n            return {value: op[0] ? op[1] : void 0, done: true};\r\n        }\r\n    }\r\n\r\n    function __values(o) {\r\n        var s = typeof Symbol === \"function\" && Symbol.iterator,\r\n            m = s && o[s],\r\n            i = 0;\r\n        if (m) return m.call(o);\r\n        if (o && typeof o.length === \"number\")\r\n            return {\r\n                next: function () {\r\n                    if (o && i >= o.length) o = void 0;\r\n                    return {value: o && o[i++], done: !o};\r\n                }\r\n            };\r\n        throw new TypeError(\r\n            s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\"\r\n        );\r\n    }\r\n\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o),\r\n            r,\r\n            ar = [],\r\n            e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)\r\n                ar.push(r.value);\r\n        } catch (error) {\r\n            e = {error: error};\r\n        } finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            } finally {\r\n                if (e) throw e.error;\r\n            }\r\n        }\r\n        return ar;\r\n    }\r\n\r\n    function __spreadArray(to, from, pack) {\r\n        if (pack || arguments.length === 2)\r\n            for (var i = 0, l = from.length, ar; i < l; i++) {\r\n                if (ar || !(i in from)) {\r\n                    if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n                    ar[i] = from[i];\r\n                }\r\n            }\r\n        return to.concat(ar || Array.prototype.slice.call(from));\r\n    }\r\n\r\n    var MessageType;\r\n    (function (MessageType) {\r\n        MessageType[\"UI_GET_DATA\"] = \"ui-get-data\";\r\n        MessageType[\"UI_SUBSCRIBE_TO_CHANGES\"] = \"ui-subscribe-to-changes\";\r\n        MessageType[\"UI_UNSUBSCRIBE_FROM_CHANGES\"] =\r\n            \"ui-unsubscribe-from-changes\";\r\n        MessageType[\"UI_CHANGE_SETTINGS\"] = \"ui-change-settings\";\r\n        MessageType[\"UI_SET_THEME\"] = \"ui-set-theme\";\r\n        MessageType[\"UI_SET_SHORTCUT\"] = \"ui-set-shortcut\";\r\n        MessageType[\"UI_TOGGLE_ACTIVE_TAB\"] = \"ui-toggle-active-tab\";\r\n        MessageType[\"UI_MARK_NEWS_AS_READ\"] = \"ui-mark-news-as-read\";\r\n        MessageType[\"UI_MARK_NEWS_AS_DISPLAYED\"] = \"ui-mark-news-as-displayed\";\r\n        MessageType[\"UI_LOAD_CONFIG\"] = \"ui-load-config\";\r\n        MessageType[\"UI_APPLY_DEV_DYNAMIC_THEME_FIXES\"] =\r\n            \"ui-apply-dev-dynamic-theme-fixes\";\r\n        MessageType[\"UI_RESET_DEV_DYNAMIC_THEME_FIXES\"] =\r\n            \"ui-reset-dev-dynamic-theme-fixes\";\r\n        MessageType[\"UI_APPLY_DEV_INVERSION_FIXES\"] =\r\n            \"ui-apply-dev-inversion-fixes\";\r\n        MessageType[\"UI_RESET_DEV_INVERSION_FIXES\"] =\r\n            \"ui-reset-dev-inversion-fixes\";\r\n        MessageType[\"UI_APPLY_DEV_STATIC_THEMES\"] =\r\n            \"ui-apply-dev-static-themes\";\r\n        MessageType[\"UI_RESET_DEV_STATIC_THEMES\"] =\r\n            \"ui-reset-dev-static-themes\";\r\n        MessageType[\"UI_SAVE_FILE\"] = \"ui-save-file\";\r\n        MessageType[\"UI_REQUEST_EXPORT_CSS\"] = \"ui-request-export-css\";\r\n        MessageType[\"UI_COLOR_SCHEME_CHANGE\"] = \"ui-color-scheme-change\";\r\n        MessageType[\"BG_CHANGES\"] = \"bg-changes\";\r\n        MessageType[\"BG_ADD_CSS_FILTER\"] = \"bg-add-css-filter\";\r\n        MessageType[\"BG_ADD_STATIC_THEME\"] = \"bg-add-static-theme\";\r\n        MessageType[\"BG_ADD_SVG_FILTER\"] = \"bg-add-svg-filter\";\r\n        MessageType[\"BG_ADD_DYNAMIC_THEME\"] = \"bg-add-dynamic-theme\";\r\n        MessageType[\"BG_EXPORT_CSS\"] = \"bg-export-css\";\r\n        MessageType[\"BG_UNSUPPORTED_SENDER\"] = \"bg-unsupported-sender\";\r\n        MessageType[\"BG_CLEAN_UP\"] = \"bg-clean-up\";\r\n        MessageType[\"BG_RELOAD\"] = \"bg-reload\";\r\n        MessageType[\"BG_FETCH_RESPONSE\"] = \"bg-fetch-response\";\r\n        MessageType[\"BG_UI_UPDATE\"] = \"bg-ui-update\";\r\n        MessageType[\"BG_CSS_UPDATE\"] = \"bg-css-update\";\r\n        MessageType[\"CS_COLOR_SCHEME_CHANGE\"] = \"cs-color-scheme-change\";\r\n        MessageType[\"CS_FRAME_CONNECT\"] = \"cs-frame-connect\";\r\n        MessageType[\"CS_FRAME_FORGET\"] = \"cs-frame-forget\";\r\n        MessageType[\"CS_FRAME_FREEZE\"] = \"cs-frame-freeze\";\r\n        MessageType[\"CS_FRAME_RESUME\"] = \"cs-frame-resume\";\r\n        MessageType[\"CS_EXPORT_CSS_RESPONSE\"] = \"cs-export-css-response\";\r\n        MessageType[\"CS_FETCH\"] = \"cs-fetch\";\r\n        MessageType[\"CS_DARK_THEME_DETECTED\"] = \"cs-dark-theme-detected\";\r\n        MessageType[\"CS_DARK_THEME_NOT_DETECTED\"] =\r\n            \"cs-dark-theme-not-detected\";\r\n        MessageType[\"CS_LOG\"] = \"cs-log\";\r\n    })(MessageType || (MessageType = {}));\r\n\r\n    var isNavigatorDefined = typeof navigator !== \"undefined\";\r\n    var userAgent = isNavigatorDefined\r\n        ? navigator.userAgentData &&\r\n          Array.isArray(navigator.userAgentData.brands)\r\n            ? navigator.userAgentData.brands\r\n                  .map(function (brand) {\r\n                      return \"\"\r\n                          .concat(brand.brand.toLowerCase(), \" \")\r\n                          .concat(brand.version);\r\n                  })\r\n                  .join(\" \")\r\n            : navigator.userAgent.toLowerCase()\r\n        : \"some useragent\";\r\n    var platform = isNavigatorDefined\r\n        ? navigator.userAgentData &&\r\n          typeof navigator.userAgentData.platform === \"string\"\r\n            ? navigator.userAgentData.platform.toLowerCase()\r\n            : navigator.platform.toLowerCase()\r\n        : \"some platform\";\r\n    var isChromium =\r\n        userAgent.includes(\"chrome\") || userAgent.includes(\"chromium\");\r\n    var isThunderbird = userAgent.includes(\"thunderbird\");\r\n    var isFirefox =\r\n        userAgent.includes(\"firefox\") ||\r\n        userAgent.includes(\"librewolf\") ||\r\n        isThunderbird;\r\n    userAgent.includes(\"vivaldi\");\r\n    userAgent.includes(\"yabrowser\");\r\n    userAgent.includes(\"opr\") || userAgent.includes(\"opera\");\r\n    userAgent.includes(\"edg\");\r\n    var isSafari = userAgent.includes(\"safari\") && !isChromium;\r\n    var isWindows = platform.startsWith(\"win\");\r\n    var isMacOS = platform.startsWith(\"mac\");\r\n    isNavigatorDefined && navigator.userAgentData\r\n        ? navigator.userAgentData.mobile\r\n        : userAgent.includes(\"mobile\");\r\n    var isShadowDomSupported = typeof ShadowRoot === \"function\";\r\n    var isMatchMediaChangeEventListenerSupported =\r\n        typeof MediaQueryList === \"function\" &&\r\n        typeof MediaQueryList.prototype.addEventListener === \"function\";\r\n    (function () {\r\n        var m = userAgent.match(/chrom(?:e|ium)(?:\\/| )([^ ]+)/);\r\n        if (m && m[1]) {\r\n            return m[1];\r\n        }\r\n        return \"\";\r\n    })();\r\n    (function () {\r\n        var m = userAgent.match(/(?:firefox|librewolf)(?:\\/| )([^ ]+)/);\r\n        if (m && m[1]) {\r\n            return m[1];\r\n        }\r\n        return \"\";\r\n    })();\r\n    var isDefinedSelectorSupported = (function () {\r\n        try {\r\n            document.querySelector(\":defined\");\r\n            return true;\r\n        } catch (err) {\r\n            return false;\r\n        }\r\n    })();\r\n    var isCSSColorSchemePropSupported = (function () {\r\n        if (typeof document === \"undefined\") {\r\n            return false;\r\n        }\r\n        var el = document.createElement(\"div\");\r\n        el.setAttribute(\"style\", \"color-scheme: dark\");\r\n        return el.style && el.style.colorScheme === \"dark\";\r\n    })();\r\n\r\n    function getOKResponse(url, mimeType, origin) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        return [\r\n                            4,\r\n                            fetch(url, {\r\n                                cache: \"force-cache\",\r\n                                credentials: \"omit\",\r\n                                referrer: origin\r\n                            })\r\n                        ];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        if (\r\n                            isFirefox &&\r\n                            mimeType === \"text/css\" &&\r\n                            url.startsWith(\"moz-extension://\") &&\r\n                            url.endsWith(\".css\")\r\n                        ) {\r\n                            return [2, response];\r\n                        }\r\n                        if (\r\n                            mimeType &&\r\n                            !response.headers\r\n                                .get(\"Content-Type\")\r\n                                .startsWith(mimeType)\r\n                        ) {\r\n                            throw new Error(\r\n                                \"Mime type mismatch when loading \".concat(url)\r\n                            );\r\n                        }\r\n                        if (!response.ok) {\r\n                            throw new Error(\r\n                                \"Unable to load \"\r\n                                    .concat(url, \" \")\r\n                                    .concat(response.status, \" \")\r\n                                    .concat(response.statusText)\r\n                            );\r\n                        }\r\n                        return [2, response];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function loadAsDataURL(url, mimeType) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        return [4, getOKResponse(url, mimeType)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        return [4, readResponseAsDataURL(response)];\r\n                    case 2:\r\n                        return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function readResponseAsDataURL(response) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var blob, dataURL;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        return [4, response.blob()];\r\n                    case 1:\r\n                        blob = _a.sent();\r\n                        return [\r\n                            4,\r\n                            new Promise(function (resolve) {\r\n                                var reader = new FileReader();\r\n                                reader.onloadend = function () {\r\n                                    return resolve(reader.result);\r\n                                };\r\n                                reader.readAsDataURL(blob);\r\n                            })\r\n                        ];\r\n                    case 2:\r\n                        dataURL = _a.sent();\r\n                        return [2, dataURL];\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    var throwCORSError = function (url) {\r\n        return __awaiter(void 0, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [\r\n                    2,\r\n                    Promise.reject(\r\n                        new Error(\r\n                            [\r\n                                \"Embedded Dark Reader cannot access a cross-origin resource\",\r\n                                url,\r\n                                \"Overview your URLs and CORS policies or use\",\r\n                                \"`DarkReader.setFetchMethod(fetch: (url) => Promise<Response>))`.\",\r\n                                \"See if using `DarkReader.setFetchMethod(window.fetch)`\",\r\n                                \"before `DarkReader.enable()` works.\"\r\n                            ].join(\" \")\r\n                        )\r\n                    )\r\n                ];\r\n            });\r\n        });\r\n    };\r\n    var fetcher = throwCORSError;\r\n    function setFetchMethod$1(fetch) {\r\n        if (fetch) {\r\n            fetcher = fetch;\r\n        } else {\r\n            fetcher = throwCORSError;\r\n        }\r\n    }\r\n    function callFetchMethod(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        return [4, fetcher(url)];\r\n                    case 1:\r\n                        return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    if (!window.chrome) {\r\n        window.chrome = {};\r\n    }\r\n    if (!chrome.runtime) {\r\n        chrome.runtime = {};\r\n    }\r\n    var messageListeners = new Set();\r\n    function sendMessage() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var id_1, _a, url, responseType, response, text_1, error_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!(args[0] && args[0].type === MessageType.CS_FETCH))\r\n                            return [3, 8];\r\n                        id_1 = args[0].id;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 7, , 8]);\r\n                        (_a = args[0].data),\r\n                            (url = _a.url),\r\n                            (responseType = _a.responseType);\r\n                        return [4, callFetchMethod(url)];\r\n                    case 2:\r\n                        response = _b.sent();\r\n                        if (!(responseType === \"data-url\")) return [3, 4];\r\n                        return [4, readResponseAsDataURL(response)];\r\n                    case 3:\r\n                        text_1 = _b.sent();\r\n                        return [3, 6];\r\n                    case 4:\r\n                        return [4, response.text()];\r\n                    case 5:\r\n                        text_1 = _b.sent();\r\n                        _b.label = 6;\r\n                    case 6:\r\n                        messageListeners.forEach(function (cb) {\r\n                            return cb({\r\n                                type: MessageType.BG_FETCH_RESPONSE,\r\n                                data: text_1,\r\n                                error: null,\r\n                                id: id_1\r\n                            });\r\n                        });\r\n                        return [3, 8];\r\n                    case 7:\r\n                        error_1 = _b.sent();\r\n                        console.error(error_1);\r\n                        messageListeners.forEach(function (cb) {\r\n                            return cb({\r\n                                type: MessageType.BG_FETCH_RESPONSE,\r\n                                data: null,\r\n                                error: error_1,\r\n                                id: id_1\r\n                            });\r\n                        });\r\n                        return [3, 8];\r\n                    case 8:\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function addMessageListener(callback) {\r\n        messageListeners.add(callback);\r\n    }\r\n    if (typeof chrome.runtime.sendMessage === \"function\") {\r\n        var nativeSendMessage_1 = chrome.runtime.sendMessage;\r\n        chrome.runtime.sendMessage = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            sendMessage.apply(void 0, __spreadArray([], __read(args), false));\r\n            nativeSendMessage_1.apply(chrome.runtime, args);\r\n        };\r\n    } else {\r\n        chrome.runtime.sendMessage = sendMessage;\r\n    }\r\n    if (!chrome.runtime.onMessage) {\r\n        chrome.runtime.onMessage = {};\r\n    }\r\n    if (typeof chrome.runtime.onMessage.addListener === \"function\") {\r\n        var nativeAddListener_1 = chrome.runtime.onMessage.addListener;\r\n        chrome.runtime.onMessage.addListener = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            addMessageListener(args[0]);\r\n            nativeAddListener_1.apply(chrome.runtime.onMessage, args);\r\n        };\r\n    } else {\r\n        chrome.runtime.onMessage.addListener = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return addMessageListener(args[0]);\r\n        };\r\n    }\r\n\r\n    var ThemeEngine;\r\n    (function (ThemeEngine) {\r\n        ThemeEngine[\"cssFilter\"] = \"cssFilter\";\r\n        ThemeEngine[\"svgFilter\"] = \"svgFilter\";\r\n        ThemeEngine[\"staticTheme\"] = \"staticTheme\";\r\n        ThemeEngine[\"dynamicTheme\"] = \"dynamicTheme\";\r\n    })(ThemeEngine || (ThemeEngine = {}));\r\n\r\n    var AutomationMode;\r\n    (function (AutomationMode) {\r\n        AutomationMode[\"NONE\"] = \"\";\r\n        AutomationMode[\"TIME\"] = \"time\";\r\n        AutomationMode[\"SYSTEM\"] = \"system\";\r\n        AutomationMode[\"LOCATION\"] = \"location\";\r\n    })(AutomationMode || (AutomationMode = {}));\r\n\r\n    var DEFAULT_COLORS = {\r\n        darkScheme: {\r\n            background: \"#181a1b\",\r\n            text: \"#e8e6e3\"\r\n        },\r\n        lightScheme: {\r\n            background: \"#dcdad7\",\r\n            text: \"#181a1b\"\r\n        }\r\n    };\r\n    var DEFAULT_THEME = {\r\n        mode: 1,\r\n        brightness: 100,\r\n        contrast: 100,\r\n        grayscale: 0,\r\n        sepia: 0,\r\n        useFont: false,\r\n        fontFamily: isMacOS\r\n            ? \"Helvetica Neue\"\r\n            : isWindows\r\n            ? \"Segoe UI\"\r\n            : \"Open Sans\",\r\n        textStroke: 0,\r\n        engine: ThemeEngine.dynamicTheme,\r\n        stylesheet: \"\",\r\n        darkSchemeBackgroundColor: DEFAULT_COLORS.darkScheme.background,\r\n        darkSchemeTextColor: DEFAULT_COLORS.darkScheme.text,\r\n        lightSchemeBackgroundColor: DEFAULT_COLORS.lightScheme.background,\r\n        lightSchemeTextColor: DEFAULT_COLORS.lightScheme.text,\r\n        scrollbarColor: isMacOS ? \"\" : \"auto\",\r\n        selectionColor: \"auto\",\r\n        styleSystemControls: !isCSSColorSchemePropSupported,\r\n        lightColorScheme: \"Default\",\r\n        darkColorScheme: \"Default\",\r\n        immediateModify: false\r\n    };\r\n    ({\r\n        enabled: true,\r\n        fetchNews: true,\r\n        theme: DEFAULT_THEME,\r\n        presets: [],\r\n        customThemes: [],\r\n        siteList: [],\r\n        siteListEnabled: [],\r\n        applyToListedOnly: false,\r\n        changeBrowserTheme: false,\r\n        syncSettings: true,\r\n        syncSitesFixes: false,\r\n        automation: {\r\n            enabled: false,\r\n            mode: AutomationMode.NONE,\r\n            behavior: \"OnOff\"\r\n        },\r\n        time: {\r\n            activation: \"18:00\",\r\n            deactivation: \"9:00\"\r\n        },\r\n        location: {\r\n            latitude: null,\r\n            longitude: null\r\n        },\r\n        previewNewDesign: false,\r\n        enableForPDF: true,\r\n        enableForProtectedPages: false,\r\n        enableContextMenus: false,\r\n        detectDarkTheme: false\r\n    });\r\n\r\n    function isArrayLike(items) {\r\n        return items.length != null;\r\n    }\r\n    function forEach(items, iterator) {\r\n        var e_1, _a;\r\n        if (isArrayLike(items)) {\r\n            for (var i = 0, len = items.length; i < len; i++) {\r\n                iterator(items[i]);\r\n            }\r\n        } else {\r\n            try {\r\n                for (\r\n                    var items_1 = __values(items), items_1_1 = items_1.next();\r\n                    !items_1_1.done;\r\n                    items_1_1 = items_1.next()\r\n                ) {\r\n                    var item = items_1_1.value;\r\n                    iterator(item);\r\n                }\r\n            } catch (e_1_1) {\r\n                e_1 = {error: e_1_1};\r\n            } finally {\r\n                try {\r\n                    if (items_1_1 && !items_1_1.done && (_a = items_1.return))\r\n                        _a.call(items_1);\r\n                } finally {\r\n                    if (e_1) throw e_1.error;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function push(array, addition) {\r\n        forEach(addition, function (a) {\r\n            return array.push(a);\r\n        });\r\n    }\r\n    function toArray(items) {\r\n        var results = [];\r\n        for (var i = 0, len = items.length; i < len; i++) {\r\n            results.push(items[i]);\r\n        }\r\n        return results;\r\n    }\r\n\r\n    function logInfo() {}\r\n    function logWarn() {}\r\n\r\n    function throttle(callback) {\r\n        var pending = false;\r\n        var frameId = null;\r\n        var lastArgs;\r\n        var throttled = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            lastArgs = args;\r\n            if (frameId) {\r\n                pending = true;\r\n            } else {\r\n                callback.apply(\r\n                    void 0,\r\n                    __spreadArray([], __read(lastArgs), false)\r\n                );\r\n                frameId = requestAnimationFrame(function () {\r\n                    frameId = null;\r\n                    if (pending) {\r\n                        callback.apply(\r\n                            void 0,\r\n                            __spreadArray([], __read(lastArgs), false)\r\n                        );\r\n                        pending = false;\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        var cancel = function () {\r\n            cancelAnimationFrame(frameId);\r\n            pending = false;\r\n            frameId = null;\r\n        };\r\n        return Object.assign(throttled, {cancel: cancel});\r\n    }\r\n    function createAsyncTasksQueue() {\r\n        var tasks = [];\r\n        var frameId = null;\r\n        function runTasks() {\r\n            var task;\r\n            while ((task = tasks.shift())) {\r\n                task();\r\n            }\r\n            frameId = null;\r\n        }\r\n        function add(task) {\r\n            tasks.push(task);\r\n            if (!frameId) {\r\n                frameId = requestAnimationFrame(runTasks);\r\n            }\r\n        }\r\n        function cancel() {\r\n            tasks.splice(0);\r\n            cancelAnimationFrame(frameId);\r\n            frameId = null;\r\n        }\r\n        return {add: add, cancel: cancel};\r\n    }\r\n\r\n    function getDuration(time) {\r\n        var duration = 0;\r\n        if (time.seconds) {\r\n            duration += time.seconds * 1000;\r\n        }\r\n        if (time.minutes) {\r\n            duration += time.minutes * 60 * 1000;\r\n        }\r\n        if (time.hours) {\r\n            duration += time.hours * 60 * 60 * 1000;\r\n        }\r\n        if (time.days) {\r\n            duration += time.days * 24 * 60 * 60 * 1000;\r\n        }\r\n        return duration;\r\n    }\r\n\r\n    function removeNode(node) {\r\n        node && node.parentNode && node.parentNode.removeChild(node);\r\n    }\r\n    function watchForNodePosition(node, mode, onRestore) {\r\n        if (onRestore === void 0) {\r\n            onRestore = Function.prototype;\r\n        }\r\n        var MAX_ATTEMPTS_COUNT = 10;\r\n        var RETRY_TIMEOUT = getDuration({seconds: 2});\r\n        var ATTEMPTS_INTERVAL = getDuration({seconds: 10});\r\n        var prevSibling = node.previousSibling;\r\n        var parent = node.parentNode;\r\n        if (!parent) {\r\n            throw new Error(\r\n                \"Unable to watch for node position: parent element not found\"\r\n            );\r\n        }\r\n        if (mode === \"prev-sibling\" && !prevSibling) {\r\n            throw new Error(\r\n                \"Unable to watch for node position: there is no previous sibling\"\r\n            );\r\n        }\r\n        var attempts = 0;\r\n        var start = null;\r\n        var timeoutId = null;\r\n        var restore = throttle(function () {\r\n            if (timeoutId) {\r\n                return;\r\n            }\r\n            attempts++;\r\n            var now = Date.now();\r\n            if (start == null) {\r\n                start = now;\r\n            } else if (attempts >= MAX_ATTEMPTS_COUNT) {\r\n                if (now - start < ATTEMPTS_INTERVAL) {\r\n                    timeoutId = setTimeout(function () {\r\n                        start = null;\r\n                        attempts = 0;\r\n                        timeoutId = null;\r\n                        restore();\r\n                    }, RETRY_TIMEOUT);\r\n                    return;\r\n                }\r\n                start = now;\r\n                attempts = 1;\r\n            }\r\n            if (mode === \"parent\") {\r\n                if (prevSibling && prevSibling.parentNode !== parent) {\r\n                    stop();\r\n                    return;\r\n                }\r\n            }\r\n            if (mode === \"prev-sibling\") {\r\n                if (prevSibling.parentNode == null) {\r\n                    stop();\r\n                    return;\r\n                }\r\n                if (prevSibling.parentNode !== parent) {\r\n                    updateParent(prevSibling.parentNode);\r\n                }\r\n            }\r\n            parent.insertBefore(\r\n                node,\r\n                prevSibling ? prevSibling.nextSibling : parent.firstChild\r\n            );\r\n            observer.takeRecords();\r\n            onRestore && onRestore();\r\n        });\r\n        var observer = new MutationObserver(function () {\r\n            if (\r\n                (mode === \"parent\" && node.parentNode !== parent) ||\r\n                (mode === \"prev-sibling\" &&\r\n                    node.previousSibling !== prevSibling)\r\n            ) {\r\n                restore();\r\n            }\r\n        });\r\n        var run = function () {\r\n            observer.observe(parent, {childList: true});\r\n        };\r\n        var stop = function () {\r\n            clearTimeout(timeoutId);\r\n            observer.disconnect();\r\n            restore.cancel();\r\n        };\r\n        var skip = function () {\r\n            observer.takeRecords();\r\n        };\r\n        var updateParent = function (parentNode) {\r\n            parent = parentNode;\r\n            stop();\r\n            run();\r\n        };\r\n        run();\r\n        return {run: run, stop: stop, skip: skip};\r\n    }\r\n    function iterateShadowHosts(root, iterator) {\r\n        if (root == null) {\r\n            return;\r\n        }\r\n        var walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\r\n            acceptNode: function (node) {\r\n                return node.shadowRoot == null\r\n                    ? NodeFilter.FILTER_SKIP\r\n                    : NodeFilter.FILTER_ACCEPT;\r\n            }\r\n        });\r\n        for (\r\n            var node = root.shadowRoot ? walker.currentNode : walker.nextNode();\r\n            node != null;\r\n            node = walker.nextNode()\r\n        ) {\r\n            if (node.classList.contains(\"surfingkeys_hints_host\")) {\r\n                continue;\r\n            }\r\n            iterator(node);\r\n            iterateShadowHosts(node.shadowRoot, iterator);\r\n        }\r\n    }\r\n    var isDOMReady = function () {\r\n        return (\r\n            document.readyState === \"complete\" ||\r\n            document.readyState === \"interactive\"\r\n        );\r\n    };\r\n    function setIsDOMReady(newFunc) {\r\n        isDOMReady = newFunc;\r\n    }\r\n    var readyStateListeners = new Set();\r\n    function addDOMReadyListener(listener) {\r\n        isDOMReady() ? listener() : readyStateListeners.add(listener);\r\n    }\r\n    function removeDOMReadyListener(listener) {\r\n        readyStateListeners.delete(listener);\r\n    }\r\n    function isReadyStateComplete() {\r\n        return document.readyState === \"complete\";\r\n    }\r\n    var readyStateCompleteListeners = new Set();\r\n    function addReadyStateCompleteListener(listener) {\r\n        isReadyStateComplete()\r\n            ? listener()\r\n            : readyStateCompleteListeners.add(listener);\r\n    }\r\n    function cleanReadyStateCompleteListeners() {\r\n        readyStateCompleteListeners.clear();\r\n    }\r\n    if (!isDOMReady()) {\r\n        var onReadyStateChange_1 = function () {\r\n            if (isDOMReady()) {\r\n                readyStateListeners.forEach(function (listener) {\r\n                    return listener();\r\n                });\r\n                readyStateListeners.clear();\r\n                if (isReadyStateComplete()) {\r\n                    document.removeEventListener(\r\n                        \"readystatechange\",\r\n                        onReadyStateChange_1\r\n                    );\r\n                    readyStateCompleteListeners.forEach(function (listener) {\r\n                        return listener();\r\n                    });\r\n                    readyStateCompleteListeners.clear();\r\n                }\r\n            }\r\n        };\r\n        document.addEventListener(\"readystatechange\", onReadyStateChange_1);\r\n    }\r\n    var HUGE_MUTATIONS_COUNT = 1000;\r\n    function isHugeMutation(mutations) {\r\n        if (mutations.length > HUGE_MUTATIONS_COUNT) {\r\n            return true;\r\n        }\r\n        var addedNodesCount = 0;\r\n        for (var i = 0; i < mutations.length; i++) {\r\n            addedNodesCount += mutations[i].addedNodes.length;\r\n            if (addedNodesCount > HUGE_MUTATIONS_COUNT) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function getElementsTreeOperations(mutations) {\r\n        var additions = new Set();\r\n        var deletions = new Set();\r\n        var moves = new Set();\r\n        mutations.forEach(function (m) {\r\n            forEach(m.addedNodes, function (n) {\r\n                if (n instanceof Element && n.isConnected) {\r\n                    additions.add(n);\r\n                }\r\n            });\r\n            forEach(m.removedNodes, function (n) {\r\n                if (n instanceof Element) {\r\n                    if (n.isConnected) {\r\n                        moves.add(n);\r\n                        additions.delete(n);\r\n                    } else {\r\n                        deletions.add(n);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        var duplicateAdditions = [];\r\n        var duplicateDeletions = [];\r\n        additions.forEach(function (node) {\r\n            if (additions.has(node.parentElement)) {\r\n                duplicateAdditions.push(node);\r\n            }\r\n        });\r\n        deletions.forEach(function (node) {\r\n            if (deletions.has(node.parentElement)) {\r\n                duplicateDeletions.push(node);\r\n            }\r\n        });\r\n        duplicateAdditions.forEach(function (node) {\r\n            return additions.delete(node);\r\n        });\r\n        duplicateDeletions.forEach(function (node) {\r\n            return deletions.delete(node);\r\n        });\r\n        return {additions: additions, moves: moves, deletions: deletions};\r\n    }\r\n    var optimizedTreeObservers = new Map();\r\n    var optimizedTreeCallbacks = new WeakMap();\r\n    function createOptimizedTreeObserver(root, callbacks) {\r\n        var observer;\r\n        var observerCallbacks;\r\n        var domReadyListener;\r\n        if (optimizedTreeObservers.has(root)) {\r\n            observer = optimizedTreeObservers.get(root);\r\n            observerCallbacks = optimizedTreeCallbacks.get(observer);\r\n        } else {\r\n            var hadHugeMutationsBefore_1 = false;\r\n            var subscribedForReadyState_1 = false;\r\n            observer = new MutationObserver(function (mutations) {\r\n                if (isHugeMutation(mutations)) {\r\n                    if (!hadHugeMutationsBefore_1 || isDOMReady()) {\r\n                        observerCallbacks.forEach(function (_a) {\r\n                            var onHugeMutations = _a.onHugeMutations;\r\n                            return onHugeMutations(root);\r\n                        });\r\n                    } else if (!subscribedForReadyState_1) {\r\n                        domReadyListener = function () {\r\n                            return observerCallbacks.forEach(function (_a) {\r\n                                var onHugeMutations = _a.onHugeMutations;\r\n                                return onHugeMutations(root);\r\n                            });\r\n                        };\r\n                        addDOMReadyListener(domReadyListener);\r\n                        subscribedForReadyState_1 = true;\r\n                    }\r\n                    hadHugeMutationsBefore_1 = true;\r\n                } else {\r\n                    var elementsOperations_1 =\r\n                        getElementsTreeOperations(mutations);\r\n                    observerCallbacks.forEach(function (_a) {\r\n                        var onMinorMutations = _a.onMinorMutations;\r\n                        return onMinorMutations(elementsOperations_1);\r\n                    });\r\n                }\r\n            });\r\n            observer.observe(root, {childList: true, subtree: true});\r\n            optimizedTreeObservers.set(root, observer);\r\n            observerCallbacks = new Set();\r\n            optimizedTreeCallbacks.set(observer, observerCallbacks);\r\n        }\r\n        observerCallbacks.add(callbacks);\r\n        return {\r\n            disconnect: function () {\r\n                observerCallbacks.delete(callbacks);\r\n                if (domReadyListener) {\r\n                    removeDOMReadyListener(domReadyListener);\r\n                }\r\n                if (observerCallbacks.size === 0) {\r\n                    observer.disconnect();\r\n                    optimizedTreeCallbacks.delete(observer);\r\n                    optimizedTreeObservers.delete(root);\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    var anchor;\r\n    var parsedURLCache = new Map();\r\n    function fixBaseURL($url) {\r\n        if (!anchor) {\r\n            anchor = document.createElement(\"a\");\r\n        }\r\n        anchor.href = $url;\r\n        return anchor.href;\r\n    }\r\n    function parseURL($url, $base) {\r\n        if ($base === void 0) {\r\n            $base = null;\r\n        }\r\n        var key = \"\".concat($url).concat($base ? \";\".concat($base) : \"\");\r\n        if (parsedURLCache.has(key)) {\r\n            return parsedURLCache.get(key);\r\n        }\r\n        if ($base) {\r\n            var parsedURL_1 = new URL($url, fixBaseURL($base));\r\n            parsedURLCache.set(key, parsedURL_1);\r\n            return parsedURL_1;\r\n        }\r\n        var parsedURL = new URL(fixBaseURL($url));\r\n        parsedURLCache.set($url, parsedURL);\r\n        return parsedURL;\r\n    }\r\n    function getAbsoluteURL($base, $relative) {\r\n        if ($relative.match(/^data\\\\?\\:/)) {\r\n            return $relative;\r\n        }\r\n        if (/^\\/\\//.test($relative)) {\r\n            return \"\".concat(location.protocol).concat($relative);\r\n        }\r\n        var b = parseURL($base);\r\n        var a = parseURL($relative, b.href);\r\n        return a.href;\r\n    }\r\n    function isRelativeHrefOnAbsolutePath(href) {\r\n        if (href.startsWith(\"data:\")) {\r\n            return true;\r\n        }\r\n        var url = parseURL(href);\r\n        if (url.protocol !== location.protocol) {\r\n            return false;\r\n        }\r\n        if (url.hostname !== location.hostname) {\r\n            return false;\r\n        }\r\n        if (url.port !== location.port) {\r\n            return false;\r\n        }\r\n        return url.pathname === location.pathname;\r\n    }\r\n\r\n    function iterateCSSRules(rules, iterate, onMediaRuleError) {\r\n        forEach(rules, function (rule) {\r\n            if (rule.selectorText) {\r\n                iterate(rule);\r\n            } else if (rule.href) {\r\n                try {\r\n                    iterateCSSRules(\r\n                        rule.styleSheet.cssRules,\r\n                        iterate,\r\n                        onMediaRuleError\r\n                    );\r\n                } catch (err) {\r\n                    logInfo(\"Found a non-loaded link.\");\r\n                    onMediaRuleError && onMediaRuleError();\r\n                }\r\n            } else if (rule.media) {\r\n                var media = Array.from(rule.media);\r\n                var isScreenOrAllOrQuery = media.some(function (m) {\r\n                    return (\r\n                        m.startsWith(\"screen\") ||\r\n                        m.startsWith(\"all\") ||\r\n                        m.startsWith(\"(\")\r\n                    );\r\n                });\r\n                var isPrintOrSpeech = media.some(function (m) {\r\n                    return m.startsWith(\"print\") || m.startsWith(\"speech\");\r\n                });\r\n                if (isScreenOrAllOrQuery || !isPrintOrSpeech) {\r\n                    iterateCSSRules(rule.cssRules, iterate, onMediaRuleError);\r\n                }\r\n            } else if (rule.conditionText) {\r\n                if (CSS.supports(rule.conditionText)) {\r\n                    iterateCSSRules(rule.cssRules, iterate, onMediaRuleError);\r\n                }\r\n            } else {\r\n                logWarn(\"CSSRule type not supported\", rule);\r\n            }\r\n        });\r\n    }\r\n    var shorthandVarDependantProperties = [\r\n        \"background\",\r\n        \"border\",\r\n        \"border-color\",\r\n        \"border-bottom\",\r\n        \"border-left\",\r\n        \"border-right\",\r\n        \"border-top\",\r\n        \"outline\",\r\n        \"outline-color\"\r\n    ];\r\n    var shorthandVarDepPropRegexps = isSafari\r\n        ? shorthandVarDependantProperties.map(function (prop) {\r\n              var regexp = new RegExp(\"\".concat(prop, \":\\\\s*(.*?)\\\\s*;\"));\r\n              return [prop, regexp];\r\n          })\r\n        : null;\r\n    function iterateCSSDeclarations(style, iterate) {\r\n        forEach(style, function (property) {\r\n            var value = style.getPropertyValue(property).trim();\r\n            if (!value) {\r\n                return;\r\n            }\r\n            iterate(property, value);\r\n        });\r\n        var cssText = style.cssText;\r\n        if (cssText.includes(\"var(\")) {\r\n            if (isSafari) {\r\n                shorthandVarDepPropRegexps.forEach(function (_a) {\r\n                    var _b = __read(_a, 2),\r\n                        prop = _b[0],\r\n                        regexp = _b[1];\r\n                    var match = cssText.match(regexp);\r\n                    if (match && match[1]) {\r\n                        var val = match[1].trim();\r\n                        iterate(prop, val);\r\n                    }\r\n                });\r\n            } else {\r\n                shorthandVarDependantProperties.forEach(function (prop) {\r\n                    var val = style.getPropertyValue(prop);\r\n                    if (val && val.includes(\"var(\")) {\r\n                        iterate(prop, val);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    var cssURLRegex = /url\\((('.*?')|(\".*?\")|([^\\)]*?))\\)/g;\r\n    var cssImportRegex =\r\n        /@import\\s*(url\\()?(('.+?')|(\".+?\")|([^\\)]*?))\\)? ?(screen)?;?/gi;\r\n    function getCSSURLValue(cssURL) {\r\n        return cssURL\r\n            .trim()\r\n            .replace(/[\\n\\r\\\\]+/g, \"\")\r\n            .replace(/^url\\((.*)\\)$/, \"$1\")\r\n            .trim()\r\n            .replace(/^\"(.*)\"$/, \"$1\")\r\n            .replace(/^'(.*)'$/, \"$1\")\r\n            .replace(/(?:\\\\(.))/g, \"$1\");\r\n    }\r\n    function getCSSBaseBath(url) {\r\n        var cssURL = parseURL(url);\r\n        return \"\"\r\n            .concat(cssURL.origin)\r\n            .concat(\r\n                cssURL.pathname\r\n                    .replace(/\\?.*$/, \"\")\r\n                    .replace(/(\\/)([^\\/]+)$/i, \"$1\")\r\n            );\r\n    }\r\n    function replaceCSSRelativeURLsWithAbsolute($css, cssBasePath) {\r\n        return $css.replace(cssURLRegex, function (match) {\r\n            var pathValue = getCSSURLValue(match);\r\n            try {\r\n                return \"url('\".concat(\r\n                    getAbsoluteURL(cssBasePath, pathValue),\r\n                    \"')\"\r\n                );\r\n            } catch (err) {\r\n                return match;\r\n            }\r\n        });\r\n    }\r\n    var cssCommentsRegex = /\\/\\*[\\s\\S]*?\\*\\//g;\r\n    function removeCSSComments($css) {\r\n        return $css.replace(cssCommentsRegex, \"\");\r\n    }\r\n    var fontFaceRegex = /@font-face\\s*{[^}]*}/g;\r\n    function replaceCSSFontFace($css) {\r\n        return $css.replace(fontFaceRegex, \"\");\r\n    }\r\n\r\n    function evalMath(expression) {\r\n        var rpnStack = [];\r\n        var workingStack = [];\r\n        var lastToken;\r\n        for (var i = 0, len = expression.length; i < len; i++) {\r\n            var token = expression[i];\r\n            if (!token || token === \" \") {\r\n                continue;\r\n            }\r\n            if (operators.has(token)) {\r\n                var op = operators.get(token);\r\n                while (workingStack.length) {\r\n                    var currentOp = operators.get(workingStack[0]);\r\n                    if (!currentOp) {\r\n                        break;\r\n                    }\r\n                    if (op.lessOrEqualThan(currentOp)) {\r\n                        rpnStack.push(workingStack.shift());\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n                workingStack.unshift(token);\r\n            } else if (!lastToken || operators.has(lastToken)) {\r\n                rpnStack.push(token);\r\n            } else {\r\n                rpnStack[rpnStack.length - 1] += token;\r\n            }\r\n            lastToken = token;\r\n        }\r\n        rpnStack.push.apply(\r\n            rpnStack,\r\n            __spreadArray([], __read(workingStack), false)\r\n        );\r\n        var stack = [];\r\n        for (var i = 0, len = rpnStack.length; i < len; i++) {\r\n            var op = operators.get(rpnStack[i]);\r\n            if (op) {\r\n                var args = stack.splice(0, 2);\r\n                stack.push(op.exec(args[1], args[0]));\r\n            } else {\r\n                stack.unshift(parseFloat(rpnStack[i]));\r\n            }\r\n        }\r\n        return stack[0];\r\n    }\r\n    var Operator = (function () {\r\n        function Operator(precedence, method) {\r\n            this.precendce = precedence;\r\n            this.execMethod = method;\r\n        }\r\n        Operator.prototype.exec = function (left, right) {\r\n            return this.execMethod(left, right);\r\n        };\r\n        Operator.prototype.lessOrEqualThan = function (op) {\r\n            return this.precendce <= op.precendce;\r\n        };\r\n        return Operator;\r\n    })();\r\n    var operators = new Map([\r\n        [\r\n            \"+\",\r\n            new Operator(1, function (left, right) {\r\n                return left + right;\r\n            })\r\n        ],\r\n        [\r\n            \"-\",\r\n            new Operator(1, function (left, right) {\r\n                return left - right;\r\n            })\r\n        ],\r\n        [\r\n            \"*\",\r\n            new Operator(2, function (left, right) {\r\n                return left * right;\r\n            })\r\n        ],\r\n        [\r\n            \"/\",\r\n            new Operator(2, function (left, right) {\r\n                return left / right;\r\n            })\r\n        ]\r\n    ]);\r\n\r\n    function getMatches(regex, input, group) {\r\n        if (group === void 0) {\r\n            group = 0;\r\n        }\r\n        var matches = [];\r\n        var m;\r\n        while ((m = regex.exec(input))) {\r\n            matches.push(m[group]);\r\n        }\r\n        return matches;\r\n    }\r\n    function formatCSS(text) {\r\n        function trimLeft(text) {\r\n            return text.replace(/^\\s+/, \"\");\r\n        }\r\n        function getIndent(depth) {\r\n            if (depth === 0) {\r\n                return \"\";\r\n            }\r\n            return \" \".repeat(4 * depth);\r\n        }\r\n        if (text.length < 50000) {\r\n            var emptyRuleRegexp = /[^{}]+{\\s*}/;\r\n            while (emptyRuleRegexp.test(text)) {\r\n                text = text.replace(emptyRuleRegexp, \"\");\r\n            }\r\n        }\r\n        var css = text\r\n            .replace(/\\s{2,}/g, \" \")\r\n            .replace(/\\{/g, \"{\\n\")\r\n            .replace(/\\}/g, \"\\n}\\n\")\r\n            .replace(/\\;(?![^\\(|\\\"]*(\\)|\\\"))/g, \";\\n\")\r\n            .replace(/\\,(?![^\\(|\\\"]*(\\)|\\\"))/g, \",\\n\")\r\n            .replace(/\\n\\s*\\n/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        var depth = 0;\r\n        var formatted = [];\r\n        for (var x = 0, len = css.length; x < len; x++) {\r\n            var line = \"\".concat(css[x], \"\\n\");\r\n            if (line.includes(\"{\")) {\r\n                formatted.push(getIndent(depth++) + trimLeft(line));\r\n            } else if (line.includes(\"}\")) {\r\n                formatted.push(getIndent(--depth) + trimLeft(line));\r\n            } else {\r\n                formatted.push(getIndent(depth) + trimLeft(line));\r\n            }\r\n        }\r\n        return formatted.join(\"\").trim();\r\n    }\r\n    function getParenthesesRange(input, searchStartIndex) {\r\n        if (searchStartIndex === void 0) {\r\n            searchStartIndex = 0;\r\n        }\r\n        var length = input.length;\r\n        var depth = 0;\r\n        var firstOpenIndex = -1;\r\n        for (var i = searchStartIndex; i < length; i++) {\r\n            if (depth === 0) {\r\n                var openIndex = input.indexOf(\"(\", i);\r\n                if (openIndex < 0) {\r\n                    break;\r\n                }\r\n                firstOpenIndex = openIndex;\r\n                depth++;\r\n                i = openIndex;\r\n            } else {\r\n                var closingIndex = input.indexOf(\")\", i);\r\n                if (closingIndex < 0) {\r\n                    break;\r\n                }\r\n                var openIndex = input.indexOf(\"(\", i);\r\n                if (openIndex < 0 || closingIndex < openIndex) {\r\n                    depth--;\r\n                    if (depth === 0) {\r\n                        return {start: firstOpenIndex, end: closingIndex + 1};\r\n                    }\r\n                    i = closingIndex;\r\n                } else {\r\n                    depth++;\r\n                    i = openIndex;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    var hslaParseCache = new Map();\r\n    var rgbaParseCache = new Map();\r\n    function parseColorWithCache($color) {\r\n        $color = $color.trim();\r\n        if (rgbaParseCache.has($color)) {\r\n            return rgbaParseCache.get($color);\r\n        }\r\n        if ($color.includes(\"calc(\")) {\r\n            $color = lowerCalcExpression($color);\r\n        }\r\n        var color = parse($color);\r\n        color && rgbaParseCache.set($color, color);\r\n        return color;\r\n    }\r\n    function parseToHSLWithCache(color) {\r\n        if (hslaParseCache.has(color)) {\r\n            return hslaParseCache.get(color);\r\n        }\r\n        var rgb = parseColorWithCache(color);\r\n        if (!rgb) {\r\n            return null;\r\n        }\r\n        var hsl = rgbToHSL(rgb);\r\n        hslaParseCache.set(color, hsl);\r\n        return hsl;\r\n    }\r\n    function clearColorCache() {\r\n        hslaParseCache.clear();\r\n        rgbaParseCache.clear();\r\n    }\r\n    function hslToRGB(_a) {\r\n        var h = _a.h,\r\n            s = _a.s,\r\n            l = _a.l,\r\n            _b = _a.a,\r\n            a = _b === void 0 ? 1 : _b;\r\n        if (s === 0) {\r\n            var _c = __read(\r\n                    [l, l, l].map(function (x) {\r\n                        return Math.round(x * 255);\r\n                    }),\r\n                    3\r\n                ),\r\n                r_1 = _c[0],\r\n                b_1 = _c[1],\r\n                g_1 = _c[2];\r\n            return {r: r_1, g: g_1, b: b_1, a: a};\r\n        }\r\n        var c = (1 - Math.abs(2 * l - 1)) * s;\r\n        var x = c * (1 - Math.abs(((h / 60) % 2) - 1));\r\n        var m = l - c / 2;\r\n        var _d = __read(\r\n                (h < 60\r\n                    ? [c, x, 0]\r\n                    : h < 120\r\n                    ? [x, c, 0]\r\n                    : h < 180\r\n                    ? [0, c, x]\r\n                    : h < 240\r\n                    ? [0, x, c]\r\n                    : h < 300\r\n                    ? [x, 0, c]\r\n                    : [c, 0, x]\r\n                ).map(function (n) {\r\n                    return Math.round((n + m) * 255);\r\n                }),\r\n                3\r\n            ),\r\n            r = _d[0],\r\n            g = _d[1],\r\n            b = _d[2];\r\n        return {r: r, g: g, b: b, a: a};\r\n    }\r\n    function rgbToHSL(_a) {\r\n        var r255 = _a.r,\r\n            g255 = _a.g,\r\n            b255 = _a.b,\r\n            _b = _a.a,\r\n            a = _b === void 0 ? 1 : _b;\r\n        var r = r255 / 255;\r\n        var g = g255 / 255;\r\n        var b = b255 / 255;\r\n        var max = Math.max(r, g, b);\r\n        var min = Math.min(r, g, b);\r\n        var c = max - min;\r\n        var l = (max + min) / 2;\r\n        if (c === 0) {\r\n            return {h: 0, s: 0, l: l, a: a};\r\n        }\r\n        var h =\r\n            (max === r\r\n                ? ((g - b) / c) % 6\r\n                : max === g\r\n                ? (b - r) / c + 2\r\n                : (r - g) / c + 4) * 60;\r\n        if (h < 0) {\r\n            h += 360;\r\n        }\r\n        var s = c / (1 - Math.abs(2 * l - 1));\r\n        return {h: h, s: s, l: l, a: a};\r\n    }\r\n    function toFixed(n, digits) {\r\n        if (digits === void 0) {\r\n            digits = 0;\r\n        }\r\n        var fixed = n.toFixed(digits);\r\n        if (digits === 0) {\r\n            return fixed;\r\n        }\r\n        var dot = fixed.indexOf(\".\");\r\n        if (dot >= 0) {\r\n            var zerosMatch = fixed.match(/0+$/);\r\n            if (zerosMatch) {\r\n                if (zerosMatch.index === dot + 1) {\r\n                    return fixed.substring(0, dot);\r\n                }\r\n                return fixed.substring(0, zerosMatch.index);\r\n            }\r\n        }\r\n        return fixed;\r\n    }\r\n    function rgbToString(rgb) {\r\n        var r = rgb.r,\r\n            g = rgb.g,\r\n            b = rgb.b,\r\n            a = rgb.a;\r\n        if (a != null && a < 1) {\r\n            return \"rgba(\"\r\n                .concat(toFixed(r), \", \")\r\n                .concat(toFixed(g), \", \")\r\n                .concat(toFixed(b), \", \")\r\n                .concat(toFixed(a, 2), \")\");\r\n        }\r\n        return \"rgb(\"\r\n            .concat(toFixed(r), \", \")\r\n            .concat(toFixed(g), \", \")\r\n            .concat(toFixed(b), \")\");\r\n    }\r\n    function rgbToHexString(_a) {\r\n        var r = _a.r,\r\n            g = _a.g,\r\n            b = _a.b,\r\n            a = _a.a;\r\n        return \"#\".concat(\r\n            (a != null && a < 1 ? [r, g, b, Math.round(a * 255)] : [r, g, b])\r\n                .map(function (x) {\r\n                    return \"\".concat(x < 16 ? \"0\" : \"\").concat(x.toString(16));\r\n                })\r\n                .join(\"\")\r\n        );\r\n    }\r\n    function hslToString(hsl) {\r\n        var h = hsl.h,\r\n            s = hsl.s,\r\n            l = hsl.l,\r\n            a = hsl.a;\r\n        if (a != null && a < 1) {\r\n            return \"hsla(\"\r\n                .concat(toFixed(h), \", \")\r\n                .concat(toFixed(s * 100), \"%, \")\r\n                .concat(toFixed(l * 100), \"%, \")\r\n                .concat(toFixed(a, 2), \")\");\r\n        }\r\n        return \"hsl(\"\r\n            .concat(toFixed(h), \", \")\r\n            .concat(toFixed(s * 100), \"%, \")\r\n            .concat(toFixed(l * 100), \"%)\");\r\n    }\r\n    var rgbMatch = /^rgba?\\([^\\(\\)]+\\)$/;\r\n    var hslMatch = /^hsla?\\([^\\(\\)]+\\)$/;\r\n    var hexMatch = /^#[0-9a-f]+$/i;\r\n    function parse($color) {\r\n        var c = $color.trim().toLowerCase();\r\n        if (c.match(rgbMatch)) {\r\n            return parseRGB(c);\r\n        }\r\n        if (c.match(hslMatch)) {\r\n            return parseHSL(c);\r\n        }\r\n        if (c.match(hexMatch)) {\r\n            return parseHex(c);\r\n        }\r\n        if (knownColors.has(c)) {\r\n            return getColorByName(c);\r\n        }\r\n        if (systemColors.has(c)) {\r\n            return getSystemColor(c);\r\n        }\r\n        if ($color === \"transparent\") {\r\n            return {r: 0, g: 0, b: 0, a: 0};\r\n        }\r\n        return null;\r\n    }\r\n    function getNumbers($color) {\r\n        var numbers = [];\r\n        var prevPos = 0;\r\n        var isMining = false;\r\n        var startIndex = $color.indexOf(\"(\");\r\n        $color = $color.substring(startIndex + 1, $color.length - 1);\r\n        for (var i = 0; i < $color.length; i++) {\r\n            var c = $color[i];\r\n            if ((c >= \"0\" && c <= \"9\") || c === \".\" || c === \"+\" || c === \"-\") {\r\n                isMining = true;\r\n            } else if (isMining && (c === \" \" || c === \",\")) {\r\n                numbers.push($color.substring(prevPos, i));\r\n                isMining = false;\r\n                prevPos = i + 1;\r\n            } else if (!isMining) {\r\n                prevPos = i + 1;\r\n            }\r\n        }\r\n        if (isMining) {\r\n            numbers.push($color.substring(prevPos, $color.length));\r\n        }\r\n        return numbers;\r\n    }\r\n    function getNumbersFromString(str, range, units) {\r\n        var raw = getNumbers(str);\r\n        var unitsList = Object.entries(units);\r\n        var numbers = raw\r\n            .map(function (r) {\r\n                return r.trim();\r\n            })\r\n            .map(function (r, i) {\r\n                var n;\r\n                var unit = unitsList.find(function (_a) {\r\n                    var _b = __read(_a, 1),\r\n                        u = _b[0];\r\n                    return r.endsWith(u);\r\n                });\r\n                if (unit) {\r\n                    n =\r\n                        (parseFloat(r.substring(0, r.length - unit[0].length)) /\r\n                            unit[1]) *\r\n                        range[i];\r\n                } else {\r\n                    n = parseFloat(r);\r\n                }\r\n                if (range[i] > 1) {\r\n                    return Math.round(n);\r\n                }\r\n                return n;\r\n            });\r\n        return numbers;\r\n    }\r\n    var rgbRange = [255, 255, 255, 1];\r\n    var rgbUnits = {\"%\": 100};\r\n    function parseRGB($rgb) {\r\n        var _a = __read(getNumbersFromString($rgb, rgbRange, rgbUnits), 4),\r\n            r = _a[0],\r\n            g = _a[1],\r\n            b = _a[2],\r\n            _b = _a[3],\r\n            a = _b === void 0 ? 1 : _b;\r\n        return {r: r, g: g, b: b, a: a};\r\n    }\r\n    var hslRange = [360, 1, 1, 1];\r\n    var hslUnits = {\"%\": 100, \"deg\": 360, \"rad\": 2 * Math.PI, \"turn\": 1};\r\n    function parseHSL($hsl) {\r\n        var _a = __read(getNumbersFromString($hsl, hslRange, hslUnits), 4),\r\n            h = _a[0],\r\n            s = _a[1],\r\n            l = _a[2],\r\n            _b = _a[3],\r\n            a = _b === void 0 ? 1 : _b;\r\n        return hslToRGB({h: h, s: s, l: l, a: a});\r\n    }\r\n    function parseHex($hex) {\r\n        var h = $hex.substring(1);\r\n        switch (h.length) {\r\n            case 3:\r\n            case 4: {\r\n                var _a = __read(\r\n                        [0, 1, 2].map(function (i) {\r\n                            return parseInt(\"\".concat(h[i]).concat(h[i]), 16);\r\n                        }),\r\n                        3\r\n                    ),\r\n                    r = _a[0],\r\n                    g = _a[1],\r\n                    b = _a[2];\r\n                var a =\r\n                    h.length === 3\r\n                        ? 1\r\n                        : parseInt(\"\".concat(h[3]).concat(h[3]), 16) / 255;\r\n                return {r: r, g: g, b: b, a: a};\r\n            }\r\n            case 6:\r\n            case 8: {\r\n                var _b = __read(\r\n                        [0, 2, 4].map(function (i) {\r\n                            return parseInt(h.substring(i, i + 2), 16);\r\n                        }),\r\n                        3\r\n                    ),\r\n                    r = _b[0],\r\n                    g = _b[1],\r\n                    b = _b[2];\r\n                var a =\r\n                    h.length === 6 ? 1 : parseInt(h.substring(6, 8), 16) / 255;\r\n                return {r: r, g: g, b: b, a: a};\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    function getColorByName($color) {\r\n        var n = knownColors.get($color);\r\n        return {\r\n            r: (n >> 16) & 255,\r\n            g: (n >> 8) & 255,\r\n            b: (n >> 0) & 255,\r\n            a: 1\r\n        };\r\n    }\r\n    function getSystemColor($color) {\r\n        var n = systemColors.get($color);\r\n        return {\r\n            r: (n >> 16) & 255,\r\n            g: (n >> 8) & 255,\r\n            b: (n >> 0) & 255,\r\n            a: 1\r\n        };\r\n    }\r\n    function lowerCalcExpression(color) {\r\n        var searchIndex = 0;\r\n        var replaceBetweenIndices = function (start, end, replacement) {\r\n            color =\r\n                color.substring(0, start) + replacement + color.substring(end);\r\n        };\r\n        while ((searchIndex = color.indexOf(\"calc(\")) !== -1) {\r\n            var range = getParenthesesRange(color, searchIndex);\r\n            if (!range) {\r\n                break;\r\n            }\r\n            var slice = color.slice(range.start + 1, range.end - 1);\r\n            var includesPercentage = slice.includes(\"%\");\r\n            slice = slice.split(\"%\").join(\"\");\r\n            var output = Math.round(evalMath(slice));\r\n            replaceBetweenIndices(\r\n                range.start - 4,\r\n                range.end,\r\n                output + (includesPercentage ? \"%\" : \"\")\r\n            );\r\n        }\r\n        return color;\r\n    }\r\n    var knownColors = new Map(\r\n        Object.entries({\r\n            aliceblue: 0xf0f8ff,\r\n            antiquewhite: 0xfaebd7,\r\n            aqua: 0x00ffff,\r\n            aquamarine: 0x7fffd4,\r\n            azure: 0xf0ffff,\r\n            beige: 0xf5f5dc,\r\n            bisque: 0xffe4c4,\r\n            black: 0x000000,\r\n            blanchedalmond: 0xffebcd,\r\n            blue: 0x0000ff,\r\n            blueviolet: 0x8a2be2,\r\n            brown: 0xa52a2a,\r\n            burlywood: 0xdeb887,\r\n            cadetblue: 0x5f9ea0,\r\n            chartreuse: 0x7fff00,\r\n            chocolate: 0xd2691e,\r\n            coral: 0xff7f50,\r\n            cornflowerblue: 0x6495ed,\r\n            cornsilk: 0xfff8dc,\r\n            crimson: 0xdc143c,\r\n            cyan: 0x00ffff,\r\n            darkblue: 0x00008b,\r\n            darkcyan: 0x008b8b,\r\n            darkgoldenrod: 0xb8860b,\r\n            darkgray: 0xa9a9a9,\r\n            darkgrey: 0xa9a9a9,\r\n            darkgreen: 0x006400,\r\n            darkkhaki: 0xbdb76b,\r\n            darkmagenta: 0x8b008b,\r\n            darkolivegreen: 0x556b2f,\r\n            darkorange: 0xff8c00,\r\n            darkorchid: 0x9932cc,\r\n            darkred: 0x8b0000,\r\n            darksalmon: 0xe9967a,\r\n            darkseagreen: 0x8fbc8f,\r\n            darkslateblue: 0x483d8b,\r\n            darkslategray: 0x2f4f4f,\r\n            darkslategrey: 0x2f4f4f,\r\n            darkturquoise: 0x00ced1,\r\n            darkviolet: 0x9400d3,\r\n            deeppink: 0xff1493,\r\n            deepskyblue: 0x00bfff,\r\n            dimgray: 0x696969,\r\n            dimgrey: 0x696969,\r\n            dodgerblue: 0x1e90ff,\r\n            firebrick: 0xb22222,\r\n            floralwhite: 0xfffaf0,\r\n            forestgreen: 0x228b22,\r\n            fuchsia: 0xff00ff,\r\n            gainsboro: 0xdcdcdc,\r\n            ghostwhite: 0xf8f8ff,\r\n            gold: 0xffd700,\r\n            goldenrod: 0xdaa520,\r\n            gray: 0x808080,\r\n            grey: 0x808080,\r\n            green: 0x008000,\r\n            greenyellow: 0xadff2f,\r\n            honeydew: 0xf0fff0,\r\n            hotpink: 0xff69b4,\r\n            indianred: 0xcd5c5c,\r\n            indigo: 0x4b0082,\r\n            ivory: 0xfffff0,\r\n            khaki: 0xf0e68c,\r\n            lavender: 0xe6e6fa,\r\n            lavenderblush: 0xfff0f5,\r\n            lawngreen: 0x7cfc00,\r\n            lemonchiffon: 0xfffacd,\r\n            lightblue: 0xadd8e6,\r\n            lightcoral: 0xf08080,\r\n            lightcyan: 0xe0ffff,\r\n            lightgoldenrodyellow: 0xfafad2,\r\n            lightgray: 0xd3d3d3,\r\n            lightgrey: 0xd3d3d3,\r\n            lightgreen: 0x90ee90,\r\n            lightpink: 0xffb6c1,\r\n            lightsalmon: 0xffa07a,\r\n            lightseagreen: 0x20b2aa,\r\n            lightskyblue: 0x87cefa,\r\n            lightslategray: 0x778899,\r\n            lightslategrey: 0x778899,\r\n            lightsteelblue: 0xb0c4de,\r\n            lightyellow: 0xffffe0,\r\n            lime: 0x00ff00,\r\n            limegreen: 0x32cd32,\r\n            linen: 0xfaf0e6,\r\n            magenta: 0xff00ff,\r\n            maroon: 0x800000,\r\n            mediumaquamarine: 0x66cdaa,\r\n            mediumblue: 0x0000cd,\r\n            mediumorchid: 0xba55d3,\r\n            mediumpurple: 0x9370db,\r\n            mediumseagreen: 0x3cb371,\r\n            mediumslateblue: 0x7b68ee,\r\n            mediumspringgreen: 0x00fa9a,\r\n            mediumturquoise: 0x48d1cc,\r\n            mediumvioletred: 0xc71585,\r\n            midnightblue: 0x191970,\r\n            mintcream: 0xf5fffa,\r\n            mistyrose: 0xffe4e1,\r\n            moccasin: 0xffe4b5,\r\n            navajowhite: 0xffdead,\r\n            navy: 0x000080,\r\n            oldlace: 0xfdf5e6,\r\n            olive: 0x808000,\r\n            olivedrab: 0x6b8e23,\r\n            orange: 0xffa500,\r\n            orangered: 0xff4500,\r\n            orchid: 0xda70d6,\r\n            palegoldenrod: 0xeee8aa,\r\n            palegreen: 0x98fb98,\r\n            paleturquoise: 0xafeeee,\r\n            palevioletred: 0xdb7093,\r\n            papayawhip: 0xffefd5,\r\n            peachpuff: 0xffdab9,\r\n            peru: 0xcd853f,\r\n            pink: 0xffc0cb,\r\n            plum: 0xdda0dd,\r\n            powderblue: 0xb0e0e6,\r\n            purple: 0x800080,\r\n            rebeccapurple: 0x663399,\r\n            red: 0xff0000,\r\n            rosybrown: 0xbc8f8f,\r\n            royalblue: 0x4169e1,\r\n            saddlebrown: 0x8b4513,\r\n            salmon: 0xfa8072,\r\n            sandybrown: 0xf4a460,\r\n            seagreen: 0x2e8b57,\r\n            seashell: 0xfff5ee,\r\n            sienna: 0xa0522d,\r\n            silver: 0xc0c0c0,\r\n            skyblue: 0x87ceeb,\r\n            slateblue: 0x6a5acd,\r\n            slategray: 0x708090,\r\n            slategrey: 0x708090,\r\n            snow: 0xfffafa,\r\n            springgreen: 0x00ff7f,\r\n            steelblue: 0x4682b4,\r\n            tan: 0xd2b48c,\r\n            teal: 0x008080,\r\n            thistle: 0xd8bfd8,\r\n            tomato: 0xff6347,\r\n            turquoise: 0x40e0d0,\r\n            violet: 0xee82ee,\r\n            wheat: 0xf5deb3,\r\n            white: 0xffffff,\r\n            whitesmoke: 0xf5f5f5,\r\n            yellow: 0xffff00,\r\n            yellowgreen: 0x9acd32\r\n        })\r\n    );\r\n    var systemColors = new Map(\r\n        Object.entries({\r\n            \"ActiveBorder\": 0x3b99fc,\r\n            \"ActiveCaption\": 0x000000,\r\n            \"AppWorkspace\": 0xaaaaaa,\r\n            \"Background\": 0x6363ce,\r\n            \"ButtonFace\": 0xffffff,\r\n            \"ButtonHighlight\": 0xe9e9e9,\r\n            \"ButtonShadow\": 0x9fa09f,\r\n            \"ButtonText\": 0x000000,\r\n            \"CaptionText\": 0x000000,\r\n            \"GrayText\": 0x7f7f7f,\r\n            \"Highlight\": 0xb2d7ff,\r\n            \"HighlightText\": 0x000000,\r\n            \"InactiveBorder\": 0xffffff,\r\n            \"InactiveCaption\": 0xffffff,\r\n            \"InactiveCaptionText\": 0x000000,\r\n            \"InfoBackground\": 0xfbfcc5,\r\n            \"InfoText\": 0x000000,\r\n            \"Menu\": 0xf6f6f6,\r\n            \"MenuText\": 0xffffff,\r\n            \"Scrollbar\": 0xaaaaaa,\r\n            \"ThreeDDarkShadow\": 0x000000,\r\n            \"ThreeDFace\": 0xc0c0c0,\r\n            \"ThreeDHighlight\": 0xffffff,\r\n            \"ThreeDLightShadow\": 0xffffff,\r\n            \"ThreeDShadow\": 0x000000,\r\n            \"Window\": 0xececec,\r\n            \"WindowFrame\": 0xaaaaaa,\r\n            \"WindowText\": 0x000000,\r\n            \"-webkit-focus-ring-color\": 0xe59700\r\n        }).map(function (_a) {\r\n            var _b = __read(_a, 2),\r\n                key = _b[0],\r\n                value = _b[1];\r\n            return [key.toLowerCase(), value];\r\n        })\r\n    );\r\n    function getSRGBLightness(r, g, b) {\r\n        return (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;\r\n    }\r\n\r\n    function scale(x, inLow, inHigh, outLow, outHigh) {\r\n        return ((x - inLow) * (outHigh - outLow)) / (inHigh - inLow) + outLow;\r\n    }\r\n    function clamp(x, min, max) {\r\n        return Math.min(max, Math.max(min, x));\r\n    }\r\n    function multiplyMatrices(m1, m2) {\r\n        var result = [];\r\n        for (var i = 0, len = m1.length; i < len; i++) {\r\n            result[i] = [];\r\n            for (var j = 0, len2 = m2[0].length; j < len2; j++) {\r\n                var sum = 0;\r\n                for (var k = 0, len3 = m1[0].length; k < len3; k++) {\r\n                    sum += m1[i][k] * m2[k][j];\r\n                }\r\n                result[i][j] = sum;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function createFilterMatrix(config) {\r\n        var m = Matrix.identity();\r\n        if (config.sepia !== 0) {\r\n            m = multiplyMatrices(m, Matrix.sepia(config.sepia / 100));\r\n        }\r\n        if (config.grayscale !== 0) {\r\n            m = multiplyMatrices(m, Matrix.grayscale(config.grayscale / 100));\r\n        }\r\n        if (config.contrast !== 100) {\r\n            m = multiplyMatrices(m, Matrix.contrast(config.contrast / 100));\r\n        }\r\n        if (config.brightness !== 100) {\r\n            m = multiplyMatrices(m, Matrix.brightness(config.brightness / 100));\r\n        }\r\n        if (config.mode === 1) {\r\n            m = multiplyMatrices(m, Matrix.invertNHue());\r\n        }\r\n        return m;\r\n    }\r\n    function applyColorMatrix(_a, matrix) {\r\n        var _b = __read(_a, 3),\r\n            r = _b[0],\r\n            g = _b[1],\r\n            b = _b[2];\r\n        var rgb = [[r / 255], [g / 255], [b / 255], [1], [1]];\r\n        var result = multiplyMatrices(matrix, rgb);\r\n        return [0, 1, 2].map(function (i) {\r\n            return clamp(Math.round(result[i][0] * 255), 0, 255);\r\n        });\r\n    }\r\n    var Matrix = {\r\n        identity: function () {\r\n            return [\r\n                [1, 0, 0, 0, 0],\r\n                [0, 1, 0, 0, 0],\r\n                [0, 0, 1, 0, 0],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        invertNHue: function () {\r\n            return [\r\n                [0.333, -0.667, -0.667, 0, 1],\r\n                [-0.667, 0.333, -0.667, 0, 1],\r\n                [-0.667, -0.667, 0.333, 0, 1],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        brightness: function (v) {\r\n            return [\r\n                [v, 0, 0, 0, 0],\r\n                [0, v, 0, 0, 0],\r\n                [0, 0, v, 0, 0],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        contrast: function (v) {\r\n            var t = (1 - v) / 2;\r\n            return [\r\n                [v, 0, 0, 0, t],\r\n                [0, v, 0, 0, t],\r\n                [0, 0, v, 0, t],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        sepia: function (v) {\r\n            return [\r\n                [\r\n                    0.393 + 0.607 * (1 - v),\r\n                    0.769 - 0.769 * (1 - v),\r\n                    0.189 - 0.189 * (1 - v),\r\n                    0,\r\n                    0\r\n                ],\r\n                [\r\n                    0.349 - 0.349 * (1 - v),\r\n                    0.686 + 0.314 * (1 - v),\r\n                    0.168 - 0.168 * (1 - v),\r\n                    0,\r\n                    0\r\n                ],\r\n                [\r\n                    0.272 - 0.272 * (1 - v),\r\n                    0.534 - 0.534 * (1 - v),\r\n                    0.131 + 0.869 * (1 - v),\r\n                    0,\r\n                    0\r\n                ],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        grayscale: function (v) {\r\n            return [\r\n                [\r\n                    0.2126 + 0.7874 * (1 - v),\r\n                    0.7152 - 0.7152 * (1 - v),\r\n                    0.0722 - 0.0722 * (1 - v),\r\n                    0,\r\n                    0\r\n                ],\r\n                [\r\n                    0.2126 - 0.2126 * (1 - v),\r\n                    0.7152 + 0.2848 * (1 - v),\r\n                    0.0722 - 0.0722 * (1 - v),\r\n                    0,\r\n                    0\r\n                ],\r\n                [\r\n                    0.2126 - 0.2126 * (1 - v),\r\n                    0.7152 - 0.7152 * (1 - v),\r\n                    0.0722 + 0.9278 * (1 - v),\r\n                    0,\r\n                    0\r\n                ],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        }\r\n    };\r\n\r\n    function getBgPole(theme) {\r\n        var isDarkScheme = theme.mode === 1;\r\n        var prop = isDarkScheme\r\n            ? \"darkSchemeBackgroundColor\"\r\n            : \"lightSchemeBackgroundColor\";\r\n        return theme[prop];\r\n    }\r\n    function getFgPole(theme) {\r\n        var isDarkScheme = theme.mode === 1;\r\n        var prop = isDarkScheme\r\n            ? \"darkSchemeTextColor\"\r\n            : \"lightSchemeTextColor\";\r\n        return theme[prop];\r\n    }\r\n    var colorModificationCache = new Map();\r\n    function clearColorModificationCache() {\r\n        colorModificationCache.clear();\r\n    }\r\n    var rgbCacheKeys = [\"r\", \"g\", \"b\", \"a\"];\r\n    var themeCacheKeys$1 = [\r\n        \"mode\",\r\n        \"brightness\",\r\n        \"contrast\",\r\n        \"grayscale\",\r\n        \"sepia\",\r\n        \"darkSchemeBackgroundColor\",\r\n        \"darkSchemeTextColor\",\r\n        \"lightSchemeBackgroundColor\",\r\n        \"lightSchemeTextColor\"\r\n    ];\r\n    function getCacheId(rgb, theme) {\r\n        var resultId = \"\";\r\n        rgbCacheKeys.forEach(function (key) {\r\n            resultId += \"\".concat(rgb[key], \";\");\r\n        });\r\n        themeCacheKeys$1.forEach(function (key) {\r\n            resultId += \"\".concat(theme[key], \";\");\r\n        });\r\n        return resultId;\r\n    }\r\n    function modifyColorWithCache(\r\n        rgb,\r\n        theme,\r\n        modifyHSL,\r\n        poleColor,\r\n        anotherPoleColor\r\n    ) {\r\n        var fnCache;\r\n        if (colorModificationCache.has(modifyHSL)) {\r\n            fnCache = colorModificationCache.get(modifyHSL);\r\n        } else {\r\n            fnCache = new Map();\r\n            colorModificationCache.set(modifyHSL, fnCache);\r\n        }\r\n        var id = getCacheId(rgb, theme);\r\n        if (fnCache.has(id)) {\r\n            return fnCache.get(id);\r\n        }\r\n        var hsl = rgbToHSL(rgb);\r\n        var pole = poleColor == null ? null : parseToHSLWithCache(poleColor);\r\n        var anotherPole =\r\n            anotherPoleColor == null\r\n                ? null\r\n                : parseToHSLWithCache(anotherPoleColor);\r\n        var modified = modifyHSL(hsl, pole, anotherPole);\r\n        var _a = hslToRGB(modified),\r\n            r = _a.r,\r\n            g = _a.g,\r\n            b = _a.b,\r\n            a = _a.a;\r\n        var matrix = createFilterMatrix(theme);\r\n        var _b = __read(applyColorMatrix([r, g, b], matrix), 3),\r\n            rf = _b[0],\r\n            gf = _b[1],\r\n            bf = _b[2];\r\n        var color =\r\n            a === 1\r\n                ? rgbToHexString({r: rf, g: gf, b: bf})\r\n                : rgbToString({r: rf, g: gf, b: bf, a: a});\r\n        fnCache.set(id, color);\r\n        return color;\r\n    }\r\n    function noopHSL(hsl) {\r\n        return hsl;\r\n    }\r\n    function modifyColor(rgb, theme) {\r\n        return modifyColorWithCache(rgb, theme, noopHSL);\r\n    }\r\n    function modifyLightSchemeColor(rgb, theme) {\r\n        var poleBg = getBgPole(theme);\r\n        var poleFg = getFgPole(theme);\r\n        return modifyColorWithCache(\r\n            rgb,\r\n            theme,\r\n            modifyLightModeHSL,\r\n            poleFg,\r\n            poleBg\r\n        );\r\n    }\r\n    function modifyLightModeHSL(_a, poleFg, poleBg) {\r\n        var h = _a.h,\r\n            s = _a.s,\r\n            l = _a.l,\r\n            a = _a.a;\r\n        var isDark = l < 0.5;\r\n        var isNeutral;\r\n        if (isDark) {\r\n            isNeutral = l < 0.2 || s < 0.12;\r\n        } else {\r\n            var isBlue = h > 200 && h < 280;\r\n            isNeutral = s < 0.24 || (l > 0.8 && isBlue);\r\n        }\r\n        var hx = h;\r\n        var sx = l;\r\n        if (isNeutral) {\r\n            if (isDark) {\r\n                hx = poleFg.h;\r\n                sx = poleFg.s;\r\n            } else {\r\n                hx = poleBg.h;\r\n                sx = poleBg.s;\r\n            }\r\n        }\r\n        var lx = scale(l, 0, 1, poleFg.l, poleBg.l);\r\n        return {h: hx, s: sx, l: lx, a: a};\r\n    }\r\n    var MAX_BG_LIGHTNESS = 0.4;\r\n    function modifyBgHSL(_a, pole) {\r\n        var h = _a.h,\r\n            s = _a.s,\r\n            l = _a.l,\r\n            a = _a.a;\r\n        var isDark = l < 0.5;\r\n        var isBlue = h > 200 && h < 280;\r\n        var isNeutral = s < 0.12 || (l > 0.8 && isBlue);\r\n        if (isDark) {\r\n            var lx_1 = scale(l, 0, 0.5, 0, MAX_BG_LIGHTNESS);\r\n            if (isNeutral) {\r\n                var hx_1 = pole.h;\r\n                var sx = pole.s;\r\n                return {h: hx_1, s: sx, l: lx_1, a: a};\r\n            }\r\n            return {h: h, s: s, l: lx_1, a: a};\r\n        }\r\n        var lx = scale(l, 0.5, 1, MAX_BG_LIGHTNESS, pole.l);\r\n        if (isNeutral) {\r\n            var hx_2 = pole.h;\r\n            var sx = pole.s;\r\n            return {h: hx_2, s: sx, l: lx, a: a};\r\n        }\r\n        var hx = h;\r\n        var isYellow = h > 60 && h < 180;\r\n        if (isYellow) {\r\n            var isCloserToGreen = h > 120;\r\n            if (isCloserToGreen) {\r\n                hx = scale(h, 120, 180, 135, 180);\r\n            } else {\r\n                hx = scale(h, 60, 120, 60, 105);\r\n            }\r\n        }\r\n        if (hx > 40 && hx < 80) {\r\n            lx *= 0.75;\r\n        }\r\n        return {h: hx, s: s, l: lx, a: a};\r\n    }\r\n    function modifyBackgroundColor(rgb, theme) {\r\n        if (theme.mode === 0) {\r\n            return modifyLightSchemeColor(rgb, theme);\r\n        }\r\n        var pole = getBgPole(theme);\r\n        return modifyColorWithCache(\r\n            rgb,\r\n            __assign(__assign({}, theme), {mode: 0}),\r\n            modifyBgHSL,\r\n            pole\r\n        );\r\n    }\r\n    var MIN_FG_LIGHTNESS = 0.55;\r\n    function modifyBlueFgHue(hue) {\r\n        return scale(hue, 205, 245, 205, 220);\r\n    }\r\n    function modifyFgHSL(_a, pole) {\r\n        var h = _a.h,\r\n            s = _a.s,\r\n            l = _a.l,\r\n            a = _a.a;\r\n        var isLight = l > 0.5;\r\n        var isNeutral = l < 0.2 || s < 0.24;\r\n        var isBlue = !isNeutral && h > 205 && h < 245;\r\n        if (isLight) {\r\n            var lx_2 = scale(l, 0.5, 1, MIN_FG_LIGHTNESS, pole.l);\r\n            if (isNeutral) {\r\n                var hx_3 = pole.h;\r\n                var sx = pole.s;\r\n                return {h: hx_3, s: sx, l: lx_2, a: a};\r\n            }\r\n            var hx_4 = h;\r\n            if (isBlue) {\r\n                hx_4 = modifyBlueFgHue(h);\r\n            }\r\n            return {h: hx_4, s: s, l: lx_2, a: a};\r\n        }\r\n        if (isNeutral) {\r\n            var hx_5 = pole.h;\r\n            var sx = pole.s;\r\n            var lx_3 = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\r\n            return {h: hx_5, s: sx, l: lx_3, a: a};\r\n        }\r\n        var hx = h;\r\n        var lx;\r\n        if (isBlue) {\r\n            hx = modifyBlueFgHue(h);\r\n            lx = scale(l, 0, 0.5, pole.l, Math.min(1, MIN_FG_LIGHTNESS + 0.05));\r\n        } else {\r\n            lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\r\n        }\r\n        return {h: hx, s: s, l: lx, a: a};\r\n    }\r\n    function modifyForegroundColor(rgb, theme) {\r\n        if (theme.mode === 0) {\r\n            return modifyLightSchemeColor(rgb, theme);\r\n        }\r\n        var pole = getFgPole(theme);\r\n        return modifyColorWithCache(\r\n            rgb,\r\n            __assign(__assign({}, theme), {mode: 0}),\r\n            modifyFgHSL,\r\n            pole\r\n        );\r\n    }\r\n    function modifyBorderHSL(_a, poleFg, poleBg) {\r\n        var h = _a.h,\r\n            s = _a.s,\r\n            l = _a.l,\r\n            a = _a.a;\r\n        var isDark = l < 0.5;\r\n        var isNeutral = l < 0.2 || s < 0.24;\r\n        var hx = h;\r\n        var sx = s;\r\n        if (isNeutral) {\r\n            if (isDark) {\r\n                hx = poleFg.h;\r\n                sx = poleFg.s;\r\n            } else {\r\n                hx = poleBg.h;\r\n                sx = poleBg.s;\r\n            }\r\n        }\r\n        var lx = scale(l, 0, 1, 0.5, 0.2);\r\n        return {h: hx, s: sx, l: lx, a: a};\r\n    }\r\n    function modifyBorderColor(rgb, theme) {\r\n        if (theme.mode === 0) {\r\n            return modifyLightSchemeColor(rgb, theme);\r\n        }\r\n        var poleFg = getFgPole(theme);\r\n        var poleBg = getBgPole(theme);\r\n        return modifyColorWithCache(\r\n            rgb,\r\n            __assign(__assign({}, theme), {mode: 0}),\r\n            modifyBorderHSL,\r\n            poleFg,\r\n            poleBg\r\n        );\r\n    }\r\n    function modifyShadowColor(rgb, filter) {\r\n        return modifyBackgroundColor(rgb, filter);\r\n    }\r\n    function modifyGradientColor(rgb, filter) {\r\n        return modifyBackgroundColor(rgb, filter);\r\n    }\r\n\r\n    function createTextStyle(config) {\r\n        var lines = [];\r\n        lines.push(\r\n            '*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*=\"vjs-\"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*=\"mu-\"], .glyphicon, .icon) {'\r\n        );\r\n        if (config.useFont && config.fontFamily) {\r\n            lines.push(\r\n                \"  font-family: \".concat(config.fontFamily, \" !important;\")\r\n            );\r\n        }\r\n        if (config.textStroke > 0) {\r\n            lines.push(\r\n                \"  -webkit-text-stroke: \".concat(\r\n                    config.textStroke,\r\n                    \"px !important;\"\r\n                )\r\n            );\r\n            lines.push(\r\n                \"  text-stroke: \".concat(config.textStroke, \"px !important;\")\r\n            );\r\n        }\r\n        lines.push(\"}\");\r\n        return lines.join(\"\\n\");\r\n    }\r\n\r\n    var FilterMode;\r\n    (function (FilterMode) {\r\n        FilterMode[(FilterMode[\"light\"] = 0)] = \"light\";\r\n        FilterMode[(FilterMode[\"dark\"] = 1)] = \"dark\";\r\n    })(FilterMode || (FilterMode = {}));\r\n    function getCSSFilterValue(config) {\r\n        var filters = [];\r\n        if (config.mode === FilterMode.dark) {\r\n            filters.push(\"invert(100%) hue-rotate(180deg)\");\r\n        }\r\n        if (config.brightness !== 100) {\r\n            filters.push(\"brightness(\".concat(config.brightness, \"%)\"));\r\n        }\r\n        if (config.contrast !== 100) {\r\n            filters.push(\"contrast(\".concat(config.contrast, \"%)\"));\r\n        }\r\n        if (config.grayscale !== 0) {\r\n            filters.push(\"grayscale(\".concat(config.grayscale, \"%)\"));\r\n        }\r\n        if (config.sepia !== 0) {\r\n            filters.push(\"sepia(\".concat(config.sepia, \"%)\"));\r\n        }\r\n        if (filters.length === 0) {\r\n            return null;\r\n        }\r\n        return filters.join(\" \");\r\n    }\r\n\r\n    function toSVGMatrix(matrix) {\r\n        return matrix\r\n            .slice(0, 4)\r\n            .map(function (m) {\r\n                return m\r\n                    .map(function (m) {\r\n                        return m.toFixed(3);\r\n                    })\r\n                    .join(\" \");\r\n            })\r\n            .join(\" \");\r\n    }\r\n    function getSVGFilterMatrixValue(config) {\r\n        return toSVGMatrix(createFilterMatrix(config));\r\n    }\r\n\r\n    var counter = 0;\r\n    var resolvers$1 = new Map();\r\n    var rejectors = new Map();\r\n    function bgFetch(request) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [\r\n                    2,\r\n                    new Promise(function (resolve, reject) {\r\n                        var id = ++counter;\r\n                        resolvers$1.set(id, resolve);\r\n                        rejectors.set(id, reject);\r\n                        chrome.runtime.sendMessage({\r\n                            type: MessageType.CS_FETCH,\r\n                            data: request,\r\n                            id: id\r\n                        });\r\n                    })\r\n                ];\r\n            });\r\n        });\r\n    }\r\n    chrome.runtime.onMessage.addListener(function (_a) {\r\n        var type = _a.type,\r\n            data = _a.data,\r\n            error = _a.error,\r\n            id = _a.id;\r\n        if (type === MessageType.BG_FETCH_RESPONSE) {\r\n            var resolve = resolvers$1.get(id);\r\n            var reject = rejectors.get(id);\r\n            resolvers$1.delete(id);\r\n            rejectors.delete(id);\r\n            if (error) {\r\n                reject && reject(error);\r\n            } else {\r\n                resolve && resolve(data);\r\n            }\r\n        }\r\n    });\r\n\r\n    var AsyncQueue = (function () {\r\n        function AsyncQueue() {\r\n            this.queue = [];\r\n            this.timerId = null;\r\n            this.frameDuration = 1000 / 60;\r\n        }\r\n        AsyncQueue.prototype.addToQueue = function (entry) {\r\n            this.queue.push(entry);\r\n            this.startQueue();\r\n        };\r\n        AsyncQueue.prototype.stopQueue = function () {\r\n            if (this.timerId !== null) {\r\n                cancelAnimationFrame(this.timerId);\r\n                this.timerId = null;\r\n            }\r\n            this.queue = [];\r\n        };\r\n        AsyncQueue.prototype.startQueue = function () {\r\n            var _this = this;\r\n            if (this.timerId) {\r\n                return;\r\n            }\r\n            this.timerId = requestAnimationFrame(function () {\r\n                _this.timerId = null;\r\n                var start = Date.now();\r\n                var cb;\r\n                while ((cb = _this.queue.shift())) {\r\n                    cb();\r\n                    if (Date.now() - start >= _this.frameDuration) {\r\n                        _this.startQueue();\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        return AsyncQueue;\r\n    })();\r\n\r\n    var imageManager = new AsyncQueue();\r\n    function getImageDetails(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [\r\n                    2,\r\n                    new Promise(function (resolve, reject) {\r\n                        return __awaiter(_this, void 0, void 0, function () {\r\n                            var dataURL, error_1, image_1, error_2;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        if (!url.startsWith(\"data:\"))\r\n                                            return [3, 1];\r\n                                        dataURL = url;\r\n                                        return [3, 4];\r\n                                    case 1:\r\n                                        _a.trys.push([1, 3, , 4]);\r\n                                        return [4, getImageDataURL(url)];\r\n                                    case 2:\r\n                                        dataURL = _a.sent();\r\n                                        return [3, 4];\r\n                                    case 3:\r\n                                        error_1 = _a.sent();\r\n                                        reject(error_1);\r\n                                        return [2];\r\n                                    case 4:\r\n                                        _a.trys.push([4, 6, , 7]);\r\n                                        return [4, urlToImage(dataURL)];\r\n                                    case 5:\r\n                                        image_1 = _a.sent();\r\n                                        imageManager.addToQueue(function () {\r\n                                            resolve(\r\n                                                __assign(\r\n                                                    {\r\n                                                        src: url,\r\n                                                        dataURL: dataURL,\r\n                                                        width: image_1.naturalWidth,\r\n                                                        height: image_1.naturalHeight\r\n                                                    },\r\n                                                    analyzeImage(image_1)\r\n                                                )\r\n                                            );\r\n                                        });\r\n                                        return [3, 7];\r\n                                    case 6:\r\n                                        error_2 = _a.sent();\r\n                                        reject(error_2);\r\n                                        return [3, 7];\r\n                                    case 7:\r\n                                        return [2];\r\n                                }\r\n                            });\r\n                        });\r\n                    })\r\n                ];\r\n            });\r\n        });\r\n    }\r\n    function getImageDataURL(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var parsedURL;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        parsedURL = new URL(url);\r\n                        if (!(parsedURL.origin === location.origin))\r\n                            return [3, 2];\r\n                        return [4, loadAsDataURL(url)];\r\n                    case 1:\r\n                        return [2, _a.sent()];\r\n                    case 2:\r\n                        return [\r\n                            4,\r\n                            bgFetch({url: url, responseType: \"data-url\"})\r\n                        ];\r\n                    case 3:\r\n                        return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function urlToImage(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [\r\n                    2,\r\n                    new Promise(function (resolve, reject) {\r\n                        var image = new Image();\r\n                        image.onload = function () {\r\n                            return resolve(image);\r\n                        };\r\n                        image.onerror = function () {\r\n                            return reject(\"Unable to load image \".concat(url));\r\n                        };\r\n                        image.src = url;\r\n                    })\r\n                ];\r\n            });\r\n        });\r\n    }\r\n    var MAX_ANALIZE_PIXELS_COUNT = 32 * 32;\r\n    var canvas;\r\n    var context;\r\n    function createCanvas() {\r\n        var maxWidth = MAX_ANALIZE_PIXELS_COUNT;\r\n        var maxHeight = MAX_ANALIZE_PIXELS_COUNT;\r\n        canvas = document.createElement(\"canvas\");\r\n        canvas.width = maxWidth;\r\n        canvas.height = maxHeight;\r\n        context = canvas.getContext(\"2d\");\r\n        context.imageSmoothingEnabled = false;\r\n    }\r\n    function removeCanvas() {\r\n        canvas = null;\r\n        context = null;\r\n    }\r\n    var MAX_IMAGE_SIZE = 5 * 1024 * 1024;\r\n    function analyzeImage(image) {\r\n        if (!canvas) {\r\n            createCanvas();\r\n        }\r\n        var naturalWidth = image.naturalWidth,\r\n            naturalHeight = image.naturalHeight;\r\n        if (naturalHeight === 0 || naturalWidth === 0) {\r\n            logWarn(\"logWarn(Image is empty \".concat(image.currentSrc, \")\"));\r\n            return null;\r\n        }\r\n        var size = naturalWidth * naturalHeight * 4;\r\n        if (size > MAX_IMAGE_SIZE) {\r\n            return {\r\n                isDark: false,\r\n                isLight: false,\r\n                isTransparent: false,\r\n                isLarge: false,\r\n                isTooLarge: true\r\n            };\r\n        }\r\n        var naturalPixelsCount = naturalWidth * naturalHeight;\r\n        var k = Math.min(\r\n            1,\r\n            Math.sqrt(MAX_ANALIZE_PIXELS_COUNT / naturalPixelsCount)\r\n        );\r\n        var width = Math.ceil(naturalWidth * k);\r\n        var height = Math.ceil(naturalHeight * k);\r\n        context.clearRect(0, 0, width, height);\r\n        context.drawImage(\r\n            image,\r\n            0,\r\n            0,\r\n            naturalWidth,\r\n            naturalHeight,\r\n            0,\r\n            0,\r\n            width,\r\n            height\r\n        );\r\n        var imageData = context.getImageData(0, 0, width, height);\r\n        var d = imageData.data;\r\n        var TRANSPARENT_ALPHA_THRESHOLD = 0.05;\r\n        var DARK_LIGHTNESS_THRESHOLD = 0.4;\r\n        var LIGHT_LIGHTNESS_THRESHOLD = 0.7;\r\n        var transparentPixelsCount = 0;\r\n        var darkPixelsCount = 0;\r\n        var lightPixelsCount = 0;\r\n        var i, x, y;\r\n        var r, g, b, a;\r\n        var l;\r\n        for (y = 0; y < height; y++) {\r\n            for (x = 0; x < width; x++) {\r\n                i = 4 * (y * width + x);\r\n                r = d[i + 0];\r\n                g = d[i + 1];\r\n                b = d[i + 2];\r\n                a = d[i + 3];\r\n                if (a / 255 < TRANSPARENT_ALPHA_THRESHOLD) {\r\n                    transparentPixelsCount++;\r\n                } else {\r\n                    l = getSRGBLightness(r, g, b);\r\n                    if (l < DARK_LIGHTNESS_THRESHOLD) {\r\n                        darkPixelsCount++;\r\n                    }\r\n                    if (l > LIGHT_LIGHTNESS_THRESHOLD) {\r\n                        lightPixelsCount++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var totalPixelsCount = width * height;\r\n        var opaquePixelsCount = totalPixelsCount - transparentPixelsCount;\r\n        var DARK_IMAGE_THRESHOLD = 0.7;\r\n        var LIGHT_IMAGE_THRESHOLD = 0.7;\r\n        var TRANSPARENT_IMAGE_THRESHOLD = 0.1;\r\n        var LARGE_IMAGE_PIXELS_COUNT = 800 * 600;\r\n        return {\r\n            isDark: darkPixelsCount / opaquePixelsCount >= DARK_IMAGE_THRESHOLD,\r\n            isLight:\r\n                lightPixelsCount / opaquePixelsCount >= LIGHT_IMAGE_THRESHOLD,\r\n            isTransparent:\r\n                transparentPixelsCount / totalPixelsCount >=\r\n                TRANSPARENT_IMAGE_THRESHOLD,\r\n            isLarge: naturalPixelsCount >= LARGE_IMAGE_PIXELS_COUNT,\r\n            isTooLarge: false\r\n        };\r\n    }\r\n    function getFilteredImageDataURL(_a, theme) {\r\n        var dataURL = _a.dataURL,\r\n            width = _a.width,\r\n            height = _a.height;\r\n        var matrix = getSVGFilterMatrixValue(theme);\r\n        var svg = [\r\n            '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"'\r\n                .concat(width, '\" height=\"')\r\n                .concat(height, '\">'),\r\n            \"<defs>\",\r\n            '<filter id=\"darkreader-image-filter\">',\r\n            '<feColorMatrix type=\"matrix\" values=\"'.concat(matrix, '\" />'),\r\n            \"</filter>\",\r\n            \"</defs>\",\r\n            '<image width=\"'\r\n                .concat(width, '\" height=\"')\r\n                .concat(\r\n                    height,\r\n                    '\" filter=\"url(#darkreader-image-filter)\" xlink:href=\"'\r\n                )\r\n                .concat(dataURL, '\" />'),\r\n            \"</svg>\"\r\n        ].join(\"\");\r\n        return \"data:image/svg+xml;base64,\".concat(btoa(svg));\r\n    }\r\n    function cleanImageProcessingCache() {\r\n        imageManager && imageManager.stopQueue();\r\n        removeCanvas();\r\n    }\r\n\r\n    var gradientLength = \"gradient\".length;\r\n    var conicGradient = \"conic-\";\r\n    var conicGradientLength = conicGradient.length;\r\n    var radialGradient = \"radial-\";\r\n    var linearGradient = \"linear-\";\r\n    function parseGradient(value) {\r\n        var result = [];\r\n        var index = 0;\r\n        var startIndex = conicGradient.length;\r\n        var _loop_1 = function () {\r\n            var typeGradient;\r\n            [linearGradient, radialGradient, conicGradient].find(function (\r\n                possibleType\r\n            ) {\r\n                if (index - possibleType.length >= 0) {\r\n                    var possibleGradient = value.substring(\r\n                        index - possibleType.length,\r\n                        index\r\n                    );\r\n                    if (possibleGradient === possibleType) {\r\n                        if (\r\n                            value.slice(\r\n                                index - possibleType.length - 10,\r\n                                index - possibleType.length - 1\r\n                            ) === \"repeating\"\r\n                        ) {\r\n                            typeGradient = \"repeating-\".concat(\r\n                                possibleType,\r\n                                \"gradient\"\r\n                            );\r\n                            return true;\r\n                        }\r\n                        if (\r\n                            value.slice(\r\n                                index - possibleType.length - 8,\r\n                                index - possibleType.length - 1\r\n                            ) === \"-webkit\"\r\n                        ) {\r\n                            typeGradient = \"-webkit-\".concat(\r\n                                possibleType,\r\n                                \"gradient\"\r\n                            );\r\n                            return true;\r\n                        }\r\n                        typeGradient = \"\".concat(possibleType, \"gradient\");\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n            if (!typeGradient) {\r\n                return \"break\";\r\n            }\r\n            var _a = getParenthesesRange(value, index + gradientLength),\r\n                start = _a.start,\r\n                end = _a.end;\r\n            var match = value.substring(start + 1, end - 1);\r\n            startIndex = end + 1 + conicGradientLength;\r\n            result.push({\r\n                typeGradient: typeGradient,\r\n                match: match,\r\n                offset: typeGradient.length + 2,\r\n                index: index - typeGradient.length + gradientLength,\r\n                hasComma: true\r\n            });\r\n        };\r\n        while ((index = value.indexOf(\"gradient\", startIndex)) !== -1) {\r\n            var state_1 = _loop_1();\r\n            if (state_1 === \"break\") break;\r\n        }\r\n        if (result.length) {\r\n            result[result.length - 1].hasComma = false;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function getPriority(ruleStyle, property) {\r\n        return Boolean(ruleStyle && ruleStyle.getPropertyPriority(property));\r\n    }\r\n    function getModifiableCSSDeclaration(\r\n        property,\r\n        value,\r\n        rule,\r\n        variablesStore,\r\n        ignoreImageSelectors,\r\n        isCancelled\r\n    ) {\r\n        if (property.startsWith(\"--\")) {\r\n            var modifier = getVariableModifier(\r\n                variablesStore,\r\n                property,\r\n                value,\r\n                rule,\r\n                ignoreImageSelectors,\r\n                isCancelled\r\n            );\r\n            if (modifier) {\r\n                return {\r\n                    property: property,\r\n                    value: modifier,\r\n                    important: getPriority(rule.style, property),\r\n                    sourceValue: value\r\n                };\r\n            }\r\n        } else if (value.includes(\"var(\")) {\r\n            var modifier = getVariableDependantModifier(\r\n                variablesStore,\r\n                property,\r\n                value\r\n            );\r\n            if (modifier) {\r\n                return {\r\n                    property: property,\r\n                    value: modifier,\r\n                    important: getPriority(rule.style, property),\r\n                    sourceValue: value\r\n                };\r\n            }\r\n        } else if (property === \"color-scheme\") {\r\n            return null;\r\n        } else if (\r\n            (property.includes(\"color\") &&\r\n                property !== \"-webkit-print-color-adjust\") ||\r\n            property === \"fill\" ||\r\n            property === \"stroke\" ||\r\n            property === \"stop-color\"\r\n        ) {\r\n            var modifier = getColorModifier(property, value, rule);\r\n            if (modifier) {\r\n                return {\r\n                    property: property,\r\n                    value: modifier,\r\n                    important: getPriority(rule.style, property),\r\n                    sourceValue: value\r\n                };\r\n            }\r\n        } else if (\r\n            property === \"background-image\" ||\r\n            property === \"list-style-image\"\r\n        ) {\r\n            var modifier = getBgImageModifier(\r\n                value,\r\n                rule,\r\n                ignoreImageSelectors,\r\n                isCancelled\r\n            );\r\n            if (modifier) {\r\n                return {\r\n                    property: property,\r\n                    value: modifier,\r\n                    important: getPriority(rule.style, property),\r\n                    sourceValue: value\r\n                };\r\n            }\r\n        } else if (property.includes(\"shadow\")) {\r\n            var modifier = getShadowModifier(value);\r\n            if (modifier) {\r\n                return {\r\n                    property: property,\r\n                    value: modifier,\r\n                    important: getPriority(rule.style, property),\r\n                    sourceValue: value\r\n                };\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    function joinSelectors() {\r\n        var selectors = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            selectors[_i] = arguments[_i];\r\n        }\r\n        return selectors.filter(Boolean).join(\", \");\r\n    }\r\n    function getModifiedUserAgentStyle(theme, isIFrame, styleSystemControls) {\r\n        var lines = [];\r\n        if (!isIFrame) {\r\n            lines.push(\"html {\");\r\n            lines.push(\r\n                \"    background-color: \".concat(\r\n                    modifyBackgroundColor({r: 255, g: 255, b: 255}, theme),\r\n                    \" !important;\"\r\n                )\r\n            );\r\n            lines.push(\"}\");\r\n        }\r\n        if (isCSSColorSchemePropSupported) {\r\n            lines.push(\"html {\");\r\n            lines.push(\r\n                \"    color-scheme: \".concat(\r\n                    theme.mode === 1 ? \"dark\" : \"dark light\",\r\n                    \" !important;\"\r\n                )\r\n            );\r\n            lines.push(\"}\");\r\n        }\r\n        var bgSelectors = joinSelectors(\r\n            isIFrame ? \"\" : \"html, body\",\r\n            styleSystemControls ? \"input, textarea, select, button, dialog\" : \"\"\r\n        );\r\n        if (bgSelectors) {\r\n            lines.push(\"\".concat(bgSelectors, \" {\"));\r\n            lines.push(\r\n                \"    background-color: \".concat(\r\n                    modifyBackgroundColor({r: 255, g: 255, b: 255}, theme),\r\n                    \";\"\r\n                )\r\n            );\r\n            lines.push(\"}\");\r\n        }\r\n        lines.push(\r\n            \"\".concat(\r\n                joinSelectors(\r\n                    \"html, body\",\r\n                    styleSystemControls ? \"input, textarea, select, button\" : \"\"\r\n                ),\r\n                \" {\"\r\n            )\r\n        );\r\n        lines.push(\r\n            \"    border-color: \".concat(\r\n                modifyBorderColor({r: 76, g: 76, b: 76}, theme),\r\n                \";\"\r\n            )\r\n        );\r\n        lines.push(\r\n            \"    color: \".concat(\r\n                modifyForegroundColor({r: 0, g: 0, b: 0}, theme),\r\n                \";\"\r\n            )\r\n        );\r\n        lines.push(\"}\");\r\n        lines.push(\"a {\");\r\n        lines.push(\r\n            \"    color: \".concat(\r\n                modifyForegroundColor({r: 0, g: 64, b: 255}, theme),\r\n                \";\"\r\n            )\r\n        );\r\n        lines.push(\"}\");\r\n        lines.push(\"table {\");\r\n        lines.push(\r\n            \"    border-color: \".concat(\r\n                modifyBorderColor({r: 128, g: 128, b: 128}, theme),\r\n                \";\"\r\n            )\r\n        );\r\n        lines.push(\"}\");\r\n        lines.push(\"::placeholder {\");\r\n        lines.push(\r\n            \"    color: \".concat(\r\n                modifyForegroundColor({r: 169, g: 169, b: 169}, theme),\r\n                \";\"\r\n            )\r\n        );\r\n        lines.push(\"}\");\r\n        lines.push(\"input:-webkit-autofill,\");\r\n        lines.push(\"textarea:-webkit-autofill,\");\r\n        lines.push(\"select:-webkit-autofill {\");\r\n        lines.push(\r\n            \"    background-color: \".concat(\r\n                modifyBackgroundColor({r: 250, g: 255, b: 189}, theme),\r\n                \" !important;\"\r\n            )\r\n        );\r\n        lines.push(\r\n            \"    color: \".concat(\r\n                modifyForegroundColor({r: 0, g: 0, b: 0}, theme),\r\n                \" !important;\"\r\n            )\r\n        );\r\n        lines.push(\"}\");\r\n        if (theme.scrollbarColor) {\r\n            lines.push(getModifiedScrollbarStyle(theme));\r\n        }\r\n        if (theme.selectionColor) {\r\n            lines.push(getModifiedSelectionStyle(theme));\r\n        }\r\n        return lines.join(\"\\n\");\r\n    }\r\n    function getSelectionColor(theme) {\r\n        var backgroundColorSelection;\r\n        var foregroundColorSelection;\r\n        if (theme.selectionColor === \"auto\") {\r\n            backgroundColorSelection = modifyBackgroundColor(\r\n                {r: 0, g: 96, b: 212},\r\n                __assign(__assign({}, theme), {grayscale: 0})\r\n            );\r\n            foregroundColorSelection = modifyForegroundColor(\r\n                {r: 255, g: 255, b: 255},\r\n                __assign(__assign({}, theme), {grayscale: 0})\r\n            );\r\n        } else {\r\n            var rgb = parseColorWithCache(theme.selectionColor);\r\n            var hsl = rgbToHSL(rgb);\r\n            backgroundColorSelection = theme.selectionColor;\r\n            if (hsl.l < 0.5) {\r\n                foregroundColorSelection = \"#FFF\";\r\n            } else {\r\n                foregroundColorSelection = \"#000\";\r\n            }\r\n        }\r\n        return {\r\n            backgroundColorSelection: backgroundColorSelection,\r\n            foregroundColorSelection: foregroundColorSelection\r\n        };\r\n    }\r\n    function getModifiedSelectionStyle(theme) {\r\n        var lines = [];\r\n        var modifiedSelectionColor = getSelectionColor(theme);\r\n        var backgroundColorSelection =\r\n            modifiedSelectionColor.backgroundColorSelection;\r\n        var foregroundColorSelection =\r\n            modifiedSelectionColor.foregroundColorSelection;\r\n        [\"::selection\", \"::-moz-selection\"].forEach(function (selection) {\r\n            lines.push(\"\".concat(selection, \" {\"));\r\n            lines.push(\r\n                \"    background-color: \".concat(\r\n                    backgroundColorSelection,\r\n                    \" !important;\"\r\n                )\r\n            );\r\n            lines.push(\r\n                \"    color: \".concat(foregroundColorSelection, \" !important;\")\r\n            );\r\n            lines.push(\"}\");\r\n        });\r\n        return lines.join(\"\\n\");\r\n    }\r\n    function getModifiedScrollbarStyle(theme) {\r\n        var lines = [];\r\n        var colorTrack;\r\n        var colorIcons;\r\n        var colorThumb;\r\n        var colorThumbHover;\r\n        var colorThumbActive;\r\n        var colorCorner;\r\n        if (theme.scrollbarColor === \"auto\") {\r\n            colorTrack = modifyBackgroundColor({r: 241, g: 241, b: 241}, theme);\r\n            colorIcons = modifyForegroundColor({r: 96, g: 96, b: 96}, theme);\r\n            colorThumb = modifyBackgroundColor({r: 176, g: 176, b: 176}, theme);\r\n            colorThumbHover = modifyBackgroundColor(\r\n                {r: 144, g: 144, b: 144},\r\n                theme\r\n            );\r\n            colorThumbActive = modifyBackgroundColor(\r\n                {r: 96, g: 96, b: 96},\r\n                theme\r\n            );\r\n            colorCorner = modifyBackgroundColor(\r\n                {r: 255, g: 255, b: 255},\r\n                theme\r\n            );\r\n        } else {\r\n            var rgb = parseColorWithCache(theme.scrollbarColor);\r\n            var hsl_1 = rgbToHSL(rgb);\r\n            var isLight = hsl_1.l > 0.5;\r\n            var lighten = function (lighter) {\r\n                return __assign(__assign({}, hsl_1), {\r\n                    l: clamp(hsl_1.l + lighter, 0, 1)\r\n                });\r\n            };\r\n            var darken = function (darker) {\r\n                return __assign(__assign({}, hsl_1), {\r\n                    l: clamp(hsl_1.l - darker, 0, 1)\r\n                });\r\n            };\r\n            colorTrack = hslToString(darken(0.4));\r\n            colorIcons = hslToString(isLight ? darken(0.4) : lighten(0.4));\r\n            colorThumb = hslToString(hsl_1);\r\n            colorThumbHover = hslToString(lighten(0.1));\r\n            colorThumbActive = hslToString(lighten(0.2));\r\n        }\r\n        lines.push(\"::-webkit-scrollbar {\");\r\n        lines.push(\"    background-color: \".concat(colorTrack, \";\"));\r\n        lines.push(\"    color: \".concat(colorIcons, \";\"));\r\n        lines.push(\"}\");\r\n        lines.push(\"::-webkit-scrollbar-thumb {\");\r\n        lines.push(\"    background-color: \".concat(colorThumb, \";\"));\r\n        lines.push(\"}\");\r\n        lines.push(\"::-webkit-scrollbar-thumb:hover {\");\r\n        lines.push(\"    background-color: \".concat(colorThumbHover, \";\"));\r\n        lines.push(\"}\");\r\n        lines.push(\"::-webkit-scrollbar-thumb:active {\");\r\n        lines.push(\"    background-color: \".concat(colorThumbActive, \";\"));\r\n        lines.push(\"}\");\r\n        lines.push(\"::-webkit-scrollbar-corner {\");\r\n        lines.push(\"    background-color: \".concat(colorCorner, \";\"));\r\n        lines.push(\"}\");\r\n        if (isFirefox) {\r\n            lines.push(\"* {\");\r\n            lines.push(\r\n                \"    scrollbar-color: \"\r\n                    .concat(colorThumb, \" \")\r\n                    .concat(colorTrack, \";\")\r\n            );\r\n            lines.push(\"}\");\r\n        }\r\n        return lines.join(\"\\n\");\r\n    }\r\n    function getModifiedFallbackStyle(filter, _a) {\r\n        var strict = _a.strict;\r\n        var lines = [];\r\n        var isMicrosoft = [\"microsoft.com\", \"docs.microsoft.com\"].includes(\r\n            location.hostname\r\n        );\r\n        lines.push(\r\n            \"html, body, \".concat(\r\n                strict\r\n                    ? \"body :not(iframe)\".concat(\r\n                          isMicrosoft\r\n                              ? ':not(div[style^=\"position:absolute;top:0;left:-\"]'\r\n                              : \"\"\r\n                      )\r\n                    : \"body > :not(iframe)\",\r\n                \" {\"\r\n            )\r\n        );\r\n        lines.push(\r\n            \"    background-color: \".concat(\r\n                modifyBackgroundColor({r: 255, g: 255, b: 255}, filter),\r\n                \" !important;\"\r\n            )\r\n        );\r\n        lines.push(\r\n            \"    border-color: \".concat(\r\n                modifyBorderColor({r: 64, g: 64, b: 64}, filter),\r\n                \" !important;\"\r\n            )\r\n        );\r\n        lines.push(\r\n            \"    color: \".concat(\r\n                modifyForegroundColor({r: 0, g: 0, b: 0}, filter),\r\n                \" !important;\"\r\n            )\r\n        );\r\n        lines.push(\"}\");\r\n        return lines.join(\"\\n\");\r\n    }\r\n    var unparsableColors = new Set([\r\n        \"inherit\",\r\n        \"transparent\",\r\n        \"initial\",\r\n        \"currentcolor\",\r\n        \"none\",\r\n        \"unset\"\r\n    ]);\r\n    function getColorModifier(prop, value, rule) {\r\n        if (unparsableColors.has(value.toLowerCase())) {\r\n            return value;\r\n        }\r\n        var rgb = parseColorWithCache(value);\r\n        if (!rgb) {\r\n            return null;\r\n        }\r\n        if (prop.includes(\"background\")) {\r\n            if (\r\n                (rule.style.webkitMaskImage &&\r\n                    rule.style.webkitMaskImage !== \"none\") ||\r\n                (rule.style.webkitMask &&\r\n                    !rule.style.webkitMask.startsWith(\"none\")) ||\r\n                (rule.style.mask && rule.style.mask !== \"none\") ||\r\n                (rule.style.getPropertyValue(\"mask-image\") &&\r\n                    rule.style.getPropertyValue(\"mask-image\") !== \"none\")\r\n            ) {\r\n                return function (filter) {\r\n                    return modifyForegroundColor(rgb, filter);\r\n                };\r\n            }\r\n            return function (filter) {\r\n                return modifyBackgroundColor(rgb, filter);\r\n            };\r\n        }\r\n        if (prop.includes(\"border\") || prop.includes(\"outline\")) {\r\n            return function (filter) {\r\n                return modifyBorderColor(rgb, filter);\r\n            };\r\n        }\r\n        return function (filter) {\r\n            return modifyForegroundColor(rgb, filter);\r\n        };\r\n    }\r\n    var imageDetailsCache = new Map();\r\n    var awaitingForImageLoading = new Map();\r\n    function shouldIgnoreImage(selectorText, selectors) {\r\n        if (!selectorText || selectors.length === 0) {\r\n            return false;\r\n        }\r\n        if (\r\n            selectors.some(function (s) {\r\n                return s === \"*\";\r\n            })\r\n        ) {\r\n            return true;\r\n        }\r\n        var ruleSelectors = selectorText.split(/,\\s*/g);\r\n        var _loop_1 = function (i) {\r\n            var ignoredSelector = selectors[i];\r\n            if (\r\n                ruleSelectors.some(function (s) {\r\n                    return s === ignoredSelector;\r\n                })\r\n            ) {\r\n                return {value: true};\r\n            }\r\n        };\r\n        for (var i = 0; i < selectors.length; i++) {\r\n            var state_1 = _loop_1(i);\r\n            if (typeof state_1 === \"object\") return state_1.value;\r\n        }\r\n        return false;\r\n    }\r\n    function getBgImageModifier(\r\n        value,\r\n        rule,\r\n        ignoreImageSelectors,\r\n        isCancelled\r\n    ) {\r\n        var _this = this;\r\n        try {\r\n            var gradients = parseGradient(value);\r\n            var urls = getMatches(cssURLRegex, value);\r\n            if (urls.length === 0 && gradients.length === 0) {\r\n                return value;\r\n            }\r\n            var getIndices = function (matches) {\r\n                var index = 0;\r\n                return matches.map(function (match) {\r\n                    var valueIndex = value.indexOf(match, index);\r\n                    index = valueIndex + match.length;\r\n                    return {match: match, index: valueIndex};\r\n                });\r\n            };\r\n            var matches_1 = gradients\r\n                .map(function (i) {\r\n                    return __assign({type: \"gradient\"}, i);\r\n                })\r\n                .concat(\r\n                    getIndices(urls).map(function (i) {\r\n                        return __assign({type: \"url\", offset: 0}, i);\r\n                    })\r\n                )\r\n                .sort(function (a, b) {\r\n                    return a.index > b.index ? 1 : -1;\r\n                });\r\n            var getGradientModifier_1 = function (gradient) {\r\n                var typeGradient = gradient.typeGradient,\r\n                    match = gradient.match,\r\n                    hasComma = gradient.hasComma;\r\n                var partsRegex =\r\n                    /([^\\(\\),]+(\\([^\\(\\)]*(\\([^\\(\\)]*\\)*[^\\(\\)]*)?\\))?([^\\(\\), ]|( (?!calc)))*),?/g;\r\n                var colorStopRegex =\r\n                    /^(from|color-stop|to)\\(([^\\(\\)]*?,\\s*)?(.*?)\\)$/;\r\n                var parts = getMatches(partsRegex, match, 1).map(function (\r\n                    part\r\n                ) {\r\n                    part = part.trim();\r\n                    var rgb = parseColorWithCache(part);\r\n                    if (rgb) {\r\n                        return function (filter) {\r\n                            return modifyGradientColor(rgb, filter);\r\n                        };\r\n                    }\r\n                    var space = part.lastIndexOf(\" \");\r\n                    rgb = parseColorWithCache(part.substring(0, space));\r\n                    if (rgb) {\r\n                        return function (filter) {\r\n                            return \"\"\r\n                                .concat(modifyGradientColor(rgb, filter), \" \")\r\n                                .concat(part.substring(space + 1));\r\n                        };\r\n                    }\r\n                    var colorStopMatch = part.match(colorStopRegex);\r\n                    if (colorStopMatch) {\r\n                        rgb = parseColorWithCache(colorStopMatch[3]);\r\n                        if (rgb) {\r\n                            return function (filter) {\r\n                                return \"\"\r\n                                    .concat(colorStopMatch[1], \"(\")\r\n                                    .concat(\r\n                                        colorStopMatch[2]\r\n                                            ? \"\".concat(colorStopMatch[2], \", \")\r\n                                            : \"\"\r\n                                    )\r\n                                    .concat(\r\n                                        modifyGradientColor(rgb, filter),\r\n                                        \")\"\r\n                                    );\r\n                            };\r\n                        }\r\n                    }\r\n                    return function () {\r\n                        return part;\r\n                    };\r\n                });\r\n                return function (filter) {\r\n                    return \"\"\r\n                        .concat(typeGradient, \"(\")\r\n                        .concat(\r\n                            parts\r\n                                .map(function (modify) {\r\n                                    return modify(filter);\r\n                                })\r\n                                .join(\", \"),\r\n                            \")\"\r\n                        )\r\n                        .concat(hasComma ? \", \" : \"\");\r\n                };\r\n            };\r\n            var getURLModifier_1 = function (urlValue) {\r\n                var _a;\r\n                if (\r\n                    shouldIgnoreImage(rule.selectorText, ignoreImageSelectors)\r\n                ) {\r\n                    return null;\r\n                }\r\n                var url = getCSSURLValue(urlValue);\r\n                var isURLEmpty = url.length === 0;\r\n                var parentStyleSheet = rule.parentStyleSheet;\r\n                var baseURL =\r\n                    parentStyleSheet && parentStyleSheet.href\r\n                        ? getCSSBaseBath(parentStyleSheet.href)\r\n                        : ((_a = parentStyleSheet.ownerNode) === null ||\r\n                          _a === void 0\r\n                              ? void 0\r\n                              : _a.baseURI) || location.origin;\r\n                url = getAbsoluteURL(baseURL, url);\r\n                var absoluteValue = 'url(\"'.concat(url, '\")');\r\n                return function (filter) {\r\n                    return __awaiter(_this, void 0, void 0, function () {\r\n                        var imageDetails, awaiters_1, err_1, bgImageValue;\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0:\r\n                                    if (isURLEmpty) {\r\n                                        return [2, \"url('')\"];\r\n                                    }\r\n                                    if (!imageDetailsCache.has(url))\r\n                                        return [3, 1];\r\n                                    imageDetails = imageDetailsCache.get(url);\r\n                                    return [3, 7];\r\n                                case 1:\r\n                                    _a.trys.push([1, 6, , 7]);\r\n                                    if (!awaitingForImageLoading.has(url))\r\n                                        return [3, 3];\r\n                                    awaiters_1 =\r\n                                        awaitingForImageLoading.get(url);\r\n                                    return [\r\n                                        4,\r\n                                        new Promise(function (resolve) {\r\n                                            return awaiters_1.push(resolve);\r\n                                        })\r\n                                    ];\r\n                                case 2:\r\n                                    imageDetails = _a.sent();\r\n                                    if (!imageDetails) {\r\n                                        return [2, null];\r\n                                    }\r\n                                    return [3, 5];\r\n                                case 3:\r\n                                    awaitingForImageLoading.set(url, []);\r\n                                    return [4, getImageDetails(url)];\r\n                                case 4:\r\n                                    imageDetails = _a.sent();\r\n                                    imageDetailsCache.set(url, imageDetails);\r\n                                    awaitingForImageLoading\r\n                                        .get(url)\r\n                                        .forEach(function (resolve) {\r\n                                            return resolve(imageDetails);\r\n                                        });\r\n                                    awaitingForImageLoading.delete(url);\r\n                                    _a.label = 5;\r\n                                case 5:\r\n                                    if (isCancelled()) {\r\n                                        return [2, null];\r\n                                    }\r\n                                    return [3, 7];\r\n                                case 6:\r\n                                    err_1 = _a.sent();\r\n                                    logWarn(err_1);\r\n                                    if (awaitingForImageLoading.has(url)) {\r\n                                        awaitingForImageLoading\r\n                                            .get(url)\r\n                                            .forEach(function (resolve) {\r\n                                                return resolve(null);\r\n                                            });\r\n                                        awaitingForImageLoading.delete(url);\r\n                                    }\r\n                                    return [2, absoluteValue];\r\n                                case 7:\r\n                                    bgImageValue =\r\n                                        getBgImageValue_1(\r\n                                            imageDetails,\r\n                                            filter\r\n                                        ) || absoluteValue;\r\n                                    return [2, bgImageValue];\r\n                            }\r\n                        });\r\n                    });\r\n                };\r\n            };\r\n            var getBgImageValue_1 = function (imageDetails, filter) {\r\n                var isDark = imageDetails.isDark,\r\n                    isLight = imageDetails.isLight,\r\n                    isTransparent = imageDetails.isTransparent,\r\n                    isLarge = imageDetails.isLarge,\r\n                    isTooLarge = imageDetails.isTooLarge,\r\n                    width = imageDetails.width;\r\n                var result;\r\n                if (isTooLarge) {\r\n                    result = 'url(\"'.concat(imageDetails.src, '\")');\r\n                } else if (\r\n                    isDark &&\r\n                    isTransparent &&\r\n                    filter.mode === 1 &&\r\n                    !isLarge &&\r\n                    width > 2\r\n                ) {\r\n                    logInfo(\"Inverting dark image \".concat(imageDetails.src));\r\n                    var inverted = getFilteredImageDataURL(\r\n                        imageDetails,\r\n                        __assign(__assign({}, filter), {\r\n                            sepia: clamp(filter.sepia + 10, 0, 100)\r\n                        })\r\n                    );\r\n                    result = 'url(\"'.concat(inverted, '\")');\r\n                } else if (isLight && !isTransparent && filter.mode === 1) {\r\n                    if (isLarge) {\r\n                        result = \"none\";\r\n                    } else {\r\n                        logInfo(\r\n                            \"Dimming light image \".concat(imageDetails.src)\r\n                        );\r\n                        var dimmed = getFilteredImageDataURL(\r\n                            imageDetails,\r\n                            filter\r\n                        );\r\n                        result = 'url(\"'.concat(dimmed, '\")');\r\n                    }\r\n                } else if (filter.mode === 0 && isLight && !isLarge) {\r\n                    logInfo(\r\n                        \"Applying filter to image \".concat(imageDetails.src)\r\n                    );\r\n                    var filtered = getFilteredImageDataURL(\r\n                        imageDetails,\r\n                        __assign(__assign({}, filter), {\r\n                            brightness: clamp(filter.brightness - 10, 5, 200),\r\n                            sepia: clamp(filter.sepia + 10, 0, 100)\r\n                        })\r\n                    );\r\n                    result = 'url(\"'.concat(filtered, '\")');\r\n                } else {\r\n                    result = null;\r\n                }\r\n                return result;\r\n            };\r\n            var modifiers_1 = [];\r\n            var matchIndex_1 = 0;\r\n            var prevHasComma_1 = false;\r\n            matches_1.forEach(function (_a, i) {\r\n                var type = _a.type,\r\n                    match = _a.match,\r\n                    index = _a.index,\r\n                    typeGradient = _a.typeGradient,\r\n                    hasComma = _a.hasComma,\r\n                    offset = _a.offset;\r\n                var matchStart = index;\r\n                var prefixStart = matchIndex_1;\r\n                var matchEnd = matchStart + match.length + offset;\r\n                matchIndex_1 = matchEnd;\r\n                if (prefixStart !== matchStart) {\r\n                    if (prevHasComma_1) {\r\n                        modifiers_1.push(function () {\r\n                            var betweenValue = value.substring(\r\n                                prefixStart,\r\n                                matchStart\r\n                            );\r\n                            if (betweenValue[0] === \",\") {\r\n                                betweenValue = betweenValue.substring(1);\r\n                            }\r\n                            return betweenValue;\r\n                        });\r\n                    } else {\r\n                        modifiers_1.push(function () {\r\n                            return value.substring(prefixStart, matchStart);\r\n                        });\r\n                    }\r\n                }\r\n                prevHasComma_1 = hasComma || false;\r\n                if (type === \"url\") {\r\n                    modifiers_1.push(getURLModifier_1(match));\r\n                } else if (type === \"gradient\") {\r\n                    modifiers_1.push(\r\n                        getGradientModifier_1({\r\n                            match: match,\r\n                            index: index,\r\n                            typeGradient: typeGradient,\r\n                            hasComma: hasComma,\r\n                            offset: offset\r\n                        })\r\n                    );\r\n                }\r\n                if (i === matches_1.length - 1) {\r\n                    modifiers_1.push(function () {\r\n                        return value.substring(matchEnd);\r\n                    });\r\n                }\r\n            });\r\n            return function (filter) {\r\n                var results = modifiers_1\r\n                    .filter(Boolean)\r\n                    .map(function (modify) {\r\n                        return modify(filter);\r\n                    });\r\n                if (\r\n                    results.some(function (r) {\r\n                        return r instanceof Promise;\r\n                    })\r\n                ) {\r\n                    return Promise.all(results).then(function (asyncResults) {\r\n                        return asyncResults.filter(Boolean).join(\"\");\r\n                    });\r\n                }\r\n                var combinedResult = results.join(\"\");\r\n                if (combinedResult.endsWith(\", initial\")) {\r\n                    return combinedResult.slice(0, -9);\r\n                }\r\n                return combinedResult;\r\n            };\r\n        } catch (err) {\r\n            return null;\r\n        }\r\n    }\r\n    function getShadowModifierWithInfo(value) {\r\n        try {\r\n            var index_1 = 0;\r\n            var colorMatches_1 = getMatches(\r\n                /(^|\\s)(?!calc)([a-z]+\\(.+?\\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,\r\n                value,\r\n                2\r\n            );\r\n            var notParsed_1 = 0;\r\n            var modifiers_2 = colorMatches_1.map(function (match, i) {\r\n                var prefixIndex = index_1;\r\n                var matchIndex = value.indexOf(match, index_1);\r\n                var matchEnd = matchIndex + match.length;\r\n                index_1 = matchEnd;\r\n                var rgb = parseColorWithCache(match);\r\n                if (!rgb) {\r\n                    notParsed_1++;\r\n                    return function () {\r\n                        return value.substring(prefixIndex, matchEnd);\r\n                    };\r\n                }\r\n                return function (filter) {\r\n                    return \"\"\r\n                        .concat(value.substring(prefixIndex, matchIndex))\r\n                        .concat(modifyShadowColor(rgb, filter))\r\n                        .concat(\r\n                            i === colorMatches_1.length - 1\r\n                                ? value.substring(matchEnd)\r\n                                : \"\"\r\n                        );\r\n                };\r\n            });\r\n            return function (filter) {\r\n                var modified = modifiers_2\r\n                    .map(function (modify) {\r\n                        return modify(filter);\r\n                    })\r\n                    .join(\"\");\r\n                return {\r\n                    matchesLength: colorMatches_1.length,\r\n                    unparseableMatchesLength: notParsed_1,\r\n                    result: modified\r\n                };\r\n            };\r\n        } catch (err) {\r\n            return null;\r\n        }\r\n    }\r\n    function getShadowModifier(value) {\r\n        var shadowModifier = getShadowModifierWithInfo(value);\r\n        if (!shadowModifier) {\r\n            return null;\r\n        }\r\n        return function (theme) {\r\n            return shadowModifier(theme).result;\r\n        };\r\n    }\r\n    function getVariableModifier(\r\n        variablesStore,\r\n        prop,\r\n        value,\r\n        rule,\r\n        ignoredImgSelectors,\r\n        isCancelled\r\n    ) {\r\n        return variablesStore.getModifierForVariable({\r\n            varName: prop,\r\n            sourceValue: value,\r\n            rule: rule,\r\n            ignoredImgSelectors: ignoredImgSelectors,\r\n            isCancelled: isCancelled\r\n        });\r\n    }\r\n    function getVariableDependantModifier(variablesStore, prop, value) {\r\n        return variablesStore.getModifierForVarDependant(prop, value);\r\n    }\r\n    function cleanModificationCache() {\r\n        clearColorModificationCache();\r\n        imageDetailsCache.clear();\r\n        cleanImageProcessingCache();\r\n        awaitingForImageLoading.clear();\r\n    }\r\n\r\n    var VAR_TYPE_BGCOLOR = 1 << 0;\r\n    var VAR_TYPE_TEXTCOLOR = 1 << 1;\r\n    var VAR_TYPE_BORDERCOLOR = 1 << 2;\r\n    var VAR_TYPE_BGIMG = 1 << 3;\r\n    var VariablesStore = (function () {\r\n        function VariablesStore() {\r\n            this.varTypes = new Map();\r\n            this.rulesQueue = [];\r\n            this.definedVars = new Set();\r\n            this.varRefs = new Map();\r\n            this.unknownColorVars = new Set();\r\n            this.unknownBgVars = new Set();\r\n            this.undefinedVars = new Set();\r\n            this.initialVarTypes = new Map();\r\n            this.changedTypeVars = new Set();\r\n            this.typeChangeSubscriptions = new Map();\r\n            this.unstableVarValues = new Map();\r\n        }\r\n        VariablesStore.prototype.clear = function () {\r\n            this.varTypes.clear();\r\n            this.rulesQueue.splice(0);\r\n            this.definedVars.clear();\r\n            this.varRefs.clear();\r\n            this.unknownColorVars.clear();\r\n            this.unknownBgVars.clear();\r\n            this.undefinedVars.clear();\r\n            this.initialVarTypes.clear();\r\n            this.changedTypeVars.clear();\r\n            this.typeChangeSubscriptions.clear();\r\n            this.unstableVarValues.clear();\r\n        };\r\n        VariablesStore.prototype.isVarType = function (varName, typeNum) {\r\n            return (\r\n                this.varTypes.has(varName) &&\r\n                (this.varTypes.get(varName) & typeNum) > 0\r\n            );\r\n        };\r\n        VariablesStore.prototype.addRulesForMatching = function (rules) {\r\n            this.rulesQueue.push(rules);\r\n        };\r\n        VariablesStore.prototype.matchVariablesAndDependants = function () {\r\n            var _this = this;\r\n            this.changedTypeVars.clear();\r\n            this.initialVarTypes = new Map(this.varTypes);\r\n            this.collectRootVariables();\r\n            this.collectVariablesAndVarDep(this.rulesQueue);\r\n            this.rulesQueue.splice(0);\r\n            this.collectRootVarDependants();\r\n            this.varRefs.forEach(function (refs, v) {\r\n                refs.forEach(function (r) {\r\n                    if (_this.varTypes.has(v)) {\r\n                        _this.resolveVariableType(r, _this.varTypes.get(v));\r\n                    }\r\n                });\r\n            });\r\n            this.unknownColorVars.forEach(function (v) {\r\n                if (_this.unknownBgVars.has(v)) {\r\n                    _this.unknownColorVars.delete(v);\r\n                    _this.unknownBgVars.delete(v);\r\n                    _this.resolveVariableType(v, VAR_TYPE_BGCOLOR);\r\n                } else if (\r\n                    _this.isVarType(\r\n                        v,\r\n                        VAR_TYPE_BGCOLOR |\r\n                            VAR_TYPE_TEXTCOLOR |\r\n                            VAR_TYPE_BORDERCOLOR\r\n                    )\r\n                ) {\r\n                    _this.unknownColorVars.delete(v);\r\n                } else {\r\n                    _this.undefinedVars.add(v);\r\n                }\r\n            });\r\n            this.unknownBgVars.forEach(function (v) {\r\n                var hasColor =\r\n                    _this.findVarRef(v, function (ref) {\r\n                        return (\r\n                            _this.unknownColorVars.has(ref) ||\r\n                            _this.isVarType(\r\n                                ref,\r\n                                VAR_TYPE_TEXTCOLOR | VAR_TYPE_BORDERCOLOR\r\n                            )\r\n                        );\r\n                    }) != null;\r\n                if (hasColor) {\r\n                    _this.itarateVarRefs(v, function (ref) {\r\n                        _this.resolveVariableType(ref, VAR_TYPE_BGCOLOR);\r\n                    });\r\n                } else if (\r\n                    _this.isVarType(v, VAR_TYPE_BGCOLOR | VAR_TYPE_BGIMG)\r\n                ) {\r\n                    _this.unknownBgVars.delete(v);\r\n                } else {\r\n                    _this.undefinedVars.add(v);\r\n                }\r\n            });\r\n            this.changedTypeVars.forEach(function (varName) {\r\n                if (_this.typeChangeSubscriptions.has(varName)) {\r\n                    _this.typeChangeSubscriptions\r\n                        .get(varName)\r\n                        .forEach(function (callback) {\r\n                            callback();\r\n                        });\r\n                }\r\n            });\r\n            this.changedTypeVars.clear();\r\n        };\r\n        VariablesStore.prototype.getModifierForVariable = function (options) {\r\n            var _this = this;\r\n            return function (theme) {\r\n                var varName = options.varName,\r\n                    sourceValue = options.sourceValue,\r\n                    rule = options.rule,\r\n                    ignoredImgSelectors = options.ignoredImgSelectors,\r\n                    isCancelled = options.isCancelled;\r\n                var getDeclarations = function () {\r\n                    var declarations = [];\r\n                    var addModifiedValue = function (\r\n                        typeNum,\r\n                        varNameWrapper,\r\n                        colorModifier\r\n                    ) {\r\n                        if (!_this.isVarType(varName, typeNum)) {\r\n                            return;\r\n                        }\r\n                        var property = varNameWrapper(varName);\r\n                        var modifiedValue;\r\n                        if (isVarDependant(sourceValue)) {\r\n                            if (isConstructedColorVar(sourceValue)) {\r\n                                var value = insertVarValues(\r\n                                    sourceValue,\r\n                                    _this.unstableVarValues\r\n                                );\r\n                                if (!value) {\r\n                                    value =\r\n                                        typeNum === VAR_TYPE_BGCOLOR\r\n                                            ? \"#ffffff\"\r\n                                            : \"#000000\";\r\n                                }\r\n                                modifiedValue = colorModifier(value, theme);\r\n                            } else {\r\n                                modifiedValue = replaceCSSVariablesNames(\r\n                                    sourceValue,\r\n                                    function (v) {\r\n                                        return varNameWrapper(v);\r\n                                    },\r\n                                    function (fallback) {\r\n                                        return colorModifier(fallback, theme);\r\n                                    }\r\n                                );\r\n                            }\r\n                        } else {\r\n                            modifiedValue = colorModifier(sourceValue, theme);\r\n                        }\r\n                        declarations.push({\r\n                            property: property,\r\n                            value: modifiedValue\r\n                        });\r\n                    };\r\n                    addModifiedValue(\r\n                        VAR_TYPE_BGCOLOR,\r\n                        wrapBgColorVariableName,\r\n                        tryModifyBgColor\r\n                    );\r\n                    addModifiedValue(\r\n                        VAR_TYPE_TEXTCOLOR,\r\n                        wrapTextColorVariableName,\r\n                        tryModifyTextColor\r\n                    );\r\n                    addModifiedValue(\r\n                        VAR_TYPE_BORDERCOLOR,\r\n                        wrapBorderColorVariableName,\r\n                        tryModifyBorderColor\r\n                    );\r\n                    if (_this.isVarType(varName, VAR_TYPE_BGIMG)) {\r\n                        var property = wrapBgImgVariableName(varName);\r\n                        var modifiedValue = sourceValue;\r\n                        if (isVarDependant(sourceValue)) {\r\n                            modifiedValue = replaceCSSVariablesNames(\r\n                                sourceValue,\r\n                                function (v) {\r\n                                    return wrapBgColorVariableName(v);\r\n                                },\r\n                                function (fallback) {\r\n                                    return tryModifyBgColor(fallback, theme);\r\n                                }\r\n                            );\r\n                        }\r\n                        var bgModifier = getBgImageModifier(\r\n                            modifiedValue,\r\n                            rule,\r\n                            ignoredImgSelectors,\r\n                            isCancelled\r\n                        );\r\n                        modifiedValue =\r\n                            typeof bgModifier === \"function\"\r\n                                ? bgModifier(theme)\r\n                                : bgModifier;\r\n                        declarations.push({\r\n                            property: property,\r\n                            value: modifiedValue\r\n                        });\r\n                    }\r\n                    return declarations;\r\n                };\r\n                var callbacks = new Set();\r\n                var addListener = function (onTypeChange) {\r\n                    var callback = function () {\r\n                        var decs = getDeclarations();\r\n                        onTypeChange(decs);\r\n                    };\r\n                    callbacks.add(callback);\r\n                    _this.subscribeForVarTypeChange(varName, callback);\r\n                };\r\n                var removeListeners = function () {\r\n                    callbacks.forEach(function (callback) {\r\n                        _this.unsubscribeFromVariableTypeChanges(\r\n                            varName,\r\n                            callback\r\n                        );\r\n                    });\r\n                };\r\n                return {\r\n                    declarations: getDeclarations(),\r\n                    onTypeChange: {\r\n                        addListener: addListener,\r\n                        removeListeners: removeListeners\r\n                    }\r\n                };\r\n            };\r\n        };\r\n        VariablesStore.prototype.getModifierForVarDependant = function (\r\n            property,\r\n            sourceValue\r\n        ) {\r\n            var _this = this;\r\n            if (sourceValue.match(/^\\s*(rgb|hsl)a?\\(/)) {\r\n                var isBg_1 = property.startsWith(\"background\");\r\n                var isText_1 = isTextColorProperty(property);\r\n                return function (theme) {\r\n                    var value = insertVarValues(\r\n                        sourceValue,\r\n                        _this.unstableVarValues\r\n                    );\r\n                    if (!value) {\r\n                        value = isBg_1 ? \"#ffffff\" : \"#000000\";\r\n                    }\r\n                    var modifier = isBg_1\r\n                        ? tryModifyBgColor\r\n                        : isText_1\r\n                        ? tryModifyTextColor\r\n                        : tryModifyBorderColor;\r\n                    return modifier(value, theme);\r\n                };\r\n            }\r\n            if (property === \"background-color\") {\r\n                return function (theme) {\r\n                    return replaceCSSVariablesNames(\r\n                        sourceValue,\r\n                        function (v) {\r\n                            return wrapBgColorVariableName(v);\r\n                        },\r\n                        function (fallback) {\r\n                            return tryModifyBgColor(fallback, theme);\r\n                        }\r\n                    );\r\n                };\r\n            }\r\n            if (isTextColorProperty(property)) {\r\n                return function (theme) {\r\n                    return replaceCSSVariablesNames(\r\n                        sourceValue,\r\n                        function (v) {\r\n                            return wrapTextColorVariableName(v);\r\n                        },\r\n                        function (fallback) {\r\n                            return tryModifyTextColor(fallback, theme);\r\n                        }\r\n                    );\r\n                };\r\n            }\r\n            if (\r\n                property === \"background\" ||\r\n                property === \"background-image\" ||\r\n                property === \"box-shadow\"\r\n            ) {\r\n                return function (theme) {\r\n                    var unknownVars = new Set();\r\n                    var modify = function () {\r\n                        var variableReplaced = replaceCSSVariablesNames(\r\n                            sourceValue,\r\n                            function (v) {\r\n                                if (_this.isVarType(v, VAR_TYPE_BGCOLOR)) {\r\n                                    return wrapBgColorVariableName(v);\r\n                                }\r\n                                if (_this.isVarType(v, VAR_TYPE_BGIMG)) {\r\n                                    return wrapBgImgVariableName(v);\r\n                                }\r\n                                unknownVars.add(v);\r\n                                return v;\r\n                            },\r\n                            function (fallback) {\r\n                                return tryModifyBgColor(fallback, theme);\r\n                            }\r\n                        );\r\n                        if (property === \"box-shadow\") {\r\n                            var shadowModifier =\r\n                                getShadowModifierWithInfo(variableReplaced);\r\n                            var modifiedShadow = shadowModifier(theme);\r\n                            if (\r\n                                modifiedShadow.unparseableMatchesLength !==\r\n                                modifiedShadow.matchesLength\r\n                            ) {\r\n                                return modifiedShadow.result;\r\n                            }\r\n                        }\r\n                        return variableReplaced;\r\n                    };\r\n                    var modified = modify();\r\n                    if (unknownVars.size > 0) {\r\n                        return new Promise(function (resolve) {\r\n                            var firstUnknownVar = unknownVars\r\n                                .values()\r\n                                .next().value;\r\n                            var callback = function () {\r\n                                _this.unsubscribeFromVariableTypeChanges(\r\n                                    firstUnknownVar,\r\n                                    callback\r\n                                );\r\n                                var newValue = modify();\r\n                                resolve(newValue);\r\n                            };\r\n                            _this.subscribeForVarTypeChange(\r\n                                firstUnknownVar,\r\n                                callback\r\n                            );\r\n                        });\r\n                    }\r\n                    return modified;\r\n                };\r\n            }\r\n            if (\r\n                property.startsWith(\"border\") ||\r\n                property.startsWith(\"outline\")\r\n            ) {\r\n                return function (theme) {\r\n                    return replaceCSSVariablesNames(\r\n                        sourceValue,\r\n                        function (v) {\r\n                            return wrapBorderColorVariableName(v);\r\n                        },\r\n                        function (fallback) {\r\n                            return tryModifyBorderColor(fallback, theme);\r\n                        }\r\n                    );\r\n                };\r\n            }\r\n            return null;\r\n        };\r\n        VariablesStore.prototype.subscribeForVarTypeChange = function (\r\n            varName,\r\n            callback\r\n        ) {\r\n            if (!this.typeChangeSubscriptions.has(varName)) {\r\n                this.typeChangeSubscriptions.set(varName, new Set());\r\n            }\r\n            var rootStore = this.typeChangeSubscriptions.get(varName);\r\n            if (!rootStore.has(callback)) {\r\n                rootStore.add(callback);\r\n            }\r\n        };\r\n        VariablesStore.prototype.unsubscribeFromVariableTypeChanges = function (\r\n            varName,\r\n            callback\r\n        ) {\r\n            if (this.typeChangeSubscriptions.has(varName)) {\r\n                this.typeChangeSubscriptions.get(varName).delete(callback);\r\n            }\r\n        };\r\n        VariablesStore.prototype.collectVariablesAndVarDep = function (\r\n            ruleList\r\n        ) {\r\n            var _this = this;\r\n            ruleList.forEach(function (rules) {\r\n                iterateCSSRules(rules, function (rule) {\r\n                    rule.style &&\r\n                        iterateCSSDeclarations(\r\n                            rule.style,\r\n                            function (property, value) {\r\n                                if (isVariable(property)) {\r\n                                    _this.inspectVariable(property, value);\r\n                                }\r\n                                if (isVarDependant(value)) {\r\n                                    _this.inspectVarDependant(property, value);\r\n                                }\r\n                            }\r\n                        );\r\n                });\r\n            });\r\n        };\r\n        VariablesStore.prototype.collectRootVariables = function () {\r\n            var _this = this;\r\n            iterateCSSDeclarations(\r\n                document.documentElement.style,\r\n                function (property, value) {\r\n                    if (isVariable(property)) {\r\n                        _this.inspectVariable(property, value);\r\n                    }\r\n                }\r\n            );\r\n        };\r\n        VariablesStore.prototype.inspectVariable = function (varName, value) {\r\n            this.unstableVarValues.set(varName, value);\r\n            if (isVarDependant(value) && isConstructedColorVar(value)) {\r\n                this.unknownColorVars.add(varName);\r\n                this.definedVars.add(varName);\r\n            }\r\n            if (this.definedVars.has(varName)) {\r\n                return;\r\n            }\r\n            this.definedVars.add(varName);\r\n            var color = parseColorWithCache(value);\r\n            if (color) {\r\n                this.unknownColorVars.add(varName);\r\n            } else if (\r\n                value.includes(\"url(\") ||\r\n                value.includes(\"linear-gradient(\") ||\r\n                value.includes(\"radial-gradient(\")\r\n            ) {\r\n                this.resolveVariableType(varName, VAR_TYPE_BGIMG);\r\n            }\r\n        };\r\n        VariablesStore.prototype.resolveVariableType = function (\r\n            varName,\r\n            typeNum\r\n        ) {\r\n            var initialType = this.initialVarTypes.get(varName) || 0;\r\n            var currentType = this.varTypes.get(varName) || 0;\r\n            var newType = currentType | typeNum;\r\n            this.varTypes.set(varName, newType);\r\n            if (newType !== initialType || this.undefinedVars.has(varName)) {\r\n                this.changedTypeVars.add(varName);\r\n                this.undefinedVars.delete(varName);\r\n            }\r\n            this.unknownColorVars.delete(varName);\r\n            this.unknownBgVars.delete(varName);\r\n        };\r\n        VariablesStore.prototype.collectRootVarDependants = function () {\r\n            var _this = this;\r\n            iterateCSSDeclarations(\r\n                document.documentElement.style,\r\n                function (property, value) {\r\n                    if (isVarDependant(value)) {\r\n                        _this.inspectVarDependant(property, value);\r\n                    }\r\n                }\r\n            );\r\n        };\r\n        VariablesStore.prototype.inspectVarDependant = function (\r\n            property,\r\n            value\r\n        ) {\r\n            var _this = this;\r\n            if (isVariable(property)) {\r\n                this.iterateVarDeps(value, function (ref) {\r\n                    if (!_this.varRefs.has(property)) {\r\n                        _this.varRefs.set(property, new Set());\r\n                    }\r\n                    _this.varRefs.get(property).add(ref);\r\n                });\r\n            } else if (\r\n                property === \"background-color\" ||\r\n                property === \"box-shadow\"\r\n            ) {\r\n                this.iterateVarDeps(value, function (v) {\r\n                    return _this.resolveVariableType(v, VAR_TYPE_BGCOLOR);\r\n                });\r\n            } else if (isTextColorProperty(property)) {\r\n                this.iterateVarDeps(value, function (v) {\r\n                    return _this.resolveVariableType(v, VAR_TYPE_TEXTCOLOR);\r\n                });\r\n            } else if (\r\n                property.startsWith(\"border\") ||\r\n                property.startsWith(\"outline\")\r\n            ) {\r\n                this.iterateVarDeps(value, function (v) {\r\n                    return _this.resolveVariableType(v, VAR_TYPE_BORDERCOLOR);\r\n                });\r\n            } else if (\r\n                property === \"background\" ||\r\n                property === \"background-image\"\r\n            ) {\r\n                this.iterateVarDeps(value, function (v) {\r\n                    if (_this.isVarType(v, VAR_TYPE_BGCOLOR | VAR_TYPE_BGIMG)) {\r\n                        return;\r\n                    }\r\n                    var isBgColor =\r\n                        _this.findVarRef(v, function (ref) {\r\n                            return (\r\n                                _this.unknownColorVars.has(ref) ||\r\n                                _this.isVarType(\r\n                                    ref,\r\n                                    VAR_TYPE_TEXTCOLOR | VAR_TYPE_BORDERCOLOR\r\n                                )\r\n                            );\r\n                        }) != null;\r\n                    _this.itarateVarRefs(v, function (ref) {\r\n                        if (isBgColor) {\r\n                            _this.resolveVariableType(ref, VAR_TYPE_BGCOLOR);\r\n                        } else {\r\n                            _this.unknownBgVars.add(ref);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        };\r\n        VariablesStore.prototype.iterateVarDeps = function (value, iterator) {\r\n            var varDeps = new Set();\r\n            iterateVarDependencies(value, function (v) {\r\n                return varDeps.add(v);\r\n            });\r\n            varDeps.forEach(function (v) {\r\n                return iterator(v);\r\n            });\r\n        };\r\n        VariablesStore.prototype.findVarRef = function (\r\n            varName,\r\n            iterator,\r\n            stack\r\n        ) {\r\n            var e_1, _a;\r\n            if (stack === void 0) {\r\n                stack = new Set();\r\n            }\r\n            if (stack.has(varName)) {\r\n                return null;\r\n            }\r\n            stack.add(varName);\r\n            var result = iterator(varName);\r\n            if (result) {\r\n                return varName;\r\n            }\r\n            var refs = this.varRefs.get(varName);\r\n            if (!refs || refs.size === 0) {\r\n                return null;\r\n            }\r\n            try {\r\n                for (\r\n                    var refs_1 = __values(refs), refs_1_1 = refs_1.next();\r\n                    !refs_1_1.done;\r\n                    refs_1_1 = refs_1.next()\r\n                ) {\r\n                    var ref = refs_1_1.value;\r\n                    var found = this.findVarRef(ref, iterator, stack);\r\n                    if (found) {\r\n                        return found;\r\n                    }\r\n                }\r\n            } catch (e_1_1) {\r\n                e_1 = {error: e_1_1};\r\n            } finally {\r\n                try {\r\n                    if (refs_1_1 && !refs_1_1.done && (_a = refs_1.return))\r\n                        _a.call(refs_1);\r\n                } finally {\r\n                    if (e_1) throw e_1.error;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        VariablesStore.prototype.itarateVarRefs = function (varName, iterator) {\r\n            this.findVarRef(varName, function (ref) {\r\n                iterator(ref);\r\n                return false;\r\n            });\r\n        };\r\n        VariablesStore.prototype.setOnRootVariableChange = function (callback) {\r\n            this.onRootVariableDefined = callback;\r\n        };\r\n        VariablesStore.prototype.putRootVars = function (styleElement, theme) {\r\n            var e_2, _a;\r\n            var _this = this;\r\n            var sheet = styleElement.sheet;\r\n            if (sheet.cssRules.length > 0) {\r\n                sheet.deleteRule(0);\r\n            }\r\n            var declarations = new Map();\r\n            iterateCSSDeclarations(\r\n                document.documentElement.style,\r\n                function (property, value) {\r\n                    if (isVariable(property)) {\r\n                        if (_this.isVarType(property, VAR_TYPE_BGCOLOR)) {\r\n                            declarations.set(\r\n                                wrapBgColorVariableName(property),\r\n                                tryModifyBgColor(value, theme)\r\n                            );\r\n                        }\r\n                        if (_this.isVarType(property, VAR_TYPE_TEXTCOLOR)) {\r\n                            declarations.set(\r\n                                wrapTextColorVariableName(property),\r\n                                tryModifyTextColor(value, theme)\r\n                            );\r\n                        }\r\n                        if (_this.isVarType(property, VAR_TYPE_BORDERCOLOR)) {\r\n                            declarations.set(\r\n                                wrapBorderColorVariableName(property),\r\n                                tryModifyBorderColor(value, theme)\r\n                            );\r\n                        }\r\n                        _this.subscribeForVarTypeChange(\r\n                            property,\r\n                            _this.onRootVariableDefined\r\n                        );\r\n                    }\r\n                }\r\n            );\r\n            var cssLines = [];\r\n            cssLines.push(\":root {\");\r\n            try {\r\n                for (\r\n                    var declarations_1 = __values(declarations),\r\n                        declarations_1_1 = declarations_1.next();\r\n                    !declarations_1_1.done;\r\n                    declarations_1_1 = declarations_1.next()\r\n                ) {\r\n                    var _b = __read(declarations_1_1.value, 2),\r\n                        property = _b[0],\r\n                        value = _b[1];\r\n                    cssLines.push(\r\n                        \"    \".concat(property, \": \").concat(value, \";\")\r\n                    );\r\n                }\r\n            } catch (e_2_1) {\r\n                e_2 = {error: e_2_1};\r\n            } finally {\r\n                try {\r\n                    if (\r\n                        declarations_1_1 &&\r\n                        !declarations_1_1.done &&\r\n                        (_a = declarations_1.return)\r\n                    )\r\n                        _a.call(declarations_1);\r\n                } finally {\r\n                    if (e_2) throw e_2.error;\r\n                }\r\n            }\r\n            cssLines.push(\"}\");\r\n            var cssText = cssLines.join(\"\\n\");\r\n            sheet.insertRule(cssText);\r\n        };\r\n        return VariablesStore;\r\n    })();\r\n    var variablesStore = new VariablesStore();\r\n    function getVariableRange(input, searchStart) {\r\n        if (searchStart === void 0) {\r\n            searchStart = 0;\r\n        }\r\n        var start = input.indexOf(\"var(\", searchStart);\r\n        if (start >= 0) {\r\n            var range = getParenthesesRange(input, start + 3);\r\n            if (range) {\r\n                return {start: start, end: range.end};\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n    function getVariablesMatches(input) {\r\n        var ranges = [];\r\n        var i = 0;\r\n        var range;\r\n        while ((range = getVariableRange(input, i))) {\r\n            var start = range.start,\r\n                end = range.end;\r\n            ranges.push({\r\n                start: start,\r\n                end: end,\r\n                value: input.substring(start, end)\r\n            });\r\n            i = range.end + 1;\r\n        }\r\n        return ranges;\r\n    }\r\n    function replaceVariablesMatches(input, replacer) {\r\n        var matches = getVariablesMatches(input);\r\n        var matchesCount = matches.length;\r\n        if (matchesCount === 0) {\r\n            return input;\r\n        }\r\n        var inputLength = input.length;\r\n        var replacements = matches.map(function (m) {\r\n            return replacer(m.value);\r\n        });\r\n        var parts = [];\r\n        parts.push(input.substring(0, matches[0].start));\r\n        for (var i = 0; i < matchesCount; i++) {\r\n            parts.push(replacements[i]);\r\n            var start = matches[i].end;\r\n            var end = i < matchesCount - 1 ? matches[i + 1].start : inputLength;\r\n            parts.push(input.substring(start, end));\r\n        }\r\n        return parts.join(\"\");\r\n    }\r\n    function getVariableNameAndFallback(match) {\r\n        var commaIndex = match.indexOf(\",\");\r\n        var name;\r\n        var fallback;\r\n        if (commaIndex >= 0) {\r\n            name = match.substring(4, commaIndex).trim();\r\n            fallback = match.substring(commaIndex + 1, match.length - 1).trim();\r\n        } else {\r\n            name = match.substring(4, match.length - 1).trim();\r\n            fallback = \"\";\r\n        }\r\n        return {name: name, fallback: fallback};\r\n    }\r\n    function replaceCSSVariablesNames(value, nameReplacer, fallbackReplacer) {\r\n        var matchReplacer = function (match) {\r\n            var _a = getVariableNameAndFallback(match),\r\n                name = _a.name,\r\n                fallback = _a.fallback;\r\n            var newName = nameReplacer(name);\r\n            if (!fallback) {\r\n                return \"var(\".concat(newName, \")\");\r\n            }\r\n            var newFallback;\r\n            if (isVarDependant(fallback)) {\r\n                newFallback = replaceCSSVariablesNames(\r\n                    fallback,\r\n                    nameReplacer,\r\n                    fallbackReplacer\r\n                );\r\n            } else if (fallbackReplacer) {\r\n                newFallback = fallbackReplacer(fallback);\r\n            } else {\r\n                newFallback = fallback;\r\n            }\r\n            return \"var(\".concat(newName, \", \").concat(newFallback, \")\");\r\n        };\r\n        return replaceVariablesMatches(value, matchReplacer);\r\n    }\r\n    function iterateVarDependencies(value, iterator) {\r\n        replaceCSSVariablesNames(value, function (varName) {\r\n            iterator(varName);\r\n            return varName;\r\n        });\r\n    }\r\n    function wrapBgColorVariableName(name) {\r\n        return \"--darkreader-bg\".concat(name);\r\n    }\r\n    function wrapTextColorVariableName(name) {\r\n        return \"--darkreader-text\".concat(name);\r\n    }\r\n    function wrapBorderColorVariableName(name) {\r\n        return \"--darkreader-border\".concat(name);\r\n    }\r\n    function wrapBgImgVariableName(name) {\r\n        return \"--darkreader-bgimg\".concat(name);\r\n    }\r\n    function isVariable(property) {\r\n        return property.startsWith(\"--\");\r\n    }\r\n    function isVarDependant(value) {\r\n        return value.includes(\"var(\");\r\n    }\r\n    function isConstructedColorVar(value) {\r\n        return value.match(/^\\s*(rgb|hsl)a?\\(/);\r\n    }\r\n    function isTextColorProperty(property) {\r\n        return (\r\n            property === \"color\" ||\r\n            property === \"caret-color\" ||\r\n            property === \"-webkit-text-fill-color\"\r\n        );\r\n    }\r\n    var rawValueRegex = /^\\d{1,3}, ?\\d{1,3}, ?\\d{1,3}$/;\r\n    function parseRawValue(color) {\r\n        if (rawValueRegex.test(color)) {\r\n            var splitted = color.split(\",\");\r\n            var resultInRGB_1 = \"rgb(\";\r\n            splitted.forEach(function (number) {\r\n                resultInRGB_1 += \"\".concat(number.trim(), \", \");\r\n            });\r\n            resultInRGB_1 = resultInRGB_1.substring(\r\n                0,\r\n                resultInRGB_1.length - 2\r\n            );\r\n            resultInRGB_1 += \")\";\r\n            return {isRaw: true, color: resultInRGB_1};\r\n        }\r\n        return {isRaw: false, color: color};\r\n    }\r\n    function handleRawValue(color, theme, modifyFunction) {\r\n        var _a = parseRawValue(color),\r\n            isRaw = _a.isRaw,\r\n            newColor = _a.color;\r\n        var rgb = parseColorWithCache(newColor);\r\n        if (rgb) {\r\n            var outputColor = modifyFunction(rgb, theme);\r\n            if (isRaw) {\r\n                var outputInRGB = parseColorWithCache(outputColor);\r\n                return outputInRGB\r\n                    ? \"\"\r\n                          .concat(outputInRGB.r, \", \")\r\n                          .concat(outputInRGB.g, \", \")\r\n                          .concat(outputInRGB.b)\r\n                    : outputColor;\r\n            }\r\n            return outputColor;\r\n        }\r\n        return newColor;\r\n    }\r\n    function tryModifyBgColor(color, theme) {\r\n        return handleRawValue(color, theme, modifyBackgroundColor);\r\n    }\r\n    function tryModifyTextColor(color, theme) {\r\n        return handleRawValue(color, theme, modifyForegroundColor);\r\n    }\r\n    function tryModifyBorderColor(color, theme) {\r\n        return handleRawValue(color, theme, modifyBorderColor);\r\n    }\r\n    function insertVarValues(source, varValues, stack) {\r\n        if (stack === void 0) {\r\n            stack = new Set();\r\n        }\r\n        var containsUnresolvedVar = false;\r\n        var matchReplacer = function (match) {\r\n            var _a = getVariableNameAndFallback(match),\r\n                name = _a.name,\r\n                fallback = _a.fallback;\r\n            if (stack.has(name)) {\r\n                containsUnresolvedVar = true;\r\n                return null;\r\n            }\r\n            stack.add(name);\r\n            var varValue = varValues.get(name) || fallback;\r\n            var inserted = null;\r\n            if (varValue) {\r\n                if (isVarDependant(varValue)) {\r\n                    inserted = insertVarValues(varValue, varValues, stack);\r\n                } else {\r\n                    inserted = varValue;\r\n                }\r\n            }\r\n            if (!inserted) {\r\n                containsUnresolvedVar = true;\r\n                return null;\r\n            }\r\n            return inserted;\r\n        };\r\n        var replaced = replaceVariablesMatches(source, matchReplacer);\r\n        if (containsUnresolvedVar) {\r\n            return null;\r\n        }\r\n        return replaced;\r\n    }\r\n\r\n    var overrides = {\r\n        \"background-color\": {\r\n            customProp: \"--darkreader-inline-bgcolor\",\r\n            cssProp: \"background-color\",\r\n            dataAttr: \"data-darkreader-inline-bgcolor\"\r\n        },\r\n        \"background-image\": {\r\n            customProp: \"--darkreader-inline-bgimage\",\r\n            cssProp: \"background-image\",\r\n            dataAttr: \"data-darkreader-inline-bgimage\"\r\n        },\r\n        \"border-color\": {\r\n            customProp: \"--darkreader-inline-border\",\r\n            cssProp: \"border-color\",\r\n            dataAttr: \"data-darkreader-inline-border\"\r\n        },\r\n        \"border-bottom-color\": {\r\n            customProp: \"--darkreader-inline-border-bottom\",\r\n            cssProp: \"border-bottom-color\",\r\n            dataAttr: \"data-darkreader-inline-border-bottom\"\r\n        },\r\n        \"border-left-color\": {\r\n            customProp: \"--darkreader-inline-border-left\",\r\n            cssProp: \"border-left-color\",\r\n            dataAttr: \"data-darkreader-inline-border-left\"\r\n        },\r\n        \"border-right-color\": {\r\n            customProp: \"--darkreader-inline-border-right\",\r\n            cssProp: \"border-right-color\",\r\n            dataAttr: \"data-darkreader-inline-border-right\"\r\n        },\r\n        \"border-top-color\": {\r\n            customProp: \"--darkreader-inline-border-top\",\r\n            cssProp: \"border-top-color\",\r\n            dataAttr: \"data-darkreader-inline-border-top\"\r\n        },\r\n        \"box-shadow\": {\r\n            customProp: \"--darkreader-inline-boxshadow\",\r\n            cssProp: \"box-shadow\",\r\n            dataAttr: \"data-darkreader-inline-boxshadow\"\r\n        },\r\n        \"color\": {\r\n            customProp: \"--darkreader-inline-color\",\r\n            cssProp: \"color\",\r\n            dataAttr: \"data-darkreader-inline-color\"\r\n        },\r\n        \"fill\": {\r\n            customProp: \"--darkreader-inline-fill\",\r\n            cssProp: \"fill\",\r\n            dataAttr: \"data-darkreader-inline-fill\"\r\n        },\r\n        \"stroke\": {\r\n            customProp: \"--darkreader-inline-stroke\",\r\n            cssProp: \"stroke\",\r\n            dataAttr: \"data-darkreader-inline-stroke\"\r\n        },\r\n        \"outline-color\": {\r\n            customProp: \"--darkreader-inline-outline\",\r\n            cssProp: \"outline-color\",\r\n            dataAttr: \"data-darkreader-inline-outline\"\r\n        },\r\n        \"stop-color\": {\r\n            customProp: \"--darkreader-inline-stopcolor\",\r\n            cssProp: \"stop-color\",\r\n            dataAttr: \"data-darkreader-inline-stopcolor\"\r\n        }\r\n    };\r\n    var overridesList = Object.values(overrides);\r\n    var normalizedPropList = {};\r\n    overridesList.forEach(function (_a) {\r\n        var cssProp = _a.cssProp,\r\n            customProp = _a.customProp;\r\n        return (normalizedPropList[customProp] = cssProp);\r\n    });\r\n    var INLINE_STYLE_ATTRS = [\r\n        \"style\",\r\n        \"fill\",\r\n        \"stop-color\",\r\n        \"stroke\",\r\n        \"bgcolor\",\r\n        \"color\"\r\n    ];\r\n    var INLINE_STYLE_SELECTOR = INLINE_STYLE_ATTRS.map(function (attr) {\r\n        return \"[\".concat(attr, \"]\");\r\n    }).join(\", \");\r\n    function getInlineOverrideStyle() {\r\n        return overridesList\r\n            .map(function (_a) {\r\n                var dataAttr = _a.dataAttr,\r\n                    customProp = _a.customProp,\r\n                    cssProp = _a.cssProp;\r\n                return [\r\n                    \"[\".concat(dataAttr, \"] {\"),\r\n                    \"  \"\r\n                        .concat(cssProp, \": var(\")\r\n                        .concat(customProp, \") !important;\"),\r\n                    \"}\"\r\n                ].join(\"\\n\");\r\n            })\r\n            .join(\"\\n\");\r\n    }\r\n    function getInlineStyleElements(root) {\r\n        var results = [];\r\n        if (root instanceof Element && root.matches(INLINE_STYLE_SELECTOR)) {\r\n            results.push(root);\r\n        }\r\n        if (\r\n            root instanceof Element ||\r\n            (isShadowDomSupported && root instanceof ShadowRoot) ||\r\n            root instanceof Document\r\n        ) {\r\n            push(results, root.querySelectorAll(INLINE_STYLE_SELECTOR));\r\n        }\r\n        return results;\r\n    }\r\n    var treeObservers = new Map();\r\n    var attrObservers = new Map();\r\n    function watchForInlineStyles(elementStyleDidChange, shadowRootDiscovered) {\r\n        deepWatchForInlineStyles(\r\n            document,\r\n            elementStyleDidChange,\r\n            shadowRootDiscovered\r\n        );\r\n        iterateShadowHosts(document.documentElement, function (host) {\r\n            deepWatchForInlineStyles(\r\n                host.shadowRoot,\r\n                elementStyleDidChange,\r\n                shadowRootDiscovered\r\n            );\r\n        });\r\n    }\r\n    function deepWatchForInlineStyles(\r\n        root,\r\n        elementStyleDidChange,\r\n        shadowRootDiscovered\r\n    ) {\r\n        if (treeObservers.has(root)) {\r\n            treeObservers.get(root).disconnect();\r\n            attrObservers.get(root).disconnect();\r\n        }\r\n        var discoveredNodes = new WeakSet();\r\n        function discoverNodes(node) {\r\n            getInlineStyleElements(node).forEach(function (el) {\r\n                if (discoveredNodes.has(el)) {\r\n                    return;\r\n                }\r\n                discoveredNodes.add(el);\r\n                elementStyleDidChange(el);\r\n            });\r\n            iterateShadowHosts(node, function (n) {\r\n                if (discoveredNodes.has(node)) {\r\n                    return;\r\n                }\r\n                discoveredNodes.add(node);\r\n                shadowRootDiscovered(n.shadowRoot);\r\n                deepWatchForInlineStyles(\r\n                    n.shadowRoot,\r\n                    elementStyleDidChange,\r\n                    shadowRootDiscovered\r\n                );\r\n            });\r\n        }\r\n        var treeObserver = createOptimizedTreeObserver(root, {\r\n            onMinorMutations: function (_a) {\r\n                var additions = _a.additions;\r\n                additions.forEach(function (added) {\r\n                    return discoverNodes(added);\r\n                });\r\n            },\r\n            onHugeMutations: function () {\r\n                discoverNodes(root);\r\n            }\r\n        });\r\n        treeObservers.set(root, treeObserver);\r\n        var attemptCount = 0;\r\n        var start = null;\r\n        var ATTEMPTS_INTERVAL = getDuration({seconds: 10});\r\n        var RETRY_TIMEOUT = getDuration({seconds: 2});\r\n        var MAX_ATTEMPTS_COUNT = 50;\r\n        var cache = [];\r\n        var timeoutId = null;\r\n        var handleAttributeMutations = throttle(function (mutations) {\r\n            mutations.forEach(function (m) {\r\n                if (INLINE_STYLE_ATTRS.includes(m.attributeName)) {\r\n                    elementStyleDidChange(m.target);\r\n                }\r\n            });\r\n        });\r\n        var attrObserver = new MutationObserver(function (mutations) {\r\n            if (timeoutId) {\r\n                cache.push.apply(\r\n                    cache,\r\n                    __spreadArray([], __read(mutations), false)\r\n                );\r\n                return;\r\n            }\r\n            attemptCount++;\r\n            var now = Date.now();\r\n            if (start == null) {\r\n                start = now;\r\n            } else if (attemptCount >= MAX_ATTEMPTS_COUNT) {\r\n                if (now - start < ATTEMPTS_INTERVAL) {\r\n                    timeoutId = setTimeout(function () {\r\n                        start = null;\r\n                        attemptCount = 0;\r\n                        timeoutId = null;\r\n                        var attributeCache = cache;\r\n                        cache = [];\r\n                        handleAttributeMutations(attributeCache);\r\n                    }, RETRY_TIMEOUT);\r\n                    cache.push.apply(\r\n                        cache,\r\n                        __spreadArray([], __read(mutations), false)\r\n                    );\r\n                    return;\r\n                }\r\n                start = now;\r\n                attemptCount = 1;\r\n            }\r\n            handleAttributeMutations(mutations);\r\n        });\r\n        attrObserver.observe(root, {\r\n            attributes: true,\r\n            attributeFilter: INLINE_STYLE_ATTRS.concat(\r\n                overridesList.map(function (_a) {\r\n                    var dataAttr = _a.dataAttr;\r\n                    return dataAttr;\r\n                })\r\n            ),\r\n            subtree: true\r\n        });\r\n        attrObservers.set(root, attrObserver);\r\n    }\r\n    function stopWatchingForInlineStyles() {\r\n        treeObservers.forEach(function (o) {\r\n            return o.disconnect();\r\n        });\r\n        attrObservers.forEach(function (o) {\r\n            return o.disconnect();\r\n        });\r\n        treeObservers.clear();\r\n        attrObservers.clear();\r\n    }\r\n    var inlineStyleCache = new WeakMap();\r\n    var filterProps = [\"brightness\", \"contrast\", \"grayscale\", \"sepia\", \"mode\"];\r\n    function getInlineStyleCacheKey(el, theme) {\r\n        return INLINE_STYLE_ATTRS.map(function (attr) {\r\n            return \"\".concat(attr, '=\"').concat(el.getAttribute(attr), '\"');\r\n        })\r\n            .concat(\r\n                filterProps.map(function (prop) {\r\n                    return \"\".concat(prop, '=\"').concat(theme[prop], '\"');\r\n                })\r\n            )\r\n            .join(\" \");\r\n    }\r\n    function shouldIgnoreInlineStyle(element, selectors) {\r\n        for (var i = 0, len = selectors.length; i < len; i++) {\r\n            var ingnoredSelector = selectors[i];\r\n            if (element.matches(ingnoredSelector)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function overrideInlineStyle(\r\n        element,\r\n        theme,\r\n        ignoreInlineSelectors,\r\n        ignoreImageSelectors\r\n    ) {\r\n        var cacheKey = getInlineStyleCacheKey(element, theme);\r\n        if (cacheKey === inlineStyleCache.get(element)) {\r\n            return;\r\n        }\r\n        var unsetProps = new Set(Object.keys(overrides));\r\n        function setCustomProp(targetCSSProp, modifierCSSProp, cssVal) {\r\n            var isPropertyVariable = targetCSSProp.startsWith(\"--\");\r\n            var _a = isPropertyVariable ? {} : overrides[targetCSSProp],\r\n                customProp = _a.customProp,\r\n                dataAttr = _a.dataAttr;\r\n            var mod = getModifiableCSSDeclaration(\r\n                modifierCSSProp,\r\n                cssVal,\r\n                {style: element.style},\r\n                variablesStore,\r\n                ignoreImageSelectors,\r\n                null\r\n            );\r\n            if (!mod) {\r\n                return;\r\n            }\r\n            var value = mod.value;\r\n            if (typeof value === \"function\") {\r\n                value = value(theme);\r\n            }\r\n            if (isPropertyVariable && typeof value === \"object\") {\r\n                var typedValue = value;\r\n                typedValue.declarations.forEach(function (_a) {\r\n                    var property = _a.property,\r\n                        value = _a.value;\r\n                    !(value instanceof Promise) &&\r\n                        element.style.setProperty(property, value);\r\n                });\r\n            } else {\r\n                element.style.setProperty(customProp, value);\r\n                if (!element.hasAttribute(dataAttr)) {\r\n                    element.setAttribute(dataAttr, \"\");\r\n                }\r\n                unsetProps.delete(targetCSSProp);\r\n            }\r\n        }\r\n        if (ignoreInlineSelectors.length > 0) {\r\n            if (shouldIgnoreInlineStyle(element, ignoreInlineSelectors)) {\r\n                unsetProps.forEach(function (cssProp) {\r\n                    element.removeAttribute(overrides[cssProp].dataAttr);\r\n                });\r\n                return;\r\n            }\r\n        }\r\n        if (element.hasAttribute(\"bgcolor\")) {\r\n            var value = element.getAttribute(\"bgcolor\");\r\n            if (\r\n                value.match(/^[0-9a-f]{3}$/i) ||\r\n                value.match(/^[0-9a-f]{6}$/i)\r\n            ) {\r\n                value = \"#\".concat(value);\r\n            }\r\n            setCustomProp(\"background-color\", \"background-color\", value);\r\n        }\r\n        if (element.hasAttribute(\"color\") && element.rel !== \"mask-icon\") {\r\n            var value = element.getAttribute(\"color\");\r\n            if (\r\n                value.match(/^[0-9a-f]{3}$/i) ||\r\n                value.match(/^[0-9a-f]{6}$/i)\r\n            ) {\r\n                value = \"#\".concat(value);\r\n            }\r\n            setCustomProp(\"color\", \"color\", value);\r\n        }\r\n        if (element instanceof SVGElement) {\r\n            if (element.hasAttribute(\"fill\")) {\r\n                var SMALL_SVG_LIMIT_1 = 32;\r\n                var value_1 = element.getAttribute(\"fill\");\r\n                if (value_1 !== \"none\") {\r\n                    if (!(element instanceof SVGTextElement)) {\r\n                        var handleSVGElement = function () {\r\n                            var _a = element.getBoundingClientRect(),\r\n                                width = _a.width,\r\n                                height = _a.height;\r\n                            var isBg =\r\n                                width > SMALL_SVG_LIMIT_1 ||\r\n                                height > SMALL_SVG_LIMIT_1;\r\n                            setCustomProp(\r\n                                \"fill\",\r\n                                isBg ? \"background-color\" : \"color\",\r\n                                value_1\r\n                            );\r\n                        };\r\n                        if (isReadyStateComplete()) {\r\n                            handleSVGElement();\r\n                        } else {\r\n                            addReadyStateCompleteListener(handleSVGElement);\r\n                        }\r\n                    } else {\r\n                        setCustomProp(\"fill\", \"color\", value_1);\r\n                    }\r\n                }\r\n            }\r\n            if (element.hasAttribute(\"stop-color\")) {\r\n                setCustomProp(\r\n                    \"stop-color\",\r\n                    \"background-color\",\r\n                    element.getAttribute(\"stop-color\")\r\n                );\r\n            }\r\n        }\r\n        if (element.hasAttribute(\"stroke\")) {\r\n            var value = element.getAttribute(\"stroke\");\r\n            setCustomProp(\r\n                \"stroke\",\r\n                element instanceof SVGLineElement ||\r\n                    element instanceof SVGTextElement\r\n                    ? \"border-color\"\r\n                    : \"color\",\r\n                value\r\n            );\r\n        }\r\n        element.style &&\r\n            iterateCSSDeclarations(element.style, function (property, value) {\r\n                if (property === \"background-image\" && value.includes(\"url\")) {\r\n                    return;\r\n                }\r\n                if (\r\n                    overrides.hasOwnProperty(property) ||\r\n                    (property.startsWith(\"--\") && !normalizedPropList[property])\r\n                ) {\r\n                    setCustomProp(property, property, value);\r\n                } else {\r\n                    var overridenProp = normalizedPropList[property];\r\n                    if (\r\n                        overridenProp &&\r\n                        !element.style.getPropertyValue(overridenProp) &&\r\n                        !element.hasAttribute(overridenProp)\r\n                    ) {\r\n                        if (\r\n                            overridenProp === \"background-color\" &&\r\n                            element.hasAttribute(\"bgcolor\")\r\n                        ) {\r\n                            return;\r\n                        }\r\n                        element.style.setProperty(property, \"\");\r\n                    }\r\n                }\r\n            });\r\n        if (\r\n            element.style &&\r\n            element instanceof SVGTextElement &&\r\n            element.style.fill\r\n        ) {\r\n            setCustomProp(\r\n                \"fill\",\r\n                \"color\",\r\n                element.style.getPropertyValue(\"fill\")\r\n            );\r\n        }\r\n        forEach(unsetProps, function (cssProp) {\r\n            element.removeAttribute(overrides[cssProp].dataAttr);\r\n        });\r\n        inlineStyleCache.set(element, getInlineStyleCacheKey(element, theme));\r\n    }\r\n\r\n    var metaThemeColorName = \"theme-color\";\r\n    var metaThemeColorSelector = 'meta[name=\"'.concat(metaThemeColorName, '\"]');\r\n    var srcMetaThemeColor = null;\r\n    var observer = null;\r\n    function changeMetaThemeColor(meta, theme) {\r\n        srcMetaThemeColor = srcMetaThemeColor || meta.content;\r\n        var color = parseColorWithCache(srcMetaThemeColor);\r\n        if (!color) {\r\n            return;\r\n        }\r\n        meta.content = modifyBackgroundColor(color, theme);\r\n    }\r\n    function changeMetaThemeColorWhenAvailable(theme) {\r\n        var meta = document.querySelector(metaThemeColorSelector);\r\n        if (meta) {\r\n            changeMetaThemeColor(meta, theme);\r\n        } else {\r\n            if (observer) {\r\n                observer.disconnect();\r\n            }\r\n            observer = new MutationObserver(function (mutations) {\r\n                loop: for (var i = 0; i < mutations.length; i++) {\r\n                    var addedNodes = mutations[i].addedNodes;\r\n                    for (var j = 0; j < addedNodes.length; j++) {\r\n                        var node = addedNodes[j];\r\n                        if (\r\n                            node instanceof HTMLMetaElement &&\r\n                            node.name === metaThemeColorName\r\n                        ) {\r\n                            observer.disconnect();\r\n                            observer = null;\r\n                            changeMetaThemeColor(node, theme);\r\n                            break loop;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            observer.observe(document.head, {childList: true});\r\n        }\r\n    }\r\n    function restoreMetaThemeColor() {\r\n        if (observer) {\r\n            observer.disconnect();\r\n            observer = null;\r\n        }\r\n        var meta = document.querySelector(metaThemeColorSelector);\r\n        if (meta && srcMetaThemeColor) {\r\n            meta.content = srcMetaThemeColor;\r\n        }\r\n    }\r\n\r\n    var themeCacheKeys = [\r\n        \"mode\",\r\n        \"brightness\",\r\n        \"contrast\",\r\n        \"grayscale\",\r\n        \"sepia\",\r\n        \"darkSchemeBackgroundColor\",\r\n        \"darkSchemeTextColor\",\r\n        \"lightSchemeBackgroundColor\",\r\n        \"lightSchemeTextColor\"\r\n    ];\r\n    function getThemeKey(theme) {\r\n        var resultKey = \"\";\r\n        themeCacheKeys.forEach(function (key) {\r\n            resultKey += \"\".concat(key, \":\").concat(theme[key], \";\");\r\n        });\r\n        return resultKey;\r\n    }\r\n    var asyncQueue = createAsyncTasksQueue();\r\n    function createStyleSheetModifier() {\r\n        var renderId = 0;\r\n        var rulesTextCache = new Set();\r\n        var rulesModCache = new Map();\r\n        var varTypeChangeCleaners = new Set();\r\n        var prevFilterKey = null;\r\n        var hasNonLoadedLink = false;\r\n        var wasRebuilt = false;\r\n        function shouldRebuildStyle() {\r\n            return hasNonLoadedLink && !wasRebuilt;\r\n        }\r\n        function modifySheet(options) {\r\n            var rules = options.sourceCSSRules;\r\n            var theme = options.theme,\r\n                ignoreImageAnalysis = options.ignoreImageAnalysis,\r\n                force = options.force,\r\n                prepareSheet = options.prepareSheet,\r\n                isAsyncCancelled = options.isAsyncCancelled;\r\n            var rulesChanged = rulesModCache.size === 0;\r\n            var notFoundCacheKeys = new Set(rulesModCache.keys());\r\n            var themeKey = getThemeKey(theme);\r\n            var themeChanged = themeKey !== prevFilterKey;\r\n            if (hasNonLoadedLink) {\r\n                wasRebuilt = true;\r\n            }\r\n            var modRules = [];\r\n            iterateCSSRules(\r\n                rules,\r\n                function (rule) {\r\n                    var cssText = rule.cssText;\r\n                    var textDiffersFromPrev = false;\r\n                    notFoundCacheKeys.delete(cssText);\r\n                    if (rule.parentRule instanceof CSSMediaRule) {\r\n                        cssText += \";\".concat(rule.parentRule.media.mediaText);\r\n                    }\r\n                    if (!rulesTextCache.has(cssText)) {\r\n                        rulesTextCache.add(cssText);\r\n                        textDiffersFromPrev = true;\r\n                    }\r\n                    if (textDiffersFromPrev) {\r\n                        rulesChanged = true;\r\n                    } else {\r\n                        modRules.push(rulesModCache.get(cssText));\r\n                        return;\r\n                    }\r\n                    var modDecs = [];\r\n                    rule.style &&\r\n                        iterateCSSDeclarations(\r\n                            rule.style,\r\n                            function (property, value) {\r\n                                var mod = getModifiableCSSDeclaration(\r\n                                    property,\r\n                                    value,\r\n                                    rule,\r\n                                    variablesStore,\r\n                                    ignoreImageAnalysis,\r\n                                    isAsyncCancelled\r\n                                );\r\n                                if (mod) {\r\n                                    modDecs.push(mod);\r\n                                }\r\n                            }\r\n                        );\r\n                    var modRule = null;\r\n                    if (modDecs.length > 0) {\r\n                        var parentRule = rule.parentRule;\r\n                        modRule = {\r\n                            selector: rule.selectorText,\r\n                            declarations: modDecs,\r\n                            parentRule: parentRule\r\n                        };\r\n                        modRules.push(modRule);\r\n                    }\r\n                    rulesModCache.set(cssText, modRule);\r\n                },\r\n                function () {\r\n                    hasNonLoadedLink = true;\r\n                }\r\n            );\r\n            notFoundCacheKeys.forEach(function (key) {\r\n                rulesTextCache.delete(key);\r\n                rulesModCache.delete(key);\r\n            });\r\n            prevFilterKey = themeKey;\r\n            if (!force && !rulesChanged && !themeChanged) {\r\n                return;\r\n            }\r\n            renderId++;\r\n            function setRule(target, index, rule) {\r\n                var selector = rule.selector,\r\n                    declarations = rule.declarations;\r\n                var getDeclarationText = function (dec) {\r\n                    var property = dec.property,\r\n                        value = dec.value,\r\n                        important = dec.important,\r\n                        sourceValue = dec.sourceValue;\r\n                    return \"\"\r\n                        .concat(property, \": \")\r\n                        .concat(value == null ? sourceValue : value)\r\n                        .concat(important ? \" !important\" : \"\", \";\");\r\n                };\r\n                var cssRulesText = \"\";\r\n                declarations.forEach(function (declarations) {\r\n                    cssRulesText += \"\".concat(\r\n                        getDeclarationText(declarations),\r\n                        \" \"\r\n                    );\r\n                });\r\n                var ruleText = \"\"\r\n                    .concat(selector, \" { \")\r\n                    .concat(cssRulesText, \" }\");\r\n                target.insertRule(ruleText, index);\r\n            }\r\n            var asyncDeclarations = new Map();\r\n            var varDeclarations = new Map();\r\n            var asyncDeclarationCounter = 0;\r\n            var varDeclarationCounter = 0;\r\n            var rootReadyGroup = {rule: null, rules: [], isGroup: true};\r\n            var groupRefs = new WeakMap();\r\n            function getGroup(rule) {\r\n                if (rule == null) {\r\n                    return rootReadyGroup;\r\n                }\r\n                if (groupRefs.has(rule)) {\r\n                    return groupRefs.get(rule);\r\n                }\r\n                var group = {rule: rule, rules: [], isGroup: true};\r\n                groupRefs.set(rule, group);\r\n                var parentGroup = getGroup(rule.parentRule);\r\n                parentGroup.rules.push(group);\r\n                return group;\r\n            }\r\n            varTypeChangeCleaners.forEach(function (clear) {\r\n                return clear();\r\n            });\r\n            varTypeChangeCleaners.clear();\r\n            modRules\r\n                .filter(function (r) {\r\n                    return r;\r\n                })\r\n                .forEach(function (_a) {\r\n                    var selector = _a.selector,\r\n                        declarations = _a.declarations,\r\n                        parentRule = _a.parentRule;\r\n                    var group = getGroup(parentRule);\r\n                    var readyStyleRule = {\r\n                        selector: selector,\r\n                        declarations: [],\r\n                        isGroup: false\r\n                    };\r\n                    var readyDeclarations = readyStyleRule.declarations;\r\n                    group.rules.push(readyStyleRule);\r\n                    function handleAsyncDeclaration(\r\n                        property,\r\n                        modified,\r\n                        important,\r\n                        sourceValue\r\n                    ) {\r\n                        var asyncKey = ++asyncDeclarationCounter;\r\n                        var asyncDeclaration = {\r\n                            property: property,\r\n                            value: null,\r\n                            important: important,\r\n                            asyncKey: asyncKey,\r\n                            sourceValue: sourceValue\r\n                        };\r\n                        readyDeclarations.push(asyncDeclaration);\r\n                        var currentRenderId = renderId;\r\n                        modified.then(function (asyncValue) {\r\n                            if (\r\n                                !asyncValue ||\r\n                                isAsyncCancelled() ||\r\n                                currentRenderId !== renderId\r\n                            ) {\r\n                                return;\r\n                            }\r\n                            asyncDeclaration.value = asyncValue;\r\n                            asyncQueue.add(function () {\r\n                                if (\r\n                                    isAsyncCancelled() ||\r\n                                    currentRenderId !== renderId\r\n                                ) {\r\n                                    return;\r\n                                }\r\n                                rebuildAsyncRule(asyncKey);\r\n                            });\r\n                        });\r\n                    }\r\n                    function handleVarDeclarations(\r\n                        property,\r\n                        modified,\r\n                        important,\r\n                        sourceValue\r\n                    ) {\r\n                        var _a = modified,\r\n                            varDecs = _a.declarations,\r\n                            onTypeChange = _a.onTypeChange;\r\n                        var varKey = ++varDeclarationCounter;\r\n                        var currentRenderId = renderId;\r\n                        var initialIndex = readyDeclarations.length;\r\n                        var oldDecs = [];\r\n                        if (varDecs.length === 0) {\r\n                            var tempDec = {\r\n                                property: property,\r\n                                value: sourceValue,\r\n                                important: important,\r\n                                sourceValue: sourceValue,\r\n                                varKey: varKey\r\n                            };\r\n                            readyDeclarations.push(tempDec);\r\n                            oldDecs = [tempDec];\r\n                        }\r\n                        varDecs.forEach(function (mod) {\r\n                            if (mod.value instanceof Promise) {\r\n                                handleAsyncDeclaration(\r\n                                    mod.property,\r\n                                    mod.value,\r\n                                    important,\r\n                                    sourceValue\r\n                                );\r\n                            } else {\r\n                                var readyDec = {\r\n                                    property: mod.property,\r\n                                    value: mod.value,\r\n                                    important: important,\r\n                                    sourceValue: sourceValue,\r\n                                    varKey: varKey\r\n                                };\r\n                                readyDeclarations.push(readyDec);\r\n                                oldDecs.push(readyDec);\r\n                            }\r\n                        });\r\n                        onTypeChange.addListener(function (newDecs) {\r\n                            if (\r\n                                isAsyncCancelled() ||\r\n                                currentRenderId !== renderId\r\n                            ) {\r\n                                return;\r\n                            }\r\n                            var readyVarDecs = newDecs.map(function (mod) {\r\n                                return {\r\n                                    property: mod.property,\r\n                                    value: mod.value,\r\n                                    important: important,\r\n                                    sourceValue: sourceValue,\r\n                                    varKey: varKey\r\n                                };\r\n                            });\r\n                            var index = readyDeclarations.indexOf(\r\n                                oldDecs[0],\r\n                                initialIndex\r\n                            );\r\n                            readyDeclarations.splice.apply(\r\n                                readyDeclarations,\r\n                                __spreadArray(\r\n                                    [index, oldDecs.length],\r\n                                    __read(readyVarDecs),\r\n                                    false\r\n                                )\r\n                            );\r\n                            oldDecs = readyVarDecs;\r\n                            rebuildVarRule(varKey);\r\n                        });\r\n                        varTypeChangeCleaners.add(function () {\r\n                            return onTypeChange.removeListeners();\r\n                        });\r\n                    }\r\n                    declarations.forEach(function (_a) {\r\n                        var property = _a.property,\r\n                            value = _a.value,\r\n                            important = _a.important,\r\n                            sourceValue = _a.sourceValue;\r\n                        if (typeof value === \"function\") {\r\n                            var modified = value(theme);\r\n                            if (modified instanceof Promise) {\r\n                                handleAsyncDeclaration(\r\n                                    property,\r\n                                    modified,\r\n                                    important,\r\n                                    sourceValue\r\n                                );\r\n                            } else if (property.startsWith(\"--\")) {\r\n                                handleVarDeclarations(\r\n                                    property,\r\n                                    modified,\r\n                                    important,\r\n                                    sourceValue\r\n                                );\r\n                            } else {\r\n                                readyDeclarations.push({\r\n                                    property: property,\r\n                                    value: modified,\r\n                                    important: important,\r\n                                    sourceValue: sourceValue\r\n                                });\r\n                            }\r\n                        } else {\r\n                            readyDeclarations.push({\r\n                                property: property,\r\n                                value: value,\r\n                                important: important,\r\n                                sourceValue: sourceValue\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            var sheet = prepareSheet();\r\n            function buildStyleSheet() {\r\n                function createTarget(group, parent) {\r\n                    var rule = group.rule;\r\n                    if (rule instanceof CSSMediaRule) {\r\n                        var media = rule.media;\r\n                        var index = parent.cssRules.length;\r\n                        parent.insertRule(\r\n                            \"@media \".concat(media.mediaText, \" {}\"),\r\n                            index\r\n                        );\r\n                        return parent.cssRules[index];\r\n                    }\r\n                    return parent;\r\n                }\r\n                function iterateReadyRules(group, target, styleIterator) {\r\n                    group.rules.forEach(function (r) {\r\n                        if (r.isGroup) {\r\n                            var t = createTarget(r, target);\r\n                            iterateReadyRules(r, t, styleIterator);\r\n                        } else {\r\n                            styleIterator(r, target);\r\n                        }\r\n                    });\r\n                }\r\n                iterateReadyRules(\r\n                    rootReadyGroup,\r\n                    sheet,\r\n                    function (rule, target) {\r\n                        var index = target.cssRules.length;\r\n                        rule.declarations.forEach(function (_a) {\r\n                            var asyncKey = _a.asyncKey,\r\n                                varKey = _a.varKey;\r\n                            if (asyncKey != null) {\r\n                                asyncDeclarations.set(asyncKey, {\r\n                                    rule: rule,\r\n                                    target: target,\r\n                                    index: index\r\n                                });\r\n                            }\r\n                            if (varKey != null) {\r\n                                varDeclarations.set(varKey, {\r\n                                    rule: rule,\r\n                                    target: target,\r\n                                    index: index\r\n                                });\r\n                            }\r\n                        });\r\n                        setRule(target, index, rule);\r\n                    }\r\n                );\r\n            }\r\n            function rebuildAsyncRule(key) {\r\n                var _a = asyncDeclarations.get(key),\r\n                    rule = _a.rule,\r\n                    target = _a.target,\r\n                    index = _a.index;\r\n                target.deleteRule(index);\r\n                setRule(target, index, rule);\r\n                asyncDeclarations.delete(key);\r\n            }\r\n            function rebuildVarRule(key) {\r\n                var _a = varDeclarations.get(key),\r\n                    rule = _a.rule,\r\n                    target = _a.target,\r\n                    index = _a.index;\r\n                target.deleteRule(index);\r\n                setRule(target, index, rule);\r\n            }\r\n            buildStyleSheet();\r\n        }\r\n        return {\r\n            modifySheet: modifySheet,\r\n            shouldRebuildStyle: shouldRebuildStyle\r\n        };\r\n    }\r\n\r\n    var STYLE_SELECTOR = 'style, link[rel*=\"stylesheet\" i]:not([disabled])';\r\n    function isFontsGoogleApiStyle(element) {\r\n        if (!element.href) {\r\n            return false;\r\n        }\r\n        try {\r\n            var elementURL = new URL(element.href);\r\n            return elementURL.hostname === \"fonts.googleapis.com\";\r\n        } catch (err) {\r\n            logInfo(\"Couldn't construct \".concat(element.href, \" as URL\"));\r\n            return false;\r\n        }\r\n    }\r\n    function shouldManageStyle(element) {\r\n        return (\r\n            (element instanceof HTMLStyleElement ||\r\n                element instanceof SVGStyleElement ||\r\n                (element instanceof HTMLLinkElement &&\r\n                    element.rel &&\r\n                    element.rel.toLowerCase().includes(\"stylesheet\") &&\r\n                    element.href &&\r\n                    !element.disabled &&\r\n                    (isFirefox\r\n                        ? !element.href.startsWith(\"moz-extension://\")\r\n                        : true) &&\r\n                    !isFontsGoogleApiStyle(element))) &&\r\n            !element.classList.contains(\"darkreader\") &&\r\n            element.media.toLowerCase() !== \"print\" &&\r\n            !element.classList.contains(\"stylus\")\r\n        );\r\n    }\r\n    function getManageableStyles(node, results, deep) {\r\n        if (results === void 0) {\r\n            results = [];\r\n        }\r\n        if (deep === void 0) {\r\n            deep = true;\r\n        }\r\n        if (shouldManageStyle(node)) {\r\n            results.push(node);\r\n        } else if (\r\n            node instanceof Element ||\r\n            (isShadowDomSupported && node instanceof ShadowRoot) ||\r\n            node === document\r\n        ) {\r\n            forEach(node.querySelectorAll(STYLE_SELECTOR), function (style) {\r\n                return getManageableStyles(style, results, false);\r\n            });\r\n            if (deep) {\r\n                iterateShadowHosts(node, function (host) {\r\n                    return getManageableStyles(host.shadowRoot, results, false);\r\n                });\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    var syncStyleSet = new WeakSet();\r\n    var corsStyleSet = new WeakSet();\r\n    var canOptimizeUsingProxy$1 = false;\r\n    document.addEventListener(\r\n        \"__darkreader__inlineScriptsAllowed\",\r\n        function () {\r\n            canOptimizeUsingProxy$1 = true;\r\n        }\r\n    );\r\n    var loadingLinkCounter = 0;\r\n    var rejectorsForLoadingLinks = new Map();\r\n    function cleanLoadingLinks() {\r\n        rejectorsForLoadingLinks.clear();\r\n    }\r\n    function manageStyle(element, _a) {\r\n        var update = _a.update,\r\n            loadingStart = _a.loadingStart,\r\n            loadingEnd = _a.loadingEnd;\r\n        var prevStyles = [];\r\n        var next = element;\r\n        while (\r\n            (next = next.nextElementSibling) &&\r\n            next.matches(\".darkreader\")\r\n        ) {\r\n            prevStyles.push(next);\r\n        }\r\n        var corsCopy =\r\n            prevStyles.find(function (el) {\r\n                return el.matches(\".darkreader--cors\") && !corsStyleSet.has(el);\r\n            }) || null;\r\n        var syncStyle =\r\n            prevStyles.find(function (el) {\r\n                return el.matches(\".darkreader--sync\") && !syncStyleSet.has(el);\r\n            }) || null;\r\n        var corsCopyPositionWatcher = null;\r\n        var syncStylePositionWatcher = null;\r\n        var cancelAsyncOperations = false;\r\n        var isOverrideEmpty = true;\r\n        var sheetModifier = createStyleSheetModifier();\r\n        var observer = new MutationObserver(function () {\r\n            update();\r\n        });\r\n        var observerOptions = {\r\n            attributes: true,\r\n            childList: true,\r\n            subtree: true,\r\n            characterData: true\r\n        };\r\n        function containsCSSImport() {\r\n            return (\r\n                element instanceof HTMLStyleElement &&\r\n                element.textContent.trim().match(cssImportRegex)\r\n            );\r\n        }\r\n        function hasImports(cssRules, checkCrossOrigin) {\r\n            var result = false;\r\n            if (cssRules) {\r\n                var rule = void 0;\r\n                cssRulesLoop: for (\r\n                    var i = 0, len = cssRules.length;\r\n                    i < len;\r\n                    i++\r\n                ) {\r\n                    rule = cssRules[i];\r\n                    if (rule.href) {\r\n                        if (checkCrossOrigin) {\r\n                            if (\r\n                                rule.href.startsWith(\"http\") &&\r\n                                !rule.href.startsWith(location.origin)\r\n                            ) {\r\n                                result = true;\r\n                                break cssRulesLoop;\r\n                            }\r\n                        } else {\r\n                            result = true;\r\n                            break cssRulesLoop;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        function getRulesSync() {\r\n            if (corsCopy) {\r\n                return corsCopy.sheet.cssRules;\r\n            }\r\n            if (containsCSSImport()) {\r\n                return null;\r\n            }\r\n            var cssRules = safeGetSheetRules();\r\n            if (\r\n                element instanceof HTMLLinkElement &&\r\n                !isRelativeHrefOnAbsolutePath(element.href) &&\r\n                hasImports(cssRules, false)\r\n            ) {\r\n                return null;\r\n            }\r\n            if (hasImports(cssRules, true)) {\r\n                return null;\r\n            }\r\n            return cssRules;\r\n        }\r\n        function insertStyle() {\r\n            if (corsCopy) {\r\n                if (element.nextSibling !== corsCopy) {\r\n                    element.parentNode.insertBefore(\r\n                        corsCopy,\r\n                        element.nextSibling\r\n                    );\r\n                }\r\n                if (corsCopy.nextSibling !== syncStyle) {\r\n                    element.parentNode.insertBefore(\r\n                        syncStyle,\r\n                        corsCopy.nextSibling\r\n                    );\r\n                }\r\n            } else if (element.nextSibling !== syncStyle) {\r\n                element.parentNode.insertBefore(syncStyle, element.nextSibling);\r\n            }\r\n        }\r\n        function createSyncStyle() {\r\n            syncStyle =\r\n                element instanceof SVGStyleElement\r\n                    ? document.createElementNS(\r\n                          \"http://www.w3.org/2000/svg\",\r\n                          \"style\"\r\n                      )\r\n                    : document.createElement(\"style\");\r\n            syncStyle.classList.add(\"darkreader\");\r\n            syncStyle.classList.add(\"darkreader--sync\");\r\n            syncStyle.media = \"screen\";\r\n            if (element.title) {\r\n                syncStyle.title = element.title;\r\n            }\r\n            syncStyleSet.add(syncStyle);\r\n        }\r\n        var isLoadingRules = false;\r\n        var wasLoadingError = false;\r\n        var loadingLinkId = ++loadingLinkCounter;\r\n        function getRulesAsync() {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var cssText,\r\n                    cssBasePath,\r\n                    _a,\r\n                    cssRules,\r\n                    accessError,\r\n                    fullCSSText;\r\n                var _b;\r\n                return __generator(this, function (_c) {\r\n                    switch (_c.label) {\r\n                        case 0:\r\n                            if (!(element instanceof HTMLLinkElement))\r\n                                return [3, 7];\r\n                            (_a = __read(getRulesOrError(), 2)),\r\n                                (cssRules = _a[0]),\r\n                                (accessError = _a[1]);\r\n                            if (\r\n                                !(\r\n                                    (!cssRules && !accessError && !isSafari) ||\r\n                                    (isSafari && !element.sheet) ||\r\n                                    isStillLoadingError(accessError)\r\n                                )\r\n                            )\r\n                                return [3, 5];\r\n                            _c.label = 1;\r\n                        case 1:\r\n                            _c.trys.push([1, 3, , 4]);\r\n                            return [4, linkLoading(element, loadingLinkId)];\r\n                        case 2:\r\n                            _c.sent();\r\n                            return [3, 4];\r\n                        case 3:\r\n                            _c.sent();\r\n                            wasLoadingError = true;\r\n                            return [3, 4];\r\n                        case 4:\r\n                            if (cancelAsyncOperations) {\r\n                                return [2, null];\r\n                            }\r\n                            (_b = __read(getRulesOrError(), 2)),\r\n                                (cssRules = _b[0]),\r\n                                (accessError = _b[1]);\r\n                            _c.label = 5;\r\n                        case 5:\r\n                            if (cssRules) {\r\n                                if (!hasImports(cssRules, false)) {\r\n                                    return [2, cssRules];\r\n                                }\r\n                            }\r\n                            return [4, loadText(element.href)];\r\n                        case 6:\r\n                            cssText = _c.sent();\r\n                            cssBasePath = getCSSBaseBath(element.href);\r\n                            if (cancelAsyncOperations) {\r\n                                return [2, null];\r\n                            }\r\n                            return [3, 8];\r\n                        case 7:\r\n                            if (containsCSSImport()) {\r\n                                cssText = element.textContent.trim();\r\n                                cssBasePath = getCSSBaseBath(location.href);\r\n                            } else {\r\n                                return [2, null];\r\n                            }\r\n                            _c.label = 8;\r\n                        case 8:\r\n                            if (!cssText) return [3, 13];\r\n                            _c.label = 9;\r\n                        case 9:\r\n                            _c.trys.push([9, 11, , 12]);\r\n                            return [4, replaceCSSImports(cssText, cssBasePath)];\r\n                        case 10:\r\n                            fullCSSText = _c.sent();\r\n                            corsCopy = createCORSCopy(element, fullCSSText);\r\n                            return [3, 12];\r\n                        case 11:\r\n                            _c.sent();\r\n                            return [3, 12];\r\n                        case 12:\r\n                            if (corsCopy) {\r\n                                corsCopyPositionWatcher = watchForNodePosition(\r\n                                    corsCopy,\r\n                                    \"prev-sibling\"\r\n                                );\r\n                                return [2, corsCopy.sheet.cssRules];\r\n                            }\r\n                            _c.label = 13;\r\n                        case 13:\r\n                            return [2, null];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        function details(options) {\r\n            var rules = getRulesSync();\r\n            if (!rules) {\r\n                if (options.secondRound) {\r\n                    return null;\r\n                }\r\n                if (isLoadingRules || wasLoadingError) {\r\n                    return null;\r\n                }\r\n                isLoadingRules = true;\r\n                loadingStart();\r\n                getRulesAsync()\r\n                    .then(function (results) {\r\n                        isLoadingRules = false;\r\n                        loadingEnd();\r\n                        if (results) {\r\n                            update();\r\n                        }\r\n                    })\r\n                    .catch(function (err) {\r\n                        isLoadingRules = false;\r\n                        loadingEnd();\r\n                    });\r\n                return null;\r\n            }\r\n            return {rules: rules};\r\n        }\r\n        var forceRenderStyle = false;\r\n        function render(theme, ignoreImageAnalysis) {\r\n            var rules = getRulesSync();\r\n            if (!rules) {\r\n                return;\r\n            }\r\n            cancelAsyncOperations = false;\r\n            function removeCSSRulesFromSheet(sheet) {\r\n                for (var i = sheet.cssRules.length - 1; i >= 0; i--) {\r\n                    sheet.deleteRule(i);\r\n                }\r\n            }\r\n            function prepareOverridesSheet() {\r\n                if (!syncStyle) {\r\n                    createSyncStyle();\r\n                }\r\n                syncStylePositionWatcher && syncStylePositionWatcher.stop();\r\n                insertStyle();\r\n                if (syncStyle.sheet == null) {\r\n                    syncStyle.textContent = \"\";\r\n                }\r\n                var sheet = syncStyle.sheet;\r\n                removeCSSRulesFromSheet(sheet);\r\n                if (syncStylePositionWatcher) {\r\n                    syncStylePositionWatcher.run();\r\n                } else {\r\n                    syncStylePositionWatcher = watchForNodePosition(\r\n                        syncStyle,\r\n                        \"prev-sibling\",\r\n                        function () {\r\n                            forceRenderStyle = true;\r\n                            buildOverrides();\r\n                        }\r\n                    );\r\n                }\r\n                return syncStyle.sheet;\r\n            }\r\n            function buildOverrides() {\r\n                var force = forceRenderStyle;\r\n                forceRenderStyle = false;\r\n                sheetModifier.modifySheet({\r\n                    prepareSheet: prepareOverridesSheet,\r\n                    sourceCSSRules: rules,\r\n                    theme: theme,\r\n                    ignoreImageAnalysis: ignoreImageAnalysis,\r\n                    force: force,\r\n                    isAsyncCancelled: function () {\r\n                        return cancelAsyncOperations;\r\n                    }\r\n                });\r\n                isOverrideEmpty = syncStyle.sheet.cssRules.length === 0;\r\n                if (sheetModifier.shouldRebuildStyle()) {\r\n                    addReadyStateCompleteListener(function () {\r\n                        return update();\r\n                    });\r\n                }\r\n            }\r\n            buildOverrides();\r\n        }\r\n        function getRulesOrError() {\r\n            try {\r\n                if (element.sheet == null) {\r\n                    return [null, null];\r\n                }\r\n                return [element.sheet.cssRules, null];\r\n            } catch (err) {\r\n                return [null, err];\r\n            }\r\n        }\r\n        function isStillLoadingError(error) {\r\n            return error && error.message && error.message.includes(\"loading\");\r\n        }\r\n        function safeGetSheetRules() {\r\n            var _a = __read(getRulesOrError(), 2),\r\n                cssRules = _a[0],\r\n                err = _a[1];\r\n            if (err) {\r\n                return null;\r\n            }\r\n            return cssRules;\r\n        }\r\n        function watchForSheetChanges() {\r\n            watchForSheetChangesUsingProxy();\r\n            if (!(canOptimizeUsingProxy$1 && element.sheet)) {\r\n                watchForSheetChangesUsingRAF();\r\n            }\r\n        }\r\n        var rulesChangeKey = null;\r\n        var rulesCheckFrameId = null;\r\n        function getRulesChangeKey() {\r\n            var rules = safeGetSheetRules();\r\n            return rules ? rules.length : null;\r\n        }\r\n        function didRulesKeyChange() {\r\n            return getRulesChangeKey() !== rulesChangeKey;\r\n        }\r\n        function watchForSheetChangesUsingRAF() {\r\n            rulesChangeKey = getRulesChangeKey();\r\n            stopWatchingForSheetChangesUsingRAF();\r\n            var checkForUpdate = function () {\r\n                if (didRulesKeyChange()) {\r\n                    rulesChangeKey = getRulesChangeKey();\r\n                    update();\r\n                }\r\n                if (canOptimizeUsingProxy$1 && element.sheet) {\r\n                    stopWatchingForSheetChangesUsingRAF();\r\n                    return;\r\n                }\r\n                rulesCheckFrameId = requestAnimationFrame(checkForUpdate);\r\n            };\r\n            checkForUpdate();\r\n        }\r\n        function stopWatchingForSheetChangesUsingRAF() {\r\n            cancelAnimationFrame(rulesCheckFrameId);\r\n        }\r\n        var areSheetChangesPending = false;\r\n        function onSheetChange() {\r\n            canOptimizeUsingProxy$1 = true;\r\n            stopWatchingForSheetChangesUsingRAF();\r\n            if (areSheetChangesPending) {\r\n                return;\r\n            }\r\n            function handleSheetChanges() {\r\n                areSheetChangesPending = false;\r\n                if (cancelAsyncOperations) {\r\n                    return;\r\n                }\r\n                update();\r\n            }\r\n            areSheetChangesPending = true;\r\n            if (typeof queueMicrotask === \"function\") {\r\n                queueMicrotask(handleSheetChanges);\r\n            } else {\r\n                requestAnimationFrame(handleSheetChanges);\r\n            }\r\n        }\r\n        function watchForSheetChangesUsingProxy() {\r\n            element.addEventListener(\r\n                \"__darkreader__updateSheet\",\r\n                onSheetChange\r\n            );\r\n        }\r\n        function stopWatchingForSheetChangesUsingProxy() {\r\n            element.removeEventListener(\r\n                \"__darkreader__updateSheet\",\r\n                onSheetChange\r\n            );\r\n        }\r\n        function stopWatchingForSheetChanges() {\r\n            stopWatchingForSheetChangesUsingProxy();\r\n            stopWatchingForSheetChangesUsingRAF();\r\n        }\r\n        function pause() {\r\n            observer.disconnect();\r\n            cancelAsyncOperations = true;\r\n            corsCopyPositionWatcher && corsCopyPositionWatcher.stop();\r\n            syncStylePositionWatcher && syncStylePositionWatcher.stop();\r\n            stopWatchingForSheetChanges();\r\n        }\r\n        function destroy() {\r\n            pause();\r\n            removeNode(corsCopy);\r\n            removeNode(syncStyle);\r\n            loadingEnd();\r\n            if (rejectorsForLoadingLinks.has(loadingLinkId)) {\r\n                var reject = rejectorsForLoadingLinks.get(loadingLinkId);\r\n                rejectorsForLoadingLinks.delete(loadingLinkId);\r\n                reject && reject();\r\n            }\r\n        }\r\n        function watch() {\r\n            observer.observe(element, observerOptions);\r\n            if (element instanceof HTMLStyleElement) {\r\n                watchForSheetChanges();\r\n            }\r\n        }\r\n        var maxMoveCount = 10;\r\n        var moveCount = 0;\r\n        function restore() {\r\n            if (!syncStyle) {\r\n                return;\r\n            }\r\n            moveCount++;\r\n            if (moveCount > maxMoveCount) {\r\n                return;\r\n            }\r\n            insertStyle();\r\n            corsCopyPositionWatcher && corsCopyPositionWatcher.skip();\r\n            syncStylePositionWatcher && syncStylePositionWatcher.skip();\r\n            if (!isOverrideEmpty) {\r\n                forceRenderStyle = true;\r\n                update();\r\n            }\r\n        }\r\n        return {\r\n            details: details,\r\n            render: render,\r\n            pause: pause,\r\n            destroy: destroy,\r\n            watch: watch,\r\n            restore: restore\r\n        };\r\n    }\r\n    function linkLoading(link, loadingId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [\r\n                    2,\r\n                    new Promise(function (resolve, reject) {\r\n                        var cleanUp = function () {\r\n                            link.removeEventListener(\"load\", onLoad);\r\n                            link.removeEventListener(\"error\", onError);\r\n                            rejectorsForLoadingLinks.delete(loadingId);\r\n                        };\r\n                        var onLoad = function () {\r\n                            cleanUp();\r\n                            resolve();\r\n                        };\r\n                        var onError = function () {\r\n                            cleanUp();\r\n                            reject(\r\n                                \"Linkelement \"\r\n                                    .concat(loadingId, \" couldn't be loaded. \")\r\n                                    .concat(link.href)\r\n                            );\r\n                        };\r\n                        rejectorsForLoadingLinks.set(loadingId, function () {\r\n                            cleanUp();\r\n                            reject();\r\n                        });\r\n                        link.addEventListener(\"load\", onLoad);\r\n                        link.addEventListener(\"error\", onError);\r\n                        if (!link.href) {\r\n                            onError();\r\n                        }\r\n                    })\r\n                ];\r\n            });\r\n        });\r\n    }\r\n    function getCSSImportURL(importDeclaration) {\r\n        return getCSSURLValue(\r\n            importDeclaration\r\n                .substring(7)\r\n                .trim()\r\n                .replace(/;$/, \"\")\r\n                .replace(/screen$/, \"\")\r\n        );\r\n    }\r\n    function loadText(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!url.startsWith(\"data:\")) return [3, 3];\r\n                        return [4, fetch(url)];\r\n                    case 1:\r\n                        return [4, _a.sent().text()];\r\n                    case 2:\r\n                        return [2, _a.sent()];\r\n                    case 3:\r\n                        return [\r\n                            4,\r\n                            bgFetch({\r\n                                url: url,\r\n                                responseType: \"text\",\r\n                                mimeType: \"text/css\",\r\n                                origin: window.location.origin\r\n                            })\r\n                        ];\r\n                    case 4:\r\n                        return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function replaceCSSImports(cssText, basePath, cache) {\r\n        if (cache === void 0) {\r\n            cache = new Map();\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var importMatches,\r\n                importMatches_1,\r\n                importMatches_1_1,\r\n                match,\r\n                importURL,\r\n                absoluteURL,\r\n                importedCSS,\r\n                e_1_1;\r\n            var e_1, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        cssText = removeCSSComments(cssText);\r\n                        cssText = replaceCSSFontFace(cssText);\r\n                        cssText = replaceCSSRelativeURLsWithAbsolute(\r\n                            cssText,\r\n                            basePath\r\n                        );\r\n                        importMatches = getMatches(cssImportRegex, cssText);\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 10, 11, 12]);\r\n                        (importMatches_1 = __values(importMatches)),\r\n                            (importMatches_1_1 = importMatches_1.next());\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        if (!!importMatches_1_1.done) return [3, 9];\r\n                        match = importMatches_1_1.value;\r\n                        importURL = getCSSImportURL(match);\r\n                        absoluteURL = getAbsoluteURL(basePath, importURL);\r\n                        importedCSS = void 0;\r\n                        if (!cache.has(absoluteURL)) return [3, 3];\r\n                        importedCSS = cache.get(absoluteURL);\r\n                        return [3, 7];\r\n                    case 3:\r\n                        _b.trys.push([3, 6, , 7]);\r\n                        return [4, loadText(absoluteURL)];\r\n                    case 4:\r\n                        importedCSS = _b.sent();\r\n                        cache.set(absoluteURL, importedCSS);\r\n                        return [\r\n                            4,\r\n                            replaceCSSImports(\r\n                                importedCSS,\r\n                                getCSSBaseBath(absoluteURL),\r\n                                cache\r\n                            )\r\n                        ];\r\n                    case 5:\r\n                        importedCSS = _b.sent();\r\n                        return [3, 7];\r\n                    case 6:\r\n                        _b.sent();\r\n                        importedCSS = \"\";\r\n                        return [3, 7];\r\n                    case 7:\r\n                        cssText = cssText.split(match).join(importedCSS);\r\n                        _b.label = 8;\r\n                    case 8:\r\n                        importMatches_1_1 = importMatches_1.next();\r\n                        return [3, 2];\r\n                    case 9:\r\n                        return [3, 12];\r\n                    case 10:\r\n                        e_1_1 = _b.sent();\r\n                        e_1 = {error: e_1_1};\r\n                        return [3, 12];\r\n                    case 11:\r\n                        try {\r\n                            if (\r\n                                importMatches_1_1 &&\r\n                                !importMatches_1_1.done &&\r\n                                (_a = importMatches_1.return)\r\n                            )\r\n                                _a.call(importMatches_1);\r\n                        } finally {\r\n                            if (e_1) throw e_1.error;\r\n                        }\r\n                        return [7];\r\n                    case 12:\r\n                        cssText = cssText.trim();\r\n                        return [2, cssText];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function createCORSCopy(srcElement, cssText) {\r\n        if (!cssText) {\r\n            return null;\r\n        }\r\n        var cors = document.createElement(\"style\");\r\n        cors.classList.add(\"darkreader\");\r\n        cors.classList.add(\"darkreader--cors\");\r\n        cors.media = \"screen\";\r\n        cors.textContent = cssText;\r\n        srcElement.parentNode.insertBefore(cors, srcElement.nextSibling);\r\n        cors.sheet.disabled = true;\r\n        corsStyleSet.add(cors);\r\n        return cors;\r\n    }\r\n\r\n    var observers = [];\r\n    var observedRoots;\r\n    var undefinedGroups = new Map();\r\n    var elementsDefinitionCallback;\r\n    function collectUndefinedElements(root) {\r\n        if (!isDefinedSelectorSupported) {\r\n            return;\r\n        }\r\n        forEach(root.querySelectorAll(\":not(:defined)\"), function (el) {\r\n            var tag = el.tagName.toLowerCase();\r\n            if (!tag.includes(\"-\")) {\r\n                var extendedTag = el.getAttribute(\"is\");\r\n                if (extendedTag) {\r\n                    tag = extendedTag;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n            if (!undefinedGroups.has(tag)) {\r\n                undefinedGroups.set(tag, new Set());\r\n                customElementsWhenDefined(tag).then(function () {\r\n                    if (elementsDefinitionCallback) {\r\n                        var elements = undefinedGroups.get(tag);\r\n                        undefinedGroups.delete(tag);\r\n                        elementsDefinitionCallback(Array.from(elements));\r\n                    }\r\n                });\r\n            }\r\n            undefinedGroups.get(tag).add(el);\r\n        });\r\n    }\r\n    var canOptimizeUsingProxy = false;\r\n    document.addEventListener(\r\n        \"__darkreader__inlineScriptsAllowed\",\r\n        function () {\r\n            canOptimizeUsingProxy = true;\r\n        }\r\n    );\r\n    var resolvers = new Map();\r\n    function handleIsDefined(e) {\r\n        canOptimizeUsingProxy = true;\r\n        if (resolvers.has(e.detail.tag)) {\r\n            var resolve = resolvers.get(e.detail.tag);\r\n            resolve();\r\n        }\r\n    }\r\n    function customElementsWhenDefined(tag) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [\r\n                    2,\r\n                    new Promise(function (resolve) {\r\n                        if (\r\n                            window.customElements &&\r\n                            typeof customElements.whenDefined === \"function\"\r\n                        ) {\r\n                            customElements.whenDefined(tag).then(function () {\r\n                                return resolve();\r\n                            });\r\n                        } else if (canOptimizeUsingProxy) {\r\n                            resolvers.set(tag, resolve);\r\n                            document.dispatchEvent(\r\n                                new CustomEvent(\r\n                                    \"__darkreader__addUndefinedResolver\",\r\n                                    {detail: {tag: tag}}\r\n                                )\r\n                            );\r\n                        } else {\r\n                            var checkIfDefined_1 = function () {\r\n                                var elements = undefinedGroups.get(tag);\r\n                                if (elements && elements.size > 0) {\r\n                                    if (\r\n                                        elements\r\n                                            .values()\r\n                                            .next()\r\n                                            .value.matches(\":defined\")\r\n                                    ) {\r\n                                        resolve();\r\n                                    } else {\r\n                                        requestAnimationFrame(checkIfDefined_1);\r\n                                    }\r\n                                }\r\n                            };\r\n                            requestAnimationFrame(checkIfDefined_1);\r\n                        }\r\n                    })\r\n                ];\r\n            });\r\n        });\r\n    }\r\n    function watchWhenCustomElementsDefined(callback) {\r\n        elementsDefinitionCallback = callback;\r\n    }\r\n    function unsubscribeFromDefineCustomElements() {\r\n        elementsDefinitionCallback = null;\r\n        undefinedGroups.clear();\r\n        document.removeEventListener(\r\n            \"__darkreader__isDefined\",\r\n            handleIsDefined\r\n        );\r\n    }\r\n    function watchForStyleChanges(currentStyles, update, shadowRootDiscovered) {\r\n        stopWatchingForStyleChanges();\r\n        var prevStyles = new Set(currentStyles);\r\n        var prevStyleSiblings = new WeakMap();\r\n        var nextStyleSiblings = new WeakMap();\r\n        function saveStylePosition(style) {\r\n            prevStyleSiblings.set(style, style.previousElementSibling);\r\n            nextStyleSiblings.set(style, style.nextElementSibling);\r\n        }\r\n        function forgetStylePosition(style) {\r\n            prevStyleSiblings.delete(style);\r\n            nextStyleSiblings.delete(style);\r\n        }\r\n        function didStylePositionChange(style) {\r\n            return (\r\n                style.previousElementSibling !== prevStyleSiblings.get(style) ||\r\n                style.nextElementSibling !== nextStyleSiblings.get(style)\r\n            );\r\n        }\r\n        currentStyles.forEach(saveStylePosition);\r\n        function handleStyleOperations(operations) {\r\n            var createdStyles = operations.createdStyles,\r\n                removedStyles = operations.removedStyles,\r\n                movedStyles = operations.movedStyles;\r\n            createdStyles.forEach(function (s) {\r\n                return saveStylePosition(s);\r\n            });\r\n            movedStyles.forEach(function (s) {\r\n                return saveStylePosition(s);\r\n            });\r\n            removedStyles.forEach(function (s) {\r\n                return forgetStylePosition(s);\r\n            });\r\n            createdStyles.forEach(function (s) {\r\n                return prevStyles.add(s);\r\n            });\r\n            removedStyles.forEach(function (s) {\r\n                return prevStyles.delete(s);\r\n            });\r\n            if (\r\n                createdStyles.size + removedStyles.size + movedStyles.size >\r\n                0\r\n            ) {\r\n                update({\r\n                    created: Array.from(createdStyles),\r\n                    removed: Array.from(removedStyles),\r\n                    moved: Array.from(movedStyles),\r\n                    updated: []\r\n                });\r\n            }\r\n        }\r\n        function handleMinorTreeMutations(_a) {\r\n            var additions = _a.additions,\r\n                moves = _a.moves,\r\n                deletions = _a.deletions;\r\n            var createdStyles = new Set();\r\n            var removedStyles = new Set();\r\n            var movedStyles = new Set();\r\n            additions.forEach(function (node) {\r\n                return getManageableStyles(node).forEach(function (style) {\r\n                    return createdStyles.add(style);\r\n                });\r\n            });\r\n            deletions.forEach(function (node) {\r\n                return getManageableStyles(node).forEach(function (style) {\r\n                    return removedStyles.add(style);\r\n                });\r\n            });\r\n            moves.forEach(function (node) {\r\n                return getManageableStyles(node).forEach(function (style) {\r\n                    return movedStyles.add(style);\r\n                });\r\n            });\r\n            handleStyleOperations({\r\n                createdStyles: createdStyles,\r\n                removedStyles: removedStyles,\r\n                movedStyles: movedStyles\r\n            });\r\n            additions.forEach(function (n) {\r\n                iterateShadowHosts(n, subscribeForShadowRootChanges);\r\n                collectUndefinedElements(n);\r\n            });\r\n        }\r\n        function handleHugeTreeMutations(root) {\r\n            var styles = new Set(getManageableStyles(root));\r\n            var createdStyles = new Set();\r\n            var removedStyles = new Set();\r\n            var movedStyles = new Set();\r\n            styles.forEach(function (s) {\r\n                if (!prevStyles.has(s)) {\r\n                    createdStyles.add(s);\r\n                }\r\n            });\r\n            prevStyles.forEach(function (s) {\r\n                if (!styles.has(s)) {\r\n                    removedStyles.add(s);\r\n                }\r\n            });\r\n            styles.forEach(function (s) {\r\n                if (\r\n                    !createdStyles.has(s) &&\r\n                    !removedStyles.has(s) &&\r\n                    didStylePositionChange(s)\r\n                ) {\r\n                    movedStyles.add(s);\r\n                }\r\n            });\r\n            handleStyleOperations({\r\n                createdStyles: createdStyles,\r\n                removedStyles: removedStyles,\r\n                movedStyles: movedStyles\r\n            });\r\n            iterateShadowHosts(root, subscribeForShadowRootChanges);\r\n            collectUndefinedElements(root);\r\n        }\r\n        function handleAttributeMutations(mutations) {\r\n            var updatedStyles = new Set();\r\n            var removedStyles = new Set();\r\n            mutations.forEach(function (m) {\r\n                var target = m.target;\r\n                if (target.isConnected) {\r\n                    if (shouldManageStyle(target)) {\r\n                        updatedStyles.add(target);\r\n                    } else if (\r\n                        target instanceof HTMLLinkElement &&\r\n                        target.disabled\r\n                    ) {\r\n                        removedStyles.add(target);\r\n                    }\r\n                }\r\n            });\r\n            if (updatedStyles.size + removedStyles.size > 0) {\r\n                update({\r\n                    updated: Array.from(updatedStyles),\r\n                    created: [],\r\n                    removed: Array.from(removedStyles),\r\n                    moved: []\r\n                });\r\n            }\r\n        }\r\n        function observe(root) {\r\n            var treeObserver = createOptimizedTreeObserver(root, {\r\n                onMinorMutations: handleMinorTreeMutations,\r\n                onHugeMutations: handleHugeTreeMutations\r\n            });\r\n            var attrObserver = new MutationObserver(handleAttributeMutations);\r\n            attrObserver.observe(root, {\r\n                attributes: true,\r\n                attributeFilter: [\"rel\", \"disabled\", \"media\", \"href\"],\r\n                subtree: true\r\n            });\r\n            observers.push(treeObserver, attrObserver);\r\n            observedRoots.add(root);\r\n        }\r\n        function subscribeForShadowRootChanges(node) {\r\n            var shadowRoot = node.shadowRoot;\r\n            if (shadowRoot == null || observedRoots.has(shadowRoot)) {\r\n                return;\r\n            }\r\n            observe(shadowRoot);\r\n            shadowRootDiscovered(shadowRoot);\r\n        }\r\n        observe(document);\r\n        iterateShadowHosts(\r\n            document.documentElement,\r\n            subscribeForShadowRootChanges\r\n        );\r\n        watchWhenCustomElementsDefined(function (hosts) {\r\n            var newStyles = [];\r\n            hosts.forEach(function (host) {\r\n                return push(newStyles, getManageableStyles(host.shadowRoot));\r\n            });\r\n            update({created: newStyles, updated: [], removed: [], moved: []});\r\n            hosts.forEach(function (host) {\r\n                var shadowRoot = host.shadowRoot;\r\n                if (shadowRoot == null) {\r\n                    return;\r\n                }\r\n                subscribeForShadowRootChanges(host);\r\n                iterateShadowHosts(shadowRoot, subscribeForShadowRootChanges);\r\n                collectUndefinedElements(shadowRoot);\r\n            });\r\n        });\r\n        document.addEventListener(\"__darkreader__isDefined\", handleIsDefined);\r\n        collectUndefinedElements(document);\r\n    }\r\n    function resetObservers() {\r\n        observers.forEach(function (o) {\r\n            return o.disconnect();\r\n        });\r\n        observers.splice(0, observers.length);\r\n        observedRoots = new WeakSet();\r\n    }\r\n    function stopWatchingForStyleChanges() {\r\n        resetObservers();\r\n        unsubscribeFromDefineCustomElements();\r\n    }\r\n\r\n    function hexify(number) {\r\n        return (number < 16 ? \"0\" : \"\") + number.toString(16);\r\n    }\r\n    function generateUID() {\r\n        if (\"randomUUID\" in crypto) {\r\n            var uuid = crypto.randomUUID();\r\n            return (\r\n                uuid.substring(0, 8) +\r\n                uuid.substring(9, 13) +\r\n                uuid.substring(14, 18) +\r\n                uuid.substring(19, 23) +\r\n                uuid.substring(24)\r\n            );\r\n        }\r\n        return Array.from(crypto.getRandomValues(new Uint8Array(16)))\r\n            .map(function (x) {\r\n                return hexify(x);\r\n            })\r\n            .join(\"\");\r\n    }\r\n\r\n    var adoptedStyleOverrides = new WeakMap();\r\n    var overrideList = new WeakSet();\r\n    function createAdoptedStyleSheetOverride(node) {\r\n        var cancelAsyncOperations = false;\r\n        function injectSheet(sheet, override) {\r\n            var newSheets = __spreadArray(\r\n                [],\r\n                __read(node.adoptedStyleSheets),\r\n                false\r\n            );\r\n            var sheetIndex = newSheets.indexOf(sheet);\r\n            var existingIndex = newSheets.indexOf(override);\r\n            if (sheetIndex === existingIndex - 1) {\r\n                return;\r\n            }\r\n            if (existingIndex >= 0) {\r\n                newSheets.splice(existingIndex, 1);\r\n            }\r\n            newSheets.splice(sheetIndex + 1, 0, override);\r\n            node.adoptedStyleSheets = newSheets;\r\n        }\r\n        function destroy() {\r\n            cancelAsyncOperations = true;\r\n            var newSheets = __spreadArray(\r\n                [],\r\n                __read(node.adoptedStyleSheets),\r\n                false\r\n            );\r\n            node.adoptedStyleSheets.forEach(function (adoptedStyleSheet) {\r\n                if (overrideList.has(adoptedStyleSheet)) {\r\n                    var existingIndex = newSheets.indexOf(adoptedStyleSheet);\r\n                    if (existingIndex >= 0) {\r\n                        newSheets.splice(existingIndex, 1);\r\n                    }\r\n                    adoptedStyleOverrides.delete(adoptedStyleSheet);\r\n                    overrideList.delete(adoptedStyleSheet);\r\n                }\r\n            });\r\n            node.adoptedStyleSheets = newSheets;\r\n        }\r\n        function render(theme, ignoreImageAnalysis) {\r\n            node.adoptedStyleSheets.forEach(function (sheet) {\r\n                if (overrideList.has(sheet)) {\r\n                    return;\r\n                }\r\n                var rules = sheet.rules;\r\n                var override = new CSSStyleSheet();\r\n                function prepareOverridesSheet() {\r\n                    for (var i = override.cssRules.length - 1; i >= 0; i--) {\r\n                        override.deleteRule(i);\r\n                    }\r\n                    injectSheet(sheet, override);\r\n                    adoptedStyleOverrides.set(sheet, override);\r\n                    overrideList.add(override);\r\n                    return override;\r\n                }\r\n                var sheetModifier = createStyleSheetModifier();\r\n                sheetModifier.modifySheet({\r\n                    prepareSheet: prepareOverridesSheet,\r\n                    sourceCSSRules: rules,\r\n                    theme: theme,\r\n                    ignoreImageAnalysis: ignoreImageAnalysis,\r\n                    force: false,\r\n                    isAsyncCancelled: function () {\r\n                        return cancelAsyncOperations;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return {\r\n            render: render,\r\n            destroy: destroy\r\n        };\r\n    }\r\n\r\n    function injectProxy(enableStyleSheetsProxy) {\r\n        document.dispatchEvent(\r\n            new CustomEvent(\"__darkreader__inlineScriptsAllowed\")\r\n        );\r\n        var addRuleDescriptor = Object.getOwnPropertyDescriptor(\r\n            CSSStyleSheet.prototype,\r\n            \"addRule\"\r\n        );\r\n        var insertRuleDescriptor = Object.getOwnPropertyDescriptor(\r\n            CSSStyleSheet.prototype,\r\n            \"insertRule\"\r\n        );\r\n        var deleteRuleDescriptor = Object.getOwnPropertyDescriptor(\r\n            CSSStyleSheet.prototype,\r\n            \"deleteRule\"\r\n        );\r\n        var removeRuleDescriptor = Object.getOwnPropertyDescriptor(\r\n            CSSStyleSheet.prototype,\r\n            \"removeRule\"\r\n        );\r\n        var documentStyleSheetsDescriptor = enableStyleSheetsProxy\r\n            ? Object.getOwnPropertyDescriptor(Document.prototype, \"styleSheets\")\r\n            : null;\r\n        var shouldWrapHTMLElement = [\r\n            \"baidu.com\",\r\n            \"baike.baidu.com\",\r\n            \"ditu.baidu.com\",\r\n            \"map.baidu.com\",\r\n            \"maps.baidu.com\",\r\n            \"haokan.baidu.com\",\r\n            \"pan.baidu.com\",\r\n            \"passport.baidu.com\",\r\n            \"tieba.baidu.com\",\r\n            \"www.baidu.com\"\r\n        ].includes(location.hostname);\r\n        var getElementsByTagNameDescriptor = shouldWrapHTMLElement\r\n            ? Object.getOwnPropertyDescriptor(\r\n                  Element.prototype,\r\n                  \"getElementsByTagName\"\r\n              )\r\n            : null;\r\n        var cleanUp = function () {\r\n            Object.defineProperty(\r\n                CSSStyleSheet.prototype,\r\n                \"addRule\",\r\n                addRuleDescriptor\r\n            );\r\n            Object.defineProperty(\r\n                CSSStyleSheet.prototype,\r\n                \"insertRule\",\r\n                insertRuleDescriptor\r\n            );\r\n            Object.defineProperty(\r\n                CSSStyleSheet.prototype,\r\n                \"deleteRule\",\r\n                deleteRuleDescriptor\r\n            );\r\n            Object.defineProperty(\r\n                CSSStyleSheet.prototype,\r\n                \"removeRule\",\r\n                removeRuleDescriptor\r\n            );\r\n            document.removeEventListener(\"__darkreader__cleanUp\", cleanUp);\r\n            document.removeEventListener(\r\n                \"__darkreader__addUndefinedResolver\",\r\n                addUndefinedResolver\r\n            );\r\n            if (enableStyleSheetsProxy) {\r\n                Object.defineProperty(\r\n                    Document.prototype,\r\n                    \"styleSheets\",\r\n                    documentStyleSheetsDescriptor\r\n                );\r\n            }\r\n            if (shouldWrapHTMLElement) {\r\n                Object.defineProperty(\r\n                    Element.prototype,\r\n                    \"getElementsByTagName\",\r\n                    getElementsByTagNameDescriptor\r\n                );\r\n            }\r\n        };\r\n        var addUndefinedResolver = function (e) {\r\n            customElements.whenDefined(e.detail.tag).then(function () {\r\n                document.dispatchEvent(\r\n                    new CustomEvent(\"__darkreader__isDefined\", {\r\n                        detail: {tag: e.detail.tag}\r\n                    })\r\n                );\r\n            });\r\n        };\r\n        document.addEventListener(\"__darkreader__cleanUp\", cleanUp);\r\n        document.addEventListener(\r\n            \"__darkreader__addUndefinedResolver\",\r\n            addUndefinedResolver\r\n        );\r\n        var updateSheetEvent = new Event(\"__darkreader__updateSheet\");\r\n        function proxyAddRule(selector, style, index) {\r\n            addRuleDescriptor.value.call(this, selector, style, index);\r\n            if (\r\n                this.ownerNode &&\r\n                !this.ownerNode.classList.contains(\"darkreader\")\r\n            ) {\r\n                this.ownerNode.dispatchEvent(updateSheetEvent);\r\n            }\r\n            return -1;\r\n        }\r\n        function proxyInsertRule(rule, index) {\r\n            var returnValue = insertRuleDescriptor.value.call(\r\n                this,\r\n                rule,\r\n                index\r\n            );\r\n            if (\r\n                this.ownerNode &&\r\n                !this.ownerNode.classList.contains(\"darkreader\")\r\n            ) {\r\n                this.ownerNode.dispatchEvent(updateSheetEvent);\r\n            }\r\n            return returnValue;\r\n        }\r\n        function proxyDeleteRule(index) {\r\n            deleteRuleDescriptor.value.call(this, index);\r\n            if (\r\n                this.ownerNode &&\r\n                !this.ownerNode.classList.contains(\"darkreader\")\r\n            ) {\r\n                this.ownerNode.dispatchEvent(updateSheetEvent);\r\n            }\r\n        }\r\n        function proxyRemoveRule(index) {\r\n            removeRuleDescriptor.value.call(this, index);\r\n            if (\r\n                this.ownerNode &&\r\n                !this.ownerNode.classList.contains(\"darkreader\")\r\n            ) {\r\n                this.ownerNode.dispatchEvent(updateSheetEvent);\r\n            }\r\n        }\r\n        function proxyDocumentStyleSheets() {\r\n            var _this = this;\r\n            var getCurrentValue = function () {\r\n                var docSheets = documentStyleSheetsDescriptor.get.call(_this);\r\n                var filteredSheets = __spreadArray(\r\n                    [],\r\n                    __read(docSheets),\r\n                    false\r\n                ).filter(function (styleSheet) {\r\n                    return !styleSheet.ownerNode.classList.contains(\r\n                        \"darkreader\"\r\n                    );\r\n                });\r\n                filteredSheets.item = function (item) {\r\n                    return filteredSheets[item];\r\n                };\r\n                return Object.setPrototypeOf(\r\n                    filteredSheets,\r\n                    StyleSheetList.prototype\r\n                );\r\n            };\r\n            var elements = getCurrentValue();\r\n            var styleSheetListBehavior = {\r\n                get: function (_, property) {\r\n                    return getCurrentValue()[property];\r\n                }\r\n            };\r\n            elements = new Proxy(elements, styleSheetListBehavior);\r\n            return elements;\r\n        }\r\n        function proxyGetElementsByTagName(tagName) {\r\n            var _this = this;\r\n            if (tagName !== \"style\") {\r\n                return getElementsByTagNameDescriptor.value.call(this, tagName);\r\n            }\r\n            var getCurrentElementValue = function () {\r\n                var elements = getElementsByTagNameDescriptor.value.call(\r\n                    _this,\r\n                    tagName\r\n                );\r\n                return Object.setPrototypeOf(\r\n                    __spreadArray([], __read(elements), false).filter(function (\r\n                        element\r\n                    ) {\r\n                        return !element.classList.contains(\"darkreader\");\r\n                    }),\r\n                    NodeList.prototype\r\n                );\r\n            };\r\n            var elements = getCurrentElementValue();\r\n            var nodeListBehavior = {\r\n                get: function (_, property) {\r\n                    return getCurrentElementValue()[\r\n                        Number(property) || property\r\n                    ];\r\n                }\r\n            };\r\n            elements = new Proxy(elements, nodeListBehavior);\r\n            return elements;\r\n        }\r\n        Object.defineProperty(\r\n            CSSStyleSheet.prototype,\r\n            \"addRule\",\r\n            Object.assign({}, addRuleDescriptor, {value: proxyAddRule})\r\n        );\r\n        Object.defineProperty(\r\n            CSSStyleSheet.prototype,\r\n            \"insertRule\",\r\n            Object.assign({}, insertRuleDescriptor, {value: proxyInsertRule})\r\n        );\r\n        Object.defineProperty(\r\n            CSSStyleSheet.prototype,\r\n            \"deleteRule\",\r\n            Object.assign({}, deleteRuleDescriptor, {value: proxyDeleteRule})\r\n        );\r\n        Object.defineProperty(\r\n            CSSStyleSheet.prototype,\r\n            \"removeRule\",\r\n            Object.assign({}, removeRuleDescriptor, {value: proxyRemoveRule})\r\n        );\r\n        if (enableStyleSheetsProxy) {\r\n            Object.defineProperty(\r\n                Document.prototype,\r\n                \"styleSheets\",\r\n                Object.assign({}, documentStyleSheetsDescriptor, {\r\n                    get: proxyDocumentStyleSheets\r\n                })\r\n            );\r\n        }\r\n        if (shouldWrapHTMLElement) {\r\n            Object.defineProperty(\r\n                Element.prototype,\r\n                \"getElementsByTagName\",\r\n                Object.assign({}, getElementsByTagNameDescriptor, {\r\n                    value: proxyGetElementsByTagName\r\n                })\r\n            );\r\n        }\r\n    }\r\n\r\n    var INSTANCE_ID = generateUID();\r\n    var styleManagers = new Map();\r\n    var adoptedStyleManagers = [];\r\n    var filter = null;\r\n    var fixes = null;\r\n    var isIFrame$1 = null;\r\n    var ignoredImageAnalysisSelectors = null;\r\n    var ignoredInlineSelectors = null;\r\n    function createOrUpdateStyle(className, root) {\r\n        if (root === void 0) {\r\n            root = document.head || document;\r\n        }\r\n        var element = root.querySelector(\".\".concat(className));\r\n        if (!element) {\r\n            element = document.createElement(\"style\");\r\n            element.classList.add(\"darkreader\");\r\n            element.classList.add(className);\r\n            element.media = \"screen\";\r\n            element.textContent = \"\";\r\n        }\r\n        return element;\r\n    }\r\n    function createOrUpdateScript(className, root) {\r\n        if (root === void 0) {\r\n            root = document.head || document;\r\n        }\r\n        var element = root.querySelector(\".\".concat(className));\r\n        if (!element) {\r\n            element = document.createElement(\"script\");\r\n            element.classList.add(\"darkreader\");\r\n            element.classList.add(className);\r\n        }\r\n        return element;\r\n    }\r\n    var nodePositionWatchers = new Map();\r\n    function setupNodePositionWatcher(node, alias) {\r\n        nodePositionWatchers.has(alias) &&\r\n            nodePositionWatchers.get(alias).stop();\r\n        nodePositionWatchers.set(alias, watchForNodePosition(node, \"parent\"));\r\n    }\r\n    function stopStylePositionWatchers() {\r\n        forEach(nodePositionWatchers.values(), function (watcher) {\r\n            return watcher.stop();\r\n        });\r\n        nodePositionWatchers.clear();\r\n    }\r\n    function createStaticStyleOverrides() {\r\n        var fallbackStyle = createOrUpdateStyle(\r\n            \"darkreader--fallback\",\r\n            document\r\n        );\r\n        fallbackStyle.textContent = getModifiedFallbackStyle(filter, {\r\n            strict: true\r\n        });\r\n        document.head.insertBefore(fallbackStyle, document.head.firstChild);\r\n        setupNodePositionWatcher(fallbackStyle, \"fallback\");\r\n        var userAgentStyle = createOrUpdateStyle(\"darkreader--user-agent\");\r\n        userAgentStyle.textContent = getModifiedUserAgentStyle(\r\n            filter,\r\n            isIFrame$1,\r\n            filter.styleSystemControls\r\n        );\r\n        document.head.insertBefore(userAgentStyle, fallbackStyle.nextSibling);\r\n        setupNodePositionWatcher(userAgentStyle, \"user-agent\");\r\n        var textStyle = createOrUpdateStyle(\"darkreader--text\");\r\n        if (filter.useFont || filter.textStroke > 0) {\r\n            textStyle.textContent = createTextStyle(filter);\r\n        } else {\r\n            textStyle.textContent = \"\";\r\n        }\r\n        document.head.insertBefore(textStyle, fallbackStyle.nextSibling);\r\n        setupNodePositionWatcher(textStyle, \"text\");\r\n        var invertStyle = createOrUpdateStyle(\"darkreader--invert\");\r\n        if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\r\n            invertStyle.textContent = [\r\n                \"\".concat(fixes.invert.join(\", \"), \" {\"),\r\n                \"    filter: \".concat(\r\n                    getCSSFilterValue(\r\n                        __assign(__assign({}, filter), {\r\n                            contrast:\r\n                                filter.mode === 0\r\n                                    ? filter.contrast\r\n                                    : clamp(filter.contrast - 10, 0, 100)\r\n                        })\r\n                    ),\r\n                    \" !important;\"\r\n                ),\r\n                \"}\"\r\n            ].join(\"\\n\");\r\n        } else {\r\n            invertStyle.textContent = \"\";\r\n        }\r\n        document.head.insertBefore(invertStyle, textStyle.nextSibling);\r\n        setupNodePositionWatcher(invertStyle, \"invert\");\r\n        var inlineStyle = createOrUpdateStyle(\"darkreader--inline\");\r\n        inlineStyle.textContent = getInlineOverrideStyle();\r\n        document.head.insertBefore(inlineStyle, invertStyle.nextSibling);\r\n        setupNodePositionWatcher(inlineStyle, \"inline\");\r\n        var overrideStyle = createOrUpdateStyle(\"darkreader--override\");\r\n        overrideStyle.textContent =\r\n            fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\r\n        document.head.appendChild(overrideStyle);\r\n        setupNodePositionWatcher(overrideStyle, \"override\");\r\n        var variableStyle = createOrUpdateStyle(\"darkreader--variables\");\r\n        var selectionColors = getSelectionColor(filter);\r\n        var darkSchemeBackgroundColor = filter.darkSchemeBackgroundColor,\r\n            darkSchemeTextColor = filter.darkSchemeTextColor,\r\n            lightSchemeBackgroundColor = filter.lightSchemeBackgroundColor,\r\n            lightSchemeTextColor = filter.lightSchemeTextColor,\r\n            mode = filter.mode;\r\n        var schemeBackgroundColor =\r\n            mode === 0 ? lightSchemeBackgroundColor : darkSchemeBackgroundColor;\r\n        var schemeTextColor =\r\n            mode === 0 ? lightSchemeTextColor : darkSchemeTextColor;\r\n        schemeBackgroundColor = modifyBackgroundColor(\r\n            parseColorWithCache(schemeBackgroundColor),\r\n            filter\r\n        );\r\n        schemeTextColor = modifyForegroundColor(\r\n            parseColorWithCache(schemeTextColor),\r\n            filter\r\n        );\r\n        variableStyle.textContent = [\r\n            \":root {\",\r\n            \"   --darkreader-neutral-background: \".concat(\r\n                schemeBackgroundColor,\r\n                \";\"\r\n            ),\r\n            \"   --darkreader-neutral-text: \".concat(schemeTextColor, \";\"),\r\n            \"   --darkreader-selection-background: \".concat(\r\n                selectionColors.backgroundColorSelection,\r\n                \";\"\r\n            ),\r\n            \"   --darkreader-selection-text: \".concat(\r\n                selectionColors.foregroundColorSelection,\r\n                \";\"\r\n            ),\r\n            \"}\"\r\n        ].join(\"\\n\");\r\n        document.head.insertBefore(variableStyle, inlineStyle.nextSibling);\r\n        setupNodePositionWatcher(variableStyle, \"variables\");\r\n        var rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\r\n        document.head.insertBefore(rootVarsStyle, variableStyle.nextSibling);\r\n        var injectProxyArg = !(fixes && fixes.disableStyleSheetsProxy);\r\n        {\r\n            var proxyScript = createOrUpdateScript(\"darkreader--proxy\");\r\n            proxyScript.append(\r\n                \"(\".concat(injectProxy, \")(\").concat(injectProxyArg, \")\")\r\n            );\r\n            document.head.insertBefore(proxyScript, rootVarsStyle.nextSibling);\r\n            proxyScript.remove();\r\n        }\r\n    }\r\n    var shadowRootsWithOverrides = new Set();\r\n    function createShadowStaticStyleOverrides(root) {\r\n        var inlineStyle = createOrUpdateStyle(\"darkreader--inline\", root);\r\n        inlineStyle.textContent = getInlineOverrideStyle();\r\n        root.insertBefore(inlineStyle, root.firstChild);\r\n        var overrideStyle = createOrUpdateStyle(\"darkreader--override\", root);\r\n        overrideStyle.textContent =\r\n            fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\r\n        root.insertBefore(overrideStyle, inlineStyle.nextSibling);\r\n        var invertStyle = createOrUpdateStyle(\"darkreader--invert\", root);\r\n        if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\r\n            invertStyle.textContent = [\r\n                \"\".concat(fixes.invert.join(\", \"), \" {\"),\r\n                \"    filter: \".concat(\r\n                    getCSSFilterValue(\r\n                        __assign(__assign({}, filter), {\r\n                            contrast:\r\n                                filter.mode === 0\r\n                                    ? filter.contrast\r\n                                    : clamp(filter.contrast - 10, 0, 100)\r\n                        })\r\n                    ),\r\n                    \" !important;\"\r\n                ),\r\n                \"}\"\r\n            ].join(\"\\n\");\r\n        } else {\r\n            invertStyle.textContent = \"\";\r\n        }\r\n        root.insertBefore(invertStyle, overrideStyle.nextSibling);\r\n        shadowRootsWithOverrides.add(root);\r\n    }\r\n    function replaceCSSTemplates($cssText) {\r\n        return $cssText.replace(/\\${(.+?)}/g, function (_, $color) {\r\n            var color = parseColorWithCache($color);\r\n            if (color) {\r\n                return modifyColor(color, filter);\r\n            }\r\n            return $color;\r\n        });\r\n    }\r\n    function cleanFallbackStyle() {\r\n        var fallback = document.querySelector(\".darkreader--fallback\");\r\n        if (fallback) {\r\n            fallback.textContent = \"\";\r\n        }\r\n    }\r\n    function createDynamicStyleOverrides() {\r\n        cancelRendering();\r\n        var allStyles = getManageableStyles(document);\r\n        var newManagers = allStyles\r\n            .filter(function (style) {\r\n                return !styleManagers.has(style);\r\n            })\r\n            .map(function (style) {\r\n                return createManager(style);\r\n            });\r\n        newManagers\r\n            .map(function (manager) {\r\n                return manager.details({secondRound: false});\r\n            })\r\n            .filter(function (detail) {\r\n                return detail && detail.rules.length > 0;\r\n            })\r\n            .forEach(function (detail) {\r\n                variablesStore.addRulesForMatching(detail.rules);\r\n            });\r\n        variablesStore.matchVariablesAndDependants();\r\n        variablesStore.setOnRootVariableChange(function () {\r\n            variablesStore.putRootVars(\r\n                document.head.querySelector(\".darkreader--root-vars\"),\r\n                filter\r\n            );\r\n        });\r\n        variablesStore.putRootVars(\r\n            document.head.querySelector(\".darkreader--root-vars\"),\r\n            filter\r\n        );\r\n        styleManagers.forEach(function (manager) {\r\n            return manager.render(filter, ignoredImageAnalysisSelectors);\r\n        });\r\n        if (loadingStyles.size === 0) {\r\n            cleanFallbackStyle();\r\n        }\r\n        newManagers.forEach(function (manager) {\r\n            return manager.watch();\r\n        });\r\n        var inlineStyleElements = toArray(\r\n            document.querySelectorAll(INLINE_STYLE_SELECTOR)\r\n        );\r\n        iterateShadowHosts(document.documentElement, function (host) {\r\n            createShadowStaticStyleOverrides(host.shadowRoot);\r\n            var elements = host.shadowRoot.querySelectorAll(\r\n                INLINE_STYLE_SELECTOR\r\n            );\r\n            if (elements.length > 0) {\r\n                push(inlineStyleElements, elements);\r\n            }\r\n        });\r\n        inlineStyleElements.forEach(function (el) {\r\n            return overrideInlineStyle(\r\n                el,\r\n                filter,\r\n                ignoredInlineSelectors,\r\n                ignoredImageAnalysisSelectors\r\n            );\r\n        });\r\n        handleAdoptedStyleSheets(document);\r\n    }\r\n    var loadingStylesCounter = 0;\r\n    var loadingStyles = new Set();\r\n    function createManager(element) {\r\n        var loadingStyleId = ++loadingStylesCounter;\r\n        function loadingStart() {\r\n            if (!isDOMReady() || !didDocumentShowUp) {\r\n                loadingStyles.add(loadingStyleId);\r\n                logInfo(\r\n                    \"Current amount of styles loading: \".concat(\r\n                        loadingStyles.size\r\n                    )\r\n                );\r\n                var fallbackStyle = document.querySelector(\r\n                    \".darkreader--fallback\"\r\n                );\r\n                if (!fallbackStyle.textContent) {\r\n                    fallbackStyle.textContent = getModifiedFallbackStyle(\r\n                        filter,\r\n                        {strict: false}\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        function loadingEnd() {\r\n            loadingStyles.delete(loadingStyleId);\r\n            logInfo(\r\n                \"Removed loadingStyle \"\r\n                    .concat(loadingStyleId, \", now awaiting: \")\r\n                    .concat(loadingStyles.size)\r\n            );\r\n            if (loadingStyles.size === 0 && isDOMReady()) {\r\n                cleanFallbackStyle();\r\n            }\r\n        }\r\n        function update() {\r\n            var details = manager.details({secondRound: true});\r\n            if (!details) {\r\n                return;\r\n            }\r\n            variablesStore.addRulesForMatching(details.rules);\r\n            variablesStore.matchVariablesAndDependants();\r\n            manager.render(filter, ignoredImageAnalysisSelectors);\r\n        }\r\n        var manager = manageStyle(element, {\r\n            update: update,\r\n            loadingStart: loadingStart,\r\n            loadingEnd: loadingEnd\r\n        });\r\n        styleManagers.set(element, manager);\r\n        return manager;\r\n    }\r\n    function removeManager(element) {\r\n        var manager = styleManagers.get(element);\r\n        if (manager) {\r\n            manager.destroy();\r\n            styleManagers.delete(element);\r\n        }\r\n    }\r\n    var throttledRenderAllStyles = throttle(function (callback) {\r\n        styleManagers.forEach(function (manager) {\r\n            return manager.render(filter, ignoredImageAnalysisSelectors);\r\n        });\r\n        adoptedStyleManagers.forEach(function (manager) {\r\n            return manager.render(filter, ignoredImageAnalysisSelectors);\r\n        });\r\n        callback && callback();\r\n    });\r\n    var cancelRendering = function () {\r\n        throttledRenderAllStyles.cancel();\r\n    };\r\n    function onDOMReady() {\r\n        if (loadingStyles.size === 0) {\r\n            cleanFallbackStyle();\r\n            return;\r\n        }\r\n    }\r\n    var documentVisibilityListener = null;\r\n    var didDocumentShowUp = !document.hidden;\r\n    function watchForDocumentVisibility(callback) {\r\n        var alreadyWatching = Boolean(documentVisibilityListener);\r\n        documentVisibilityListener = function () {\r\n            if (!document.hidden) {\r\n                stopWatchingForDocumentVisibility();\r\n                callback();\r\n                didDocumentShowUp = true;\r\n            }\r\n        };\r\n        if (!alreadyWatching) {\r\n            document.addEventListener(\r\n                \"visibilitychange\",\r\n                documentVisibilityListener\r\n            );\r\n        }\r\n    }\r\n    function stopWatchingForDocumentVisibility() {\r\n        document.removeEventListener(\r\n            \"visibilitychange\",\r\n            documentVisibilityListener\r\n        );\r\n        documentVisibilityListener = null;\r\n    }\r\n    function createThemeAndWatchForUpdates() {\r\n        createStaticStyleOverrides();\r\n        function runDynamicStyle() {\r\n            createDynamicStyleOverrides();\r\n            watchForUpdates();\r\n        }\r\n        if (document.hidden && !filter.immediateModify) {\r\n            watchForDocumentVisibility(runDynamicStyle);\r\n        } else {\r\n            runDynamicStyle();\r\n        }\r\n        changeMetaThemeColorWhenAvailable(filter);\r\n    }\r\n    function handleAdoptedStyleSheets(node) {\r\n        try {\r\n            if (Array.isArray(node.adoptedStyleSheets)) {\r\n                if (node.adoptedStyleSheets.length > 0) {\r\n                    var newManger = createAdoptedStyleSheetOverride(node);\r\n                    adoptedStyleManagers.push(newManger);\r\n                    newManger.render(filter, ignoredImageAnalysisSelectors);\r\n                }\r\n            }\r\n        } catch (err) {}\r\n    }\r\n    function watchForUpdates() {\r\n        var managedStyles = Array.from(styleManagers.keys());\r\n        watchForStyleChanges(\r\n            managedStyles,\r\n            function (_a) {\r\n                var created = _a.created,\r\n                    updated = _a.updated,\r\n                    removed = _a.removed,\r\n                    moved = _a.moved;\r\n                var stylesToRemove = removed;\r\n                var stylesToManage = created\r\n                    .concat(updated)\r\n                    .concat(moved)\r\n                    .filter(function (style) {\r\n                        return !styleManagers.has(style);\r\n                    });\r\n                var stylesToRestore = moved.filter(function (style) {\r\n                    return styleManagers.has(style);\r\n                });\r\n                stylesToRemove.forEach(function (style) {\r\n                    return removeManager(style);\r\n                });\r\n                var newManagers = stylesToManage.map(function (style) {\r\n                    return createManager(style);\r\n                });\r\n                newManagers\r\n                    .map(function (manager) {\r\n                        return manager.details({secondRound: false});\r\n                    })\r\n                    .filter(function (detail) {\r\n                        return detail && detail.rules.length > 0;\r\n                    })\r\n                    .forEach(function (detail) {\r\n                        variablesStore.addRulesForMatching(detail.rules);\r\n                    });\r\n                variablesStore.matchVariablesAndDependants();\r\n                newManagers.forEach(function (manager) {\r\n                    return manager.render(\r\n                        filter,\r\n                        ignoredImageAnalysisSelectors\r\n                    );\r\n                });\r\n                newManagers.forEach(function (manager) {\r\n                    return manager.watch();\r\n                });\r\n                stylesToRestore.forEach(function (style) {\r\n                    return styleManagers.get(style).restore();\r\n                });\r\n            },\r\n            function (shadowRoot) {\r\n                createShadowStaticStyleOverrides(shadowRoot);\r\n                handleAdoptedStyleSheets(shadowRoot);\r\n            }\r\n        );\r\n        watchForInlineStyles(\r\n            function (element) {\r\n                overrideInlineStyle(\r\n                    element,\r\n                    filter,\r\n                    ignoredInlineSelectors,\r\n                    ignoredImageAnalysisSelectors\r\n                );\r\n                if (element === document.documentElement) {\r\n                    var styleAttr = element.getAttribute(\"style\") || \"\";\r\n                    if (styleAttr.includes(\"--\")) {\r\n                        variablesStore.matchVariablesAndDependants();\r\n                        variablesStore.putRootVars(\r\n                            document.head.querySelector(\r\n                                \".darkreader--root-vars\"\r\n                            ),\r\n                            filter\r\n                        );\r\n                    }\r\n                }\r\n            },\r\n            function (root) {\r\n                createShadowStaticStyleOverrides(root);\r\n                var inlineStyleElements = root.querySelectorAll(\r\n                    INLINE_STYLE_SELECTOR\r\n                );\r\n                if (inlineStyleElements.length > 0) {\r\n                    forEach(inlineStyleElements, function (el) {\r\n                        return overrideInlineStyle(\r\n                            el,\r\n                            filter,\r\n                            ignoredInlineSelectors,\r\n                            ignoredImageAnalysisSelectors\r\n                        );\r\n                    });\r\n                }\r\n            }\r\n        );\r\n        addDOMReadyListener(onDOMReady);\r\n    }\r\n    function stopWatchingForUpdates() {\r\n        styleManagers.forEach(function (manager) {\r\n            return manager.pause();\r\n        });\r\n        stopStylePositionWatchers();\r\n        stopWatchingForStyleChanges();\r\n        stopWatchingForInlineStyles();\r\n        removeDOMReadyListener(onDOMReady);\r\n        cleanReadyStateCompleteListeners();\r\n    }\r\n    var metaObserver;\r\n    function addMetaListener() {\r\n        metaObserver = new MutationObserver(function () {\r\n            if (document.querySelector('meta[name=\"darkreader-lock\"]')) {\r\n                metaObserver.disconnect();\r\n                removeDynamicTheme();\r\n            }\r\n        });\r\n        metaObserver.observe(document.head, {childList: true, subtree: true});\r\n    }\r\n    function createDarkReaderInstanceMarker() {\r\n        var metaElement = document.createElement(\"meta\");\r\n        metaElement.name = \"darkreader\";\r\n        metaElement.content = INSTANCE_ID;\r\n        document.head.appendChild(metaElement);\r\n    }\r\n    function isAnotherDarkReaderInstanceActive() {\r\n        if (document.querySelector('meta[name=\"darkreader-lock\"]')) {\r\n            return true;\r\n        }\r\n        var meta = document.querySelector('meta[name=\"darkreader\"]');\r\n        if (meta) {\r\n            if (meta.content !== INSTANCE_ID) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        createDarkReaderInstanceMarker();\r\n        addMetaListener();\r\n        return false;\r\n    }\r\n    function createOrUpdateDynamicTheme(\r\n        filterConfig,\r\n        dynamicThemeFixes,\r\n        iframe\r\n    ) {\r\n        filter = filterConfig;\r\n        fixes = dynamicThemeFixes;\r\n        if (fixes) {\r\n            ignoredImageAnalysisSelectors = Array.isArray(\r\n                fixes.ignoreImageAnalysis\r\n            )\r\n                ? fixes.ignoreImageAnalysis\r\n                : [];\r\n            ignoredInlineSelectors = Array.isArray(fixes.ignoreInlineStyle)\r\n                ? fixes.ignoreInlineStyle\r\n                : [];\r\n        } else {\r\n            ignoredImageAnalysisSelectors = [];\r\n            ignoredInlineSelectors = [];\r\n        }\r\n        if (filter.immediateModify) {\r\n            setIsDOMReady(function () {\r\n                return true;\r\n            });\r\n        }\r\n        isIFrame$1 = iframe;\r\n        if (document.head) {\r\n            if (isAnotherDarkReaderInstanceActive()) {\r\n                return;\r\n            }\r\n            document.documentElement.setAttribute(\r\n                \"data-darkreader-mode\",\r\n                \"dynamic\"\r\n            );\r\n            document.documentElement.setAttribute(\r\n                \"data-darkreader-scheme\",\r\n                filter.mode ? \"dark\" : \"dimmed\"\r\n            );\r\n            createThemeAndWatchForUpdates();\r\n        } else {\r\n            if (!isFirefox) {\r\n                var fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\");\r\n                document.documentElement.appendChild(fallbackStyle);\r\n                fallbackStyle.textContent = getModifiedFallbackStyle(filter, {\r\n                    strict: true\r\n                });\r\n            }\r\n            var headObserver_1 = new MutationObserver(function () {\r\n                if (document.head) {\r\n                    headObserver_1.disconnect();\r\n                    if (isAnotherDarkReaderInstanceActive()) {\r\n                        removeDynamicTheme();\r\n                        return;\r\n                    }\r\n                    createThemeAndWatchForUpdates();\r\n                }\r\n            });\r\n            headObserver_1.observe(document, {childList: true, subtree: true});\r\n        }\r\n    }\r\n    function removeProxy() {\r\n        document.dispatchEvent(new CustomEvent(\"__darkreader__cleanUp\"));\r\n        removeNode(document.head.querySelector(\".darkreader--proxy\"));\r\n    }\r\n    function removeDynamicTheme() {\r\n        document.documentElement.removeAttribute(\"data-darkreader-mode\");\r\n        document.documentElement.removeAttribute(\"data-darkreader-scheme\");\r\n        cleanDynamicThemeCache();\r\n        removeNode(document.querySelector(\".darkreader--fallback\"));\r\n        if (document.head) {\r\n            restoreMetaThemeColor();\r\n            removeNode(document.head.querySelector(\".darkreader--user-agent\"));\r\n            removeNode(document.head.querySelector(\".darkreader--text\"));\r\n            removeNode(document.head.querySelector(\".darkreader--invert\"));\r\n            removeNode(document.head.querySelector(\".darkreader--inline\"));\r\n            removeNode(document.head.querySelector(\".darkreader--override\"));\r\n            removeNode(document.head.querySelector(\".darkreader--variables\"));\r\n            removeNode(document.head.querySelector(\".darkreader--root-vars\"));\r\n            removeNode(document.head.querySelector('meta[name=\"darkreader\"]'));\r\n            removeProxy();\r\n        }\r\n        shadowRootsWithOverrides.forEach(function (root) {\r\n            removeNode(root.querySelector(\".darkreader--inline\"));\r\n            removeNode(root.querySelector(\".darkreader--override\"));\r\n        });\r\n        shadowRootsWithOverrides.clear();\r\n        forEach(styleManagers.keys(), function (el) {\r\n            return removeManager(el);\r\n        });\r\n        loadingStyles.clear();\r\n        cleanLoadingLinks();\r\n        forEach(document.querySelectorAll(\".darkreader\"), removeNode);\r\n        adoptedStyleManagers.forEach(function (manager) {\r\n            manager.destroy();\r\n        });\r\n        adoptedStyleManagers.splice(0);\r\n        metaObserver && metaObserver.disconnect();\r\n    }\r\n    function cleanDynamicThemeCache() {\r\n        variablesStore.clear();\r\n        parsedURLCache.clear();\r\n        stopWatchingForDocumentVisibility();\r\n        cancelRendering();\r\n        stopWatchingForUpdates();\r\n        cleanModificationCache();\r\n        clearColorCache();\r\n    }\r\n\r\n    var blobRegex = /url\\(\\\"(blob\\:.*?)\\\"\\)/g;\r\n    function replaceBlobs(text) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var promises, data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        promises = [];\r\n                        getMatches(blobRegex, text, 1).forEach(function (url) {\r\n                            var promise = loadAsDataURL(url);\r\n                            promises.push(promise);\r\n                        });\r\n                        return [4, Promise.all(promises)];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [\r\n                            2,\r\n                            text.replace(blobRegex, function () {\r\n                                return 'url(\"'.concat(data.shift(), '\")');\r\n                            })\r\n                        ];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    var banner =\r\n        '/*\\n                        _______\\n                       /       \\\\\\n                      .==.    .==.\\n                     ((  ))==((  ))\\n                    / \"==\"    \"==\"\\\\\\n                   /____|| || ||___\\\\\\n       ________     ____    ________  ___    ___\\n       |  ___  \\\\   /    \\\\   |  ___  \\\\ |  |  /  /\\n       |  |  \\\\  \\\\ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |_/  /\\n       |  |   )  /  /__\\\\  \\\\ |  |__/  /|  ___  \\\\\\n       |  |__/  /  ______  \\\\|  ____  \\\\|  |  \\\\  \\\\\\n_______|_______/__/ ____ \\\\__\\\\__|___\\\\__\\\\__|___\\\\__\\\\____\\n|  ___  \\\\ |  ____/ /    \\\\   |  ___  \\\\ |  ____|  ___  \\\\\\n|  |  \\\\  \\\\|  |___ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |___|  |  \\\\  \\\\\\n|  |__/  /|  ____/  /__\\\\  \\\\ |  |   )  |  ____|  |__/  /\\n|  ____  \\\\|  |__/  ______  \\\\|  |__/  /|  |___|  ____  \\\\\\n|__|   \\\\__\\\\____/__/      \\\\__\\\\_______/ |______|__|   \\\\__\\\\\\n                https://darkreader.org\\n*/\\n\\n/*! Dark reader generated CSS | Licensed under MIT https://github.com/darkreader/darkreader/blob/main/LICENSE */\\n';\r\n    function collectCSS() {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            function addStaticCSS(selector, comment) {\r\n                var staticStyle = document.querySelector(selector);\r\n                if (staticStyle && staticStyle.textContent) {\r\n                    css.push(\"/* \".concat(comment, \" */\"));\r\n                    css.push(staticStyle.textContent);\r\n                    css.push(\"\");\r\n                }\r\n            }\r\n            var css, modifiedCSS, formattedCSS, _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        css = [banner];\r\n                        addStaticCSS(\".darkreader--fallback\", \"Fallback Style\");\r\n                        addStaticCSS(\r\n                            \".darkreader--user-agent\",\r\n                            \"User-Agent Style\"\r\n                        );\r\n                        addStaticCSS(\".darkreader--text\", \"Text Style\");\r\n                        addStaticCSS(\".darkreader--invert\", \"Invert Style\");\r\n                        addStaticCSS(\r\n                            \".darkreader--variables\",\r\n                            \"Variables Style\"\r\n                        );\r\n                        modifiedCSS = [];\r\n                        document\r\n                            .querySelectorAll(\".darkreader--sync\")\r\n                            .forEach(function (element) {\r\n                                forEach(\r\n                                    element.sheet.cssRules,\r\n                                    function (rule) {\r\n                                        rule &&\r\n                                            rule.cssText &&\r\n                                            modifiedCSS.push(rule.cssText);\r\n                                    }\r\n                                );\r\n                            });\r\n                        if (!modifiedCSS.length) return [3, 2];\r\n                        formattedCSS = formatCSS(modifiedCSS.join(\"\\n\"));\r\n                        css.push(\"/* Modified CSS */\");\r\n                        _b = (_a = css).push;\r\n                        return [4, replaceBlobs(formattedCSS)];\r\n                    case 1:\r\n                        _b.apply(_a, [_c.sent()]);\r\n                        css.push(\"\");\r\n                        _c.label = 2;\r\n                    case 2:\r\n                        addStaticCSS(\".darkreader--override\", \"Override Style\");\r\n                        return [2, css.join(\"\\n\")];\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    var isDarkReaderEnabled = false;\r\n    var isIFrame = (function () {\r\n        try {\r\n            return window.self !== window.top;\r\n        } catch (err) {\r\n            console.warn(err);\r\n            return true;\r\n        }\r\n    })();\r\n    function enable(themeOptions, fixes) {\r\n        if (themeOptions === void 0) {\r\n            themeOptions = {};\r\n        }\r\n        if (fixes === void 0) {\r\n            fixes = null;\r\n        }\r\n        var theme = __assign(__assign({}, DEFAULT_THEME), themeOptions);\r\n        if (theme.engine !== ThemeEngine.dynamicTheme) {\r\n            throw new Error(\"Theme engine is not supported.\");\r\n        }\r\n        createOrUpdateDynamicTheme(theme, fixes, isIFrame);\r\n        isDarkReaderEnabled = true;\r\n    }\r\n    function isEnabled() {\r\n        return isDarkReaderEnabled;\r\n    }\r\n    function disable() {\r\n        removeDynamicTheme();\r\n        isDarkReaderEnabled = false;\r\n    }\r\n    var darkScheme = matchMedia(\"(prefers-color-scheme: dark)\");\r\n    var store = {\r\n        themeOptions: null,\r\n        fixes: null\r\n    };\r\n    function handleColorScheme() {\r\n        if (darkScheme.matches) {\r\n            enable(store.themeOptions, store.fixes);\r\n        } else {\r\n            disable();\r\n        }\r\n    }\r\n    function auto(themeOptions, fixes) {\r\n        if (themeOptions === void 0) {\r\n            themeOptions = {};\r\n        }\r\n        if (fixes === void 0) {\r\n            fixes = null;\r\n        }\r\n        if (themeOptions) {\r\n            store = {themeOptions: themeOptions, fixes: fixes};\r\n            handleColorScheme();\r\n            if (isMatchMediaChangeEventListenerSupported) {\r\n                darkScheme.addEventListener(\"change\", handleColorScheme);\r\n            } else {\r\n                darkScheme.addListener(handleColorScheme);\r\n            }\r\n        } else {\r\n            if (isMatchMediaChangeEventListenerSupported) {\r\n                darkScheme.removeEventListener(\"change\", handleColorScheme);\r\n            } else {\r\n                darkScheme.removeListener(handleColorScheme);\r\n            }\r\n            disable();\r\n        }\r\n    }\r\n    function exportGeneratedCSS() {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        return [4, collectCSS()];\r\n                    case 1:\r\n                        return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    var setFetchMethod = setFetchMethod$1;\r\n\r\n    exports.auto = auto;\r\n    exports.disable = disable;\r\n    exports.enable = enable;\r\n    exports.exportGeneratedCSS = exportGeneratedCSS;\r\n    exports.isEnabled = isEnabled;\r\n    exports.setFetchMethod = setFetchMethod;\r\n\r\n    Object.defineProperty(exports, \"__esModule\", {value: true});\r\n});\r\n"],"names":["exports","MessageType","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__values","o","m","__read","r","ar","error","__spreadArray","to","from","pack","l","Array","slice","concat","isNavigatorDefined","navigator","userAgent","userAgentData","isArray","brands","map","brand","toLowerCase","version","join","platform","isChromium","includes","isThunderbird","isFirefox","isSafari","isWindows","startsWith","isMacOS","mobile","isShadowDomSupported","ShadowRoot","isMatchMediaChangeEventListenerSupported","MediaQueryList","addEventListener","match","isDefinedSelectorSupported","document","querySelector","err","isCSSColorSchemePropSupported","el","createElement","setAttribute","style","colorScheme","getOKResponse","url","mimeType","origin","response","_a","fetch","cache","credentials","referrer","endsWith","headers","get","Error","ok","status","statusText","loadAsDataURL","readResponseAsDataURL","blob","reader","FileReader","onloadend","readAsDataURL","throwCORSError","fetcher","setFetchMethod$1","callFetchMethod","window","chrome","runtime","ThemeEngine","AutomationMode","messageListeners","Set","sendMessage","args","_i","id_1","responseType","text_1","error_1","_b","type","CS_FETCH","id","data","text","forEach","cb","BG_FETCH_RESPONSE","console","addMessageListener","callback","add","nativeSendMessage_1","onMessage","addListener","nativeAddListener_1","DEFAULT_COLORS","darkScheme","background","lightScheme","DEFAULT_THEME","mode","brightness","contrast","grayscale","sepia","useFont","fontFamily","textStroke","engine","dynamicTheme","stylesheet","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor","scrollbarColor","selectionColor","styleSystemControls","lightColorScheme","darkColorScheme","immediateModify","isArrayLike","items","e_1","len","items_1","items_1_1","e_1_1","array","addition","a","toArray","results","logInfo","logWarn","throttle","lastArgs","pending","frameId","throttled","requestAnimationFrame","cancel","cancelAnimationFrame","createAsyncTasksQueue","tasks","runTasks","task","shift","splice","getDuration","time","duration","seconds","minutes","hours","days","removeNode","node","parentNode","removeChild","watchForNodePosition","onRestore","Function","MAX_ATTEMPTS_COUNT","RETRY_TIMEOUT","ATTEMPTS_INTERVAL","prevSibling","previousSibling","parent","attempts","start","timeoutId","restore","now","Date","setTimeout","stop","updateParent","insertBefore","nextSibling","firstChild","observer","takeRecords","MutationObserver","run","observe","childList","clearTimeout","disconnect","skip","iterateShadowHosts","root","walker","createTreeWalker","NodeFilter","SHOW_ELEMENT","acceptNode","shadowRoot","FILTER_SKIP","FILTER_ACCEPT","currentNode","nextNode","classList","contains","NONE","isDOMReady","readyState","setIsDOMReady","newFunc","readyStateListeners","addDOMReadyListener","listener","removeDOMReadyListener","delete","isReadyStateComplete","readyStateCompleteListeners","addReadyStateCompleteListener","cleanReadyStateCompleteListeners","clear","onReadyStateChange_1","removeEventListener","HUGE_MUTATIONS_COUNT","isHugeMutation","mutations","addedNodesCount","addedNodes","getElementsTreeOperations","additions","deletions","moves","Element","isConnected","removedNodes","duplicateAdditions","duplicateDeletions","has","parentElement","anchor","optimizedTreeObservers","Map","optimizedTreeCallbacks","WeakMap","createOptimizedTreeObserver","callbacks","observerCallbacks","domReadyListener","hadHugeMutationsBefore_1","subscribedForReadyState_1","onHugeMutations","elementsOperations_1","onMinorMutations","subtree","set","size","parsedURLCache","fixBaseURL","$url","href","parseURL","$base","key","parsedURL_1","URL","parsedURL","getAbsoluteURL","$relative","test","location","protocol","b","isRelativeHrefOnAbsolutePath","hostname","port","pathname","iterateCSSRules","rules","iterate","onMediaRuleError","rule","selectorText","styleSheet","cssRules","media","isScreenOrAllOrQuery","some","isPrintOrSpeech","conditionText","CSS","supports","shorthandVarDependantProperties","shorthandVarDepPropRegexps","prop","RegExp","iterateCSSDeclarations","property","getPropertyValue","trim","cssText","regexp","val","cssURLRegex","cssImportRegex","getCSSURLValue","cssURL","replace","getCSSBaseBath","replaceCSSRelativeURLsWithAbsolute","$css","cssBasePath","pathValue","cssCommentsRegex","removeCSSComments","fontFaceRegex","replaceCSSFontFace","evalMath","expression","lastToken","rpnStack","workingStack","token","operators","currentOp","lessOrEqualThan","unshift","stack","exec","parseFloat","Operator","precedence","method","precendce","execMethod","left","right","getMatches","regex","input","group","matches","formatCSS","trimLeft","getIndent","depth","repeat","emptyRuleRegexp","css","split","formatted","x","line","getParenthesesRange","searchStartIndex","firstOpenIndex","openIndex","indexOf","closingIndex","end","hslaParseCache","rgbaParseCache","parseColorWithCache","$color","lowerCalcExpression","color","parse","parseToHSLWithCache","rgb","hsl","rgbToHSL","clearColorCache","hslToRGB","h","_c","Math","round","r_1","b_1","c","abs","_d","r255","g255","b255","max","min","toFixed","digits","fixed","dot","zerosMatch","index","substring","rgbToString","rgbToHexString","toString","hslToString","rgbMatch","hslMatch","hexMatch","parseRGB","parseHSL","parseHex","knownColors","getColorByName","systemColors","getSystemColor","getNumbers","numbers","prevPos","isMining","startIndex","getNumbersFromString","str","range","units","raw","unitsList","entries","unit","find","u","rgbRange","rgbUnits","$rgb","hslRange","hslUnits","PI","$hsl","$hex","parseInt","searchIndex","replaceBetweenIndices","replacement","includesPercentage","output","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","getSRGBLightness","scale","inLow","inHigh","outLow","outHigh","clamp","multiplyMatrices","m1","m2","j","len2","sum","k","len3","createFilterMatrix","config","Matrix","identity","invertNHue","applyColorMatrix","matrix","getBgPole","theme","getFgPole","colorModificationCache","clearColorModificationCache","rgbCacheKeys","themeCacheKeys$1","getCacheId","resultId","modifyColorWithCache","modifyHSL","poleColor","anotherPoleColor","fnCache","rf","gf","bf","noopHSL","modifyColor","modifyLightSchemeColor","poleBg","modifyLightModeHSL","poleFg","isDark","hx","sx","MAX_BG_LIGHTNESS","modifyBgHSL","pole","isNeutral","lx_1","lx","modifyBackgroundColor","FilterMode","MIN_FG_LIGHTNESS","modifyBlueFgHue","hue","modifyFgHSL","isBlue","lx_2","hx_4","modifyForegroundColor","modifyBorderHSL","modifyBorderColor","modifyShadowColor","filter","modifyGradientColor","createTextStyle","lines","getCSSFilterValue","filters","dark","toSVGMatrix","getSVGFilterMatrixValue","counter","resolvers$1","rejectors","bgFetch","request","imageManager","AsyncQueue","queue","timerId","frameDuration","addToQueue","entry","startQueue","stopQueue","_this","getImageDetails","dataURL","image_1","error_2","getImageDataURL","urlToImage","src","width","naturalWidth","height","naturalHeight","analyzeImage","image","Image","onload","onerror","canvas","context","MAX_ANALIZE_PIXELS_COUNT","createCanvas","maxWidth","maxHeight","getContext","imageSmoothingEnabled","removeCanvas","MAX_IMAGE_SIZE","currentSrc","isLight","isTransparent","isLarge","isTooLarge","naturalPixelsCount","sqrt","ceil","clearRect","drawImage","d","getImageData","TRANSPARENT_ALPHA_THRESHOLD","DARK_LIGHTNESS_THRESHOLD","LIGHT_LIGHTNESS_THRESHOLD","transparentPixelsCount","darkPixelsCount","lightPixelsCount","totalPixelsCount","opaquePixelsCount","getFilteredImageDataURL","svg","btoa","cleanImageProcessingCache","gradientLength","conicGradient","conicGradientLength","radialGradient","linearGradient","parseGradient","_loop_1","typeGradient","possibleType","offset","hasComma","getPriority","ruleStyle","Boolean","getPropertyPriority","getModifiableCSSDeclaration","variablesStore","ignoreImageSelectors","isCancelled","modifier","getVariableModifier","important","sourceValue","getVariableDependantModifier","getColorModifier","getBgImageModifier","getShadowModifier","joinSelectors","selectors","getModifiedUserAgentStyle","isIFrame","bgSelectors","getModifiedScrollbarStyle","getModifiedSelectionStyle","getSelectionColor","backgroundColorSelection","foregroundColorSelection","modifiedSelectionColor","selection","colorTrack","colorIcons","colorThumb","colorThumbHover","colorThumbActive","colorCorner","hsl_1","lighten","lighter","darken","darker","getModifiedFallbackStyle","strict","isMicrosoft","unparsableColors","webkitMaskImage","webkitMask","mask","imageDetailsCache","awaitingForImageLoading","shouldIgnoreImage","ruleSelectors","ignoredSelector","state_1","gradients","urls","getIndices","valueIndex","matches_1","sort","getGradientModifier_1","gradient","colorStopRegex","parts","part","space","lastIndexOf","colorStopMatch","modify","getURLModifier_1","urlValue","isURLEmpty","parentStyleSheet","baseURL","ownerNode","baseURI","absoluteValue","imageDetails","awaiters_1","getBgImageValue_1","inverted","dimmed","filtered","modifiers_1","matchIndex_1","prevHasComma_1","matchStart","prefixStart","matchEnd","betweenValue","all","asyncResults","combinedResult","getShadowModifierWithInfo","index_1","colorMatches_1","notParsed_1","modifiers_2","prefixIndex","matchIndex","modified","matchesLength","unparseableMatchesLength","shadowModifier","ignoredImgSelectors","getModifierForVariable","varName","getModifierForVarDependant","cleanModificationCache","VAR_TYPE_BGCOLOR","VAR_TYPE_TEXTCOLOR","VAR_TYPE_BORDERCOLOR","VAR_TYPE_BGIMG","VariablesStore","varTypes","rulesQueue","definedVars","varRefs","unknownColorVars","unknownBgVars","undefinedVars","initialVarTypes","changedTypeVars","typeChangeSubscriptions","unstableVarValues","isVarType","typeNum","addRulesForMatching","matchVariablesAndDependants","collectRootVariables","collectVariablesAndVarDep","collectRootVarDependants","refs","resolveVariableType","findVarRef","ref","itarateVarRefs","options","getDeclarations","declarations","addModifiedValue","varNameWrapper","colorModifier","modifiedValue","isVarDependant","isConstructedColorVar","insertVarValues","replaceCSSVariablesNames","fallback","wrapBgColorVariableName","tryModifyBgColor","wrapTextColorVariableName","tryModifyTextColor","wrapBorderColorVariableName","tryModifyBorderColor","wrapBgImgVariableName","bgModifier","onTypeChange","decs","subscribeForVarTypeChange","removeListeners","unsubscribeFromVariableTypeChanges","isBg_1","isText_1","isTextColorProperty","unknownVars","variableReplaced","modifiedShadow","firstUnknownVar","values","newValue","rootStore","ruleList","isVariable","inspectVariable","inspectVarDependant","documentElement","initialType","newType","iterateVarDeps","isBgColor","varDeps","iterateVarDependencies","refs_1","refs_1_1","found","setOnRootVariableChange","onRootVariableDefined","putRootVars","styleElement","e_2","sheet","deleteRule","cssLines","declarations_1","declarations_1_1","e_2_1","insertRule","getVariableRange","searchStart","getVariablesMatches","ranges","replaceVariablesMatches","replacer","matchesCount","inputLength","replacements","getVariableNameAndFallback","name","commaIndex","nameReplacer","fallbackReplacer","newFallback","newName","rawValueRegex","parseRawValue","splitted","resultInRGB_1","number","isRaw","handleRawValue","modifyFunction","newColor","outputColor","outputInRGB","source","varValues","containsUnresolvedVar","replaced","varValue","inserted","overrides","customProp","cssProp","dataAttr","overridesList","normalizedPropList","INLINE_STYLE_ATTRS","INLINE_STYLE_SELECTOR","attr","getInlineOverrideStyle","getInlineStyleElements","Document","querySelectorAll","treeObservers","attrObservers","watchForInlineStyles","elementStyleDidChange","shadowRootDiscovered","deepWatchForInlineStyles","host","discoveredNodes","WeakSet","discoverNodes","treeObserver","added","attemptCount","handleAttributeMutations","attributeName","target","attrObserver","attributeCache","attributes","attributeFilter","stopWatchingForInlineStyles","inlineStyleCache","filterProps","getInlineStyleCacheKey","getAttribute","shouldIgnoreInlineStyle","element","ingnoredSelector","overrideInlineStyle","ignoreInlineSelectors","unsetProps","keys","removeAttribute","hasAttribute","setCustomProp","rel","SVGElement","SMALL_SVG_LIMIT_1","value_1","SVGTextElement","handleSVGElement","getBoundingClientRect","SVGLineElement","overridenProp","setProperty","fill","targetCSSProp","modifierCSSProp","cssVal","isPropertyVariable","mod","metaThemeColorName","metaThemeColorSelector","srcMetaThemeColor","changeMetaThemeColor","meta","content","changeMetaThemeColorWhenAvailable","loop","HTMLMetaElement","head","restoreMetaThemeColor","themeCacheKeys","getThemeKey","resultKey","asyncQueue","createStyleSheetModifier","renderId","rulesTextCache","rulesModCache","varTypeChangeCleaners","prevFilterKey","hasNonLoadedLink","wasRebuilt","shouldRebuildStyle","modifySheet","sourceCSSRules","ignoreImageAnalysis","force","prepareSheet","isAsyncCancelled","rulesChanged","notFoundCacheKeys","themeKey","themeChanged","modRules","textDiffersFromPrev","parentRule","CSSMediaRule","mediaText","modDecs","modRule","selector","asyncDeclarations","varDeclarations","asyncDeclarationCounter","varDeclarationCounter","rootReadyGroup","isGroup","groupRefs","getGroup","readyStyleRule","readyDeclarations","handleAsyncDeclaration","asyncKey","asyncDeclaration","currentRenderId","asyncValue","rebuildAsyncRule","handleVarDeclarations","varDecs","varKey","initialIndex","oldDecs","tempDec","readyDec","newDecs","readyVarDecs","rebuildVarRule","buildStyleSheet","setRule","getDeclarationText","dec","cssRulesText","ruleText","createTarget","iterateReadyRules","styleIterator","STYLE_SELECTOR","isFontsGoogleApiStyle","shouldManageStyle","HTMLStyleElement","SVGStyleElement","HTMLLinkElement","disabled","getManageableStyles","deep","syncStyleSet","corsStyleSet","canOptimizeUsingProxy$1","loadingLinkCounter","rejectorsForLoadingLinks","cleanLoadingLinks","manageStyle","update","loadingStart","loadingEnd","prevStyles","nextElementSibling","corsCopy","syncStyle","corsCopyPositionWatcher","syncStylePositionWatcher","cancelAsyncOperations","isOverrideEmpty","sheetModifier","observerOptions","characterData","containsCSSImport","textContent","hasImports","checkCrossOrigin","cssRulesLoop","getRulesSync","safeGetSheetRules","insertStyle","createSyncStyle","createElementNS","title","isLoadingRules","wasLoadingError","loadingLinkId","getRulesAsync","accessError","fullCSSText","getRulesOrError","isStillLoadingError","linkLoading","loadText","replaceCSSImports","createCORSCopy","details","secondRound","catch","forceRenderStyle","render","removeCSSRulesFromSheet","prepareOverridesSheet","buildOverrides","message","watchForSheetChanges","watchForSheetChangesUsingProxy","watchForSheetChangesUsingRAF","rulesChangeKey","rulesCheckFrameId","getRulesChangeKey","didRulesKeyChange","stopWatchingForSheetChangesUsingRAF","checkForUpdate","areSheetChangesPending","onSheetChange","handleSheetChanges","queueMicrotask","stopWatchingForSheetChangesUsingProxy","stopWatchingForSheetChanges","pause","destroy","watch","maxMoveCount","moveCount","link","loadingId","cleanUp","onLoad","onError","getCSSImportURL","importDeclaration","basePath","importMatches","importMatches_1","importMatches_1_1","importURL","absoluteURL","importedCSS","srcElement","cors","observedRoots","elementsDefinitionCallback","observers","undefinedGroups","collectUndefinedElements","tag","tagName","extendedTag","customElementsWhenDefined","elements","canOptimizeUsingProxy","resolvers","handleIsDefined","detail","customElements","whenDefined","dispatchEvent","CustomEvent","checkIfDefined_1","watchWhenCustomElementsDefined","unsubscribeFromDefineCustomElements","watchForStyleChanges","currentStyles","stopWatchingForStyleChanges","prevStyleSiblings","nextStyleSiblings","saveStylePosition","previousElementSibling","forgetStylePosition","didStylePositionChange","handleStyleOperations","operations","createdStyles","removedStyles","movedStyles","created","removed","moved","updated","handleMinorTreeMutations","subscribeForShadowRootChanges","handleHugeTreeMutations","styles","updatedStyles","hosts","newStyles","resetObservers","hexify","generateUID","crypto","uuid","randomUUID","getRandomValues","Uint8Array","adoptedStyleOverrides","overrideList","createAdoptedStyleSheetOverride","injectSheet","override","newSheets","adoptedStyleSheets","sheetIndex","existingIndex","adoptedStyleSheet","CSSStyleSheet","injectProxy","enableStyleSheetsProxy","addRuleDescriptor","getOwnPropertyDescriptor","insertRuleDescriptor","deleteRuleDescriptor","removeRuleDescriptor","documentStyleSheetsDescriptor","shouldWrapHTMLElement","getElementsByTagNameDescriptor","defineProperty","addUndefinedResolver","updateSheetEvent","Event","proxyAddRule","proxyInsertRule","returnValue","proxyDeleteRule","proxyRemoveRule","proxyDocumentStyleSheets","getCurrentValue","filteredSheets","item","setPrototypeOf","StyleSheetList","Proxy","proxyGetElementsByTagName","getCurrentElementValue","NodeList","Number","INSTANCE_ID","styleManagers","adoptedStyleManagers","fixes","isIFrame$1","ignoredImageAnalysisSelectors","ignoredInlineSelectors","createOrUpdateStyle","className","createOrUpdateScript","nodePositionWatchers","setupNodePositionWatcher","alias","stopStylePositionWatchers","watcher","createStaticStyleOverrides","fallbackStyle","userAgentStyle","textStyle","invertStyle","invert","inlineStyle","overrideStyle","replaceCSSTemplates","appendChild","variableStyle","selectionColors","schemeBackgroundColor","schemeTextColor","rootVarsStyle","injectProxyArg","disableStyleSheetsProxy","proxyScript","append","remove","shadowRootsWithOverrides","createShadowStaticStyleOverrides","$cssText","cleanFallbackStyle","createDynamicStyleOverrides","cancelRendering","newManagers","createManager","manager","loadingStyles","inlineStyleElements","handleAdoptedStyleSheets","loadingStylesCounter","loadingStyleId","didDocumentShowUp","removeManager","throttledRenderAllStyles","onDOMReady","metaObserver","documentVisibilityListener","hidden","watchForDocumentVisibility","alreadyWatching","stopWatchingForDocumentVisibility","createThemeAndWatchForUpdates","runDynamicStyle","watchForUpdates","newManger","stylesToRemove","stylesToManage","stylesToRestore","stopWatchingForUpdates","addMetaListener","removeDynamicTheme","createDarkReaderInstanceMarker","metaElement","isAnotherDarkReaderInstanceActive","createOrUpdateDynamicTheme","filterConfig","dynamicThemeFixes","iframe","ignoreInlineStyle","headObserver_1","removeProxy","cleanDynamicThemeCache","blobRegex","replaceBlobs","promises","promise","banner","collectCSS","addStaticCSS","comment","staticStyle","modifiedCSS","formattedCSS","isDarkReaderEnabled","self","top","warn","enable","themeOptions","isEnabled","disable","matchMedia","store","handleColorScheme","auto","removeListener","exportGeneratedCSS","setFetchMethod","factory"],"sourceRoot":""}