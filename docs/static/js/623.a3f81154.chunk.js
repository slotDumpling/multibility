"use strict";(self.webpackChunkmultibility=self.webpackChunkmultibility||[]).push([[623],{27302:function(e,t,n){n.r(t),n.d(t,{MenuCtx:function(){return He},NewNoteButton:function(){return ze},default:function(){return We}});var r=n(15861),s=n(29439),a=n(87757),i=n.n(a),c=n(72791),o=n(75783),l=n(92198),u=n(30501),d=n(1413),x=n(45987),f=n(87309),p=n(50419),m=n(56075),h=n(20662),j=n(96038),g=n(70140),v=n(69228),Z=n(99372),N=n(66776),y=n(29529),k=n(14057),b=n(12056),C=n(99660),T=n(92414),w=n(61753),S=n(56200),E=n(82305),A=n(69951),D=n(89295),U=n(51570),F=n(16871),M=n(44379),P=n(67415),L=n(61842),O=n.n(L),I=n(80184),B=["children","title","keyName"],R=(0,c.createContext)({active:"MENU",setActive:function(){}});function H(){return(0,I.jsxs)("div",{className:"right-tools",children:[(0,I.jsx)(_,{}),(0,I.jsx)(X,{})]})}var W=function(e){var t=e.children,n=e.title,r=e.keyName,s=(0,x.Z)(e,B),a=(0,c.useContext)(R),i=a.active,o=a.setActive;return(0,I.jsx)(D.Z,(0,d.Z)((0,d.Z)({in:i===r},s),{},{children:(0,I.jsxs)("div",{className:"secondary",children:[(0,I.jsxs)("nav",{children:[(0,I.jsx)(f.Z,{type:"text",shape:"circle",onClick:function(){return o("MENU")},icon:(0,I.jsx)(Z.Z,{})}),(0,I.jsx)("h3",{children:n})]}),t]})}))},z=function(){var e=(0,c.useState)(!1),t=(0,s.Z)(e,2),a=t[0],l=t[1],u=(0,c.useContext)(He),d=u.tagUid,x=u.setAllTags,f=u.setAllNotes,h=(0,c.useState)(0),j=(0,s.Z)(h,2),g=j[0],v=j[1];function Z(){return(Z=(0,r.Z)(i().mark((function e(t){var r,s,a,c,u,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/pdf"===t.type){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.next=5,Promise.all([n.e(643),n.e(701)]).then(n.bind(n,21176));case 5:return r=e.sent,s=r.LoadPDF,e.next=9,s(t,v);case 9:return(a=e.sent).tagID=d,e.next=13,(0,o.au)(a);case 13:return c=e.sent,u=c.tags,m=c.allNotes,x(u),f(m),l(!1),p.ZP.success("PDF Loaded"),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,I.jsxs)(M.Z,{className:"pdf-upload",disabled:a,multiple:!1,action:"#",accept:"application/pdf",beforeUpload:function(e){return Z.apply(this,arguments)},children:[(0,I.jsxs)("p",{className:"ant-upload-drag-icon",children:[a&&(0,I.jsx)(m.Z,{width:48,type:"circle",percent:g}),a||(0,I.jsx)(N.Z,{})]}),(0,I.jsx)("p",{className:"ant-upload-hint",children:"Click or drag a pdf file here."})]})},K=function(){var e=(0,c.useContext)(R).setActive,t=(0,A.vW)(),n=(0,c.useState)(t),r=(0,s.Z)(n,2),a=r[0],i=r[1];return(0,I.jsxs)("div",{className:"profile-page",children:[(0,I.jsx)(h.Z,{value:a,onChange:function(e){return i(e.target.value)},prefix:(0,I.jsx)(y.Z,{}),allowClear:!0}),(0,I.jsx)(f.Z,{disabled:t===a||!a,onClick:function(){a&&((0,A.lu)(a),e("MENU"))},type:"primary",block:!0,children:"OK"})]})},G=function(){var e=(0,c.useContext)(He).menuInit,t=function(){var t=(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O().clear();case 2:e();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,I.jsxs)("div",{className:"setting-menu",children:[(0,I.jsx)(f.Z,{icon:(0,I.jsx)(k.Z,{}),onClick:(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.E();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),block:!0,children:"Update"}),(0,I.jsx)(j.Z,{title:"Everything will be deleted.",onConfirm:t,icon:(0,I.jsx)(b.Z,{}),okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},cancelText:"Cancel",placement:"bottom",children:(0,I.jsx)(f.Z,{icon:(0,I.jsx)(b.Z,{}),danger:!0,block:!0,children:"Clear all"})})]})},V=[{key:"PDF",label:"Import PDF",component:(0,I.jsx)(z,{}),icon:(0,I.jsx)(C.Z,{})},{key:"PROFILE",label:"My profile",component:(0,I.jsx)(K,{}),icon:(0,I.jsx)(y.Z,{})},{key:"SETTINGS",label:"Settings",component:(0,I.jsx)(G,{}),icon:(0,I.jsx)(T.Z,{})}],Y=function(){var e=(0,c.useContext)(R).setActive;return(0,I.jsx)("div",{className:"primary-menu",children:(0,I.jsx)(g.Z,{onClick:function(t){var n=t.key;return e(n)},items:V})})},J=function(){var e=(0,c.useState)(0),t=(0,s.Z)(e,2),n=t[0],r=t[1],a=(0,c.useState)(""),i=(0,s.Z)(a,2),o=i[0],l=i[1],u={timeout:300,onEnter:function(e){r(e.clientHeight)},unmountOnExit:!0};return(0,c.useEffect)((function(){return l("MENU")}),[]),(0,I.jsx)(R.Provider,{value:{active:o,setActive:l},children:(0,I.jsxs)("section",{className:"others-menu",style:{height:n},children:[(0,I.jsx)(D.Z,(0,d.Z)((0,d.Z)({in:"MENU"===o},u),{},{children:(0,I.jsx)(Y,{})})),V.map((function(e){var t=e.key,n=e.label,r=e.component;return(0,I.jsx)(W,(0,d.Z)((0,d.Z)({keyName:t,title:n},u),{},{children:r}),t)}))]})})},X=function(){return(0,I.jsxs)(v.Z,{placement:"bottomRight",trigger:"click",content:(0,I.jsx)(J,{}),zIndex:900,children:[(0,I.jsx)(f.Z,{className:"large",shape:"circle",icon:(0,I.jsx)(w.Z,{})}),(0,I.jsx)(f.Z,{className:"small",type:"text",icon:(0,I.jsx)(w.Z,{})})]})},_=function(){var e=(0,c.useState)(""),t=(0,s.Z)(e,2),n=t[0],a=t[1],o=(0,c.useState)(!1),l=(0,s.Z)(o,2),u=l[0],d=l[1],x=(0,F.s0)();function p(){return(p=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.fI)(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",x("/team/".concat(n)));case 5:a(""),d(!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,I.jsxs)(v.Z,{placement:"bottomRight",trigger:"click",title:"Join a team note",destroyTooltipOnHide:!0,onVisibleChange:function(){return d(!1)},content:(0,I.jsx)(P.GD,{plain:!0,length:4,error:u,value:n,onChange:function(e){d(!1),a(e)},onFill:function(e){return p.apply(this,arguments)}}),children:[(0,I.jsx)(f.Z,{className:"team-btn large",shape:"round",icon:(0,I.jsx)(S.Z,{}),children:"Team"}),(0,I.jsx)(f.Z,{className:"team-btn small",type:"text",icon:(0,I.jsx)(S.Z,{})})]})},q=n(88894),Q=n(96324),$=n(82622),ee=n(93309),te=n(57768),ne=n(11956),re=n(81694),se=n.n(re),ae=n(24610);var ie=(0,c.createContext)({nowSwiped:"",setNowSwiped:function(){}}),ce=function(e){var t=e.children,n=(0,c.useState)(""),r=(0,s.Z)(n,2),a=r[0],i=r[1];return(0,I.jsx)(ie.Provider,{value:{nowSwiped:a,setNowSwiped:i},children:t})},oe=function(e){var t=e.children,n=e.onDelete,a=e.disable,o=void 0!==a&&a,l=e.className,u=(0,c.useState)(ae.v4),x=(0,s.Z)(u,1)[0],f=(0,c.useContext)(ie),p=f.nowSwiped,m=f.setNowSwiped,h=(0,c.useState)(!1),j=(0,s.Z)(h,2),g=j[0],v=j[1],Z=g&&(!p||p===x),N=(0,c.useState)(!1),y=(0,s.Z)(N,2),k=y[0],b=y[1],C=(0,c.useState)(),T=(0,s.Z)(C,2),w=T[0],S=T[1],E=(0,c.useRef)(null);(0,c.useEffect)((function(){p!==x&&v(!1)}),[p,x]);var A=(0,ne.useSwipeable)({onSwipedLeft:function(){var e;v(!0),m(x),S(null===(e=E.current)||void 0===e?void 0:e.clientHeight)},onSwipedRight:function(){v(!1),m(""),S(void 0)},preventDefaultTouchmoveEvent:!0,trackTouch:!o});(0,c.useEffect)((function(){o&&(S(void 0),m(""),v(!1))}),[o,m]);var D=function(){var e=(0,c.useRef)((function(){})),t=(0,c.useState)((function(){return new Promise((function(t){return e.current=t}))}));return[(0,s.Z)(t,1)[0],function(){return e.current()}]}(),U=(0,s.Z)(D,2),F=U[0],M=U[1],P=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,F;case 3:n(),m("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=se()("swipe-wrapper",l,{deleted:k,deleting:Z});return(0,I.jsxs)("div",(0,d.Z)((0,d.Z)({className:L},A),{},{style:{height:w},onTransitionEnd:function(e){"height"===e.propertyName&&k&&M()},children:[(0,I.jsx)("div",{className:"content",ref:E,children:t}),(0,I.jsx)("div",{className:"button",onClick:P,style:{height:w},children:"Delete"})]}))},le=n(47323),ue=n(74115),de=n(80202),xe=function(e){var t=e.tagName,n=e.setTagName,r=e.tagColor,s=e.setTagColor,a=(0,I.jsx)(le.Z,{value:r,onSelect:s,listHeight:150,children:ue.O9.map((function(e){return(0,I.jsx)(le.Z.Option,{value:e,children:(0,I.jsx)(de.W,{className:"tag-circle",color:e})},e)}))});return(0,I.jsx)(h.Z,{autoFocus:!0,placeholder:"Tag name...",className:"tag-name-input",addonBefore:a,value:t,onChange:function(e){return n(e.target.value)}})},fe=function(e){var t=e.noteTag,n=t.uid,a=t.color,l=t.name,u=t.notes,x=(0,c.useContext)(He),p=x.editing,m=x.tagUid,h=x.setAllTags,g=x.setTagUid,v=(0,c.useState)(l),Z=(0,s.Z)(v,2),N=Z[0],y=Z[1],k=(0,c.useState)(a),b=(0,s.Z)(k,2),C=b[0],w=b[1],S=(0,c.useState)(!1),E=(0,s.Z)(S,2),A=E[0],D=E[1];function U(){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Pn)(n);case 2:t=e.sent,g("DEFAULT"),h(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,c.useEffect)((function(){return D(!1)}),[p]);var M=function(){var e=(0,r.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,d.Z)((0,d.Z)({},t),{},{name:N,color:C}),e.next=3,(0,o.tk)(n);case 3:r=e.sent,h(r),D(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(de.W,{className:"tag-circle",color:C}),(0,I.jsx)("span",{className:"tag-name",children:N}),p||(0,I.jsx)("span",{className:"tag-num",children:u.length}),p&&(0,I.jsx)(f.Z,{size:"small",type:"text",onClick:function(){return D(!0)},icon:(0,I.jsx)(T.Z,{})})]}),L=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(xe,{tagName:N,setTagName:y,tagColor:C,setTagColor:w}),(0,I.jsxs)("div",{className:"buttons",children:[(0,I.jsx)(j.Z,{title:"This tag will be deleted.",onConfirm:U,placement:"left",cancelText:"Cancel",icon:(0,I.jsx)($.Z,{}),okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},children:(0,I.jsx)(f.Z,{danger:!0,children:"Delete"})}),(0,I.jsx)(f.Z,{onClick:function(){y(l),w(a),D(!1)},children:"Cancel"}),(0,I.jsx)(f.Z,{type:"primary",disabled:!N,onClick:M,children:"OK"})]})]}),O=se()("tag-item",{curr:m===n,editing:A});return(0,I.jsx)(oe,{className:"tag-wrapper",onDelete:U,disable:p,children:(0,I.jsx)("div",{className:O,onClick:function(){return g(n)},children:A?L:P})})},pe=function(e){var t=e.setAdding,n=(0,c.useState)(""),r=(0,s.Z)(n,2),a=r[0],i=r[1],l=(0,c.useState)((0,ue.mr)()),u=(0,s.Z)(l,2),d=u[0],x=u[1],p=(0,c.useContext)(He).setAllTags;return(0,I.jsx)("div",{className:"tag-wrapper new",children:(0,I.jsxs)("div",{className:"tag-item curr editing",children:[(0,I.jsx)(xe,{tagName:a,setTagName:i,tagColor:d,setTagColor:x}),(0,I.jsxs)("div",{className:"buttons",children:[(0,I.jsx)(f.Z,{onClick:function(){return t(!1)},children:"Cancel"}),(0,I.jsx)(f.Z,{type:"primary",disabled:!a,onClick:function(){var e=a.trim();e&&((0,o.HO)(e,d).then(p),t(!1))},children:"OK"})]})]})})};function me(){var e=(0,c.useContext)(He),t=e.allTags,n=e.editing,r=e.tagUid,a=e.allNotes,i=e.setTagUid,o=e.setEditing,l=(0,c.useState)(!1),u=(0,s.Z)(l,2),d=u[0],x=u[1],p=(0,I.jsx)("div",{className:"tag-wrapper",children:(0,I.jsxs)("div",{className:se()("tag-item",{curr:"DEFAULT"===r}),onClick:function(){return i("DEFAULT")},children:[(0,I.jsx)(ee.Z,{className:"all-note-icon"}),(0,I.jsx)("span",{className:"tag-name",children:"All Notes"}),(0,I.jsx)("span",{className:"tag-num",children:Object.keys(a).length})]})}),m=(0,I.jsx)(f.Z,{className:"edit-btn small",shape:"round",type:n?"primary":"default",onClick:function(){return o((function(e){return!e}))},children:n?"Done":"Edit"});return(0,I.jsxs)("aside",{className:"side-menu",children:[(0,I.jsxs)("div",{className:"tag-list",children:[p,(0,I.jsx)(ce,{children:Object.values(t).map((function(e){return(0,I.jsx)(fe,{noteTag:e},e.uid)}))}),d&&(0,I.jsx)(pe,{setAdding:x})]}),(0,I.jsxs)("footer",{children:[(0,I.jsx)(f.Z,{shape:"round",icon:(0,I.jsx)(te.Z,{}),onClick:function(){return x(!0)},disabled:d,children:"Add"}),m]})]})}function he(){var e=(0,c.useState)(!1),t=(0,s.Z)(e,2),n=t[0],r=t[1],a=(0,c.useContext)(He),i=a.editing,o=a.tagUid,l=a.setEditing;(0,c.useEffect)((function(){i||r(!1)}),[o]);var u=(0,I.jsx)(f.Z,{className:"edit-btn large",onClick:function(){return l((function(e){return!e}))},type:i?"primary":"text",children:i?"Done":"Edit"}),d=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(f.Z,{className:"aside-btn",type:"text",icon:(0,I.jsx)(Q.Z,{}),onClick:function(){return r((function(e){return!e}))}}),(0,I.jsx)(q.Z,{className:"aside-drawer",width:300,placement:"left",closable:!1,visible:n,onClose:function(){return r(!1)},contentWrapperStyle:{boxShadow:"none"},bodyStyle:{padding:0,overflow:"hidden"},destroyOnClose:!0,children:(0,I.jsx)(me,{})})]});return(0,I.jsxs)("div",{className:"left-tools",children:[d,u]})}var je=n(4942),ge=n(37762),ve=n(75660),Ze=n(96989),Ne=n(37557),ye=n(6593),ke=n.n(ye),be=n(16911),Ce=n(93433),Te=n(37382),we=n(68692),Se=n(13876),Ee=n(20054),Ae=n(9486),De=n(1194),Ue=n(53834),Fe=n(11730),Me=n(7974);function Pe(e){var t=e.sortType,n=e.setSortType,r=e.searchText,s=e.setSearchText,a=e.onDelete,i=e.onMove,o=e.disabled,l=void 0===o||o,u=(0,c.useContext)(He),x=u.editing,p=u.allTags,m=u.setEditing,v=(0,I.jsx)(g.Z,{onClick:function(e){var t=e.key;return n(t)},selectedKeys:[t],className:"sort-drop",items:[{type:"group",label:"Sort by",children:[{icon:(0,I.jsx)(we.Z,{}),key:"CREATE",label:"Date created"},{icon:(0,I.jsx)(Se.Z,{}),key:"LAST",label:"Date modified"},{icon:(0,I.jsx)(Ee.Z,{}),key:"NAME",label:"Name"}]}]}),Z={type:"text",shape:"circle"},N=(0,I.jsx)(Te.Z,{overlay:v,trigger:["click"],placement:"bottom",children:(0,I.jsx)(f.Z,(0,d.Z)({className:"sort-btn",icon:(0,I.jsx)(Ae.Z,{rotate:90})},Z))}),y=(0,I.jsx)(j.Z,{title:"Notes will be deleted.",onConfirm:a,icon:(0,I.jsx)($.Z,{}),placement:"bottom",cancelText:"Cancel",disabled:l,okText:"Delete",okType:"danger",okButtonProps:{type:"primary"},children:(0,I.jsx)(f.Z,{className:"del-btn",shape:"round",type:"text",disabled:l,danger:!l,icon:(0,I.jsx)($.Z,{}),children:"Delete"})}),k=function(e){var t=e.color,n=e.name;return(0,I.jsxs)("div",{className:"tag-select",children:[(0,I.jsx)(de.W,{color:t,className:"tag-circle"}),(0,I.jsx)("span",{className:"name",children:n})]})},b=(0,I.jsx)(g.Z,{onClick:function(e){var t=e.key;return i(t)},items:[{key:"DEFAULT",label:(0,I.jsx)(k,{color:"#eee",name:"No tag"})}].concat((0,Ce.Z)(Object.values(p).map((function(e){return{key:e.uid,label:(0,I.jsx)(k,{color:e.color,name:e.name})}}))))}),C=(0,I.jsx)(Te.Z,{disabled:l,overlay:b,trigger:["click"],placement:"bottom",children:(0,I.jsx)(f.Z,{shape:"round",type:"text",className:"tag-btn",icon:(0,I.jsx)(De.Z,{}),style:{transition:"none"},children:"Tag"})});return(0,I.jsx)("div",{className:se()("head-tools",{editing:x}),children:x?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(f.Z,(0,d.Z)({className:"small",onClick:function(){return m(!1)},icon:(0,I.jsx)(Ue.Z,{})},Z)),C,y]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(h.Z,{value:r,onChange:function(e){return s(e.target.value)},className:"search-input",prefix:(0,I.jsx)(Fe.Z,{}),bordered:!1,allowClear:!0}),N,(0,I.jsx)(f.Z,(0,d.Z)({className:"small",onClick:function(){return m(!0)},icon:(0,I.jsx)(Me.Z,{})},Z))]})})}var Le=n(24124),Oe=n(97892),Ie=n.n(Oe);function Be(e){var t=e.noteList,n=(0,c.useContext)(He),a=n.editing,l=n.setAllTags,u=n.setAllNotes,d=(0,c.useState)("LAST"),x=(0,s.Z)(d,2),f=x[0],p=x[1],m=(0,c.useState)(""),h=(0,s.Z)(m,2),j=h[0],g=h[1],v=(0,c.useState)((0,Le.l4)()),Z=(0,s.Z)(v,2),N=Z[0],y=Z[1],k=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,s,a,c,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,ge.Z)(t),e.prev=1,s.s();case 3:if((a=s.n()).done){e.next=12;break}return c=a.value,e.next=7,(0,o.f_)(c);case 7:d=e.sent,n=d.tags,r=d.allNotes;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:n&&l(n),r&&u(r);case 22:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,s,a,c,d,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,ge.Z)(t),e.prev=1,a.s();case 3:if((c=a.n()).done){e.next=12;break}return d=c.value,e.next=7,(0,o.tw)(d,n);case 7:x=e.sent,r=x.tags,s=x.allNotes;case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:r&&l(r),s&&u(s);case 22:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),C=(0,c.useMemo)((function(){var e=function(e,t){return t-e};switch(f){case"CREATE":return t.sortBy((function(e){return e.createTime}),e);case"LAST":return t.sortBy((function(e){return e.lastTime}),e);case"NAME":return t.sortBy((function(e){return e.name.toUpperCase()}));default:return t}}),[t,f]),T=(0,c.useMemo)((function(){return C.filter((function(e){return e.name.toUpperCase().includes(j.trim().toUpperCase())}))}),[j,C]);return(0,c.useEffect)((function(){g(""),y((0,Le.l4)())}),[t,a]),(0,I.jsx)(ce,{children:(0,I.jsxs)(ve.Z,{className:"note-list",children:[(0,I.jsx)(Pe,{sortType:f,setSortType:p,searchText:j,setSearchText:g,onDelete:function(){return k(N.toArray())},onMove:function(e){return b(N.toArray(),e)},disabled:0===N.size}),T.map((function(e){var t=e.uid;return(0,I.jsx)(D.Z,{timeout:500,children:(0,I.jsx)(oe,{className:"note-wrapper",onDelete:function(){return k([t])},disable:a,children:(0,I.jsx)(Re,{noteInfo:e,selected:N.has(t),setSelectNotes:y})})},t)}))]})})}Ie().extend(ke());var Re=function(e){var t=e.noteInfo,n=e.selected,r=e.setSelectNotes,a=t.team,i=t.uid,l=t.name,u=t.thumbnail,x=t.lastTime,f=(0,c.useMemo)((function(){return Ie()(x).calendar()}),[x]),p="".concat(a?"team":"reader","/").concat(i),m=(0,c.useContext)(He),j=m.editing,g=m.setAllNotes,v=(0,c.useState)(l),Z=(0,s.Z)(v,2),N=Z[0],y=Z[1],k=(0,F.s0)();return(0,I.jsxs)("div",{className:se()("note-item",{selected:n}),onClick:function(){if(!j)return k(p);r((function(e){return e.has(i)?e.delete(i):e.add(i)}))},children:[(0,I.jsxs)("div",{className:"timg-wrapper",children:[(0,I.jsx)("img",{src:u||be,alt:l,className:"timg"}),a&&(0,I.jsx)(Ze.Z,{className:"cloud-icon"}),(0,I.jsx)(Ne.Z,{className:"checked-icon"})]}),(0,I.jsxs)("div",{className:"content",children:[j||(0,I.jsx)("p",{className:"name",children:l}),j&&(0,I.jsx)(h.Z,{className:"name-input",value:N,onChange:function(e){return y(e.target.value)},onClick:function(e){return e.stopPropagation()},onBlur:function(){var e=N.trim();if(!e||e===l)return y(l);(0,o.SP)(i,{name:e}),g((function(t){return(0,d.Z)((0,d.Z)({},t),{},(0,je.Z)({},i,(0,d.Z)((0,d.Z)({},t[i]),{},{name:e})))}))}}),(0,I.jsx)("span",{className:"date",children:f})]})]})},He=(0,c.createContext)({tagUid:"DEFAULT",editing:!1,allNotes:{},allTags:{},setAllNotes:function(){},setAllTags:function(){},setTagUid:function(){},setEditing:function(){},menuInit:function(){}});function We(){var e=(0,c.useState)({}),t=(0,s.Z)(e,2),n=t[0],r=t[1],a=(0,c.useState)({}),i=(0,s.Z)(a,2),l=i[0],u=i[1],d=(0,c.useState)("DEFAULT"),x=(0,s.Z)(d,2),f=x[0],p=x[1],m=(0,c.useState)(!1),h=(0,s.Z)(m,2),j=h[0],g=h[1],v=(0,c.useMemo)((function(){var e;return null!==(e=l[f])&&void 0!==e?e:{uid:"",name:"All Notes",color:"#000000",notes:Object.keys(n)}}),[n,l,f]),Z=(0,c.useMemo)((function(){return(0,Le.aV)(v.notes.filter((function(e){return e in n})).map((function(e){return n[e]})))}),[v,n]),N=function(){(0,o.hY)().then(r),(0,o.Ys)().then(u),document.title="Multibility"};(0,c.useEffect)(N,[]);var y="DEFAULT"===f;return(0,I.jsx)(He.Provider,{value:{tagUid:f,editing:j,allNotes:n,allTags:l,setAllNotes:r,setAllTags:u,setEditing:g,setTagUid:p,menuInit:N},children:(0,I.jsxs)("div",{className:"main-menu container",children:[(0,I.jsxs)("header",{children:[(0,I.jsx)(he,{}),(0,I.jsx)("h2",{className:se()({logo:y}),children:y?"Multibility":v.name}),(0,I.jsx)(H,{})]}),(0,I.jsxs)("main",{children:[(0,I.jsx)(me,{}),(0,I.jsx)(Be,{noteList:Z}),(0,I.jsx)(ze,{})]})]})})}var ze=function(){var e=(0,c.useContext)(He),t=e.tagUid,n=e.setAllTags,s=e.setAllNotes;function a(){return(a=(0,r.Z)(i().mark((function e(){var r,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=(0,l.Xn)()).tagID=t,e.next=4,(0,o.au)(r);case 4:a=e.sent,c=a.tags,u=a.allNotes,n(c),s(u);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,I.jsx)(f.Z,{className:"new-note",size:"large",type:"primary",shape:"circle",onClick:function(){return a.apply(this,arguments)},icon:(0,I.jsx)(u.Z,{})})}},16911:function(e,t,n){e.exports=n.p+"static/media/default.dd5512731ffc4dfd92ad.png"}}]);
//# sourceMappingURL=623.a3f81154.chunk.js.map