{"version":3,"file":"static/js/710.8dc76415.chunk.js","mappings":"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","sources":["component/ui/DigitInput.tsx","component/menu/RightTools.tsx","component/ui/SwipeDelete.tsx","component/menu/SideMenu.tsx","component/menu/LeftTools.tsx","component/menu/NoteList.tsx","component/menu/MainMenu.tsx"],"sourcesContent":["import React, {\r\n  KeyboardEvent,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport \"./digitInput.sass\";\r\n\r\nexport default function DigitInput({\r\n  value = 0,\r\n  digitNum = 4,\r\n  onChange = () => {},\r\n  onSubmit,\r\n}: {\r\n  value?: number;\r\n  digitNum?: number;\r\n  onChange?: (val: number) => void;\r\n  onSubmit: (val: number) => void;\r\n}) {\r\n  function num2digits(num: number): string[] {\r\n    if (num === 0) return new Array(digitNum).fill(\"\");\r\n    return String(num)\r\n      .slice(0, digitNum)\r\n      .padEnd(digitNum, \"x\")\r\n      .split(\"\")\r\n      .map((s) => (s === \"x\" ? \"\" : s));\r\n  }\r\n\r\n  const [nowFocused, setNowFocused] = useState(0);\r\n  const [digits, setDigits] = useState(num2digits(value));\r\n  useEffect(() => {\r\n    const newDigits = num2digits(value);\r\n    setDigits(newDigits);\r\n  }, [value]);\r\n\r\n  useEffect(() => {\r\n    const idx = digits.findIndex((d) => d === \"\");\r\n    setNowFocused(idx);\r\n    const newValue = Number(digits.join(\"\"));\r\n    if (newValue === value) return;\r\n    onChange(newValue);\r\n    if (idx === -1) {\r\n      onSubmit(newValue);\r\n    }\r\n  }, [digits]);\r\n\r\n  function focus() {\r\n    if (nowFocused === -1) {\r\n      inputRefs.current.forEach((el) => el.blur());\r\n    } else {\r\n      inputRefs.current[nowFocused].focus();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    focus();\r\n  }, [nowFocused]);\r\n\r\n  function handleChange(val: string, idx: number) {\r\n    if (!/^[0-9]$/.test(val)) return;\r\n    setDigits(prev => {\r\n      const newDigits = prev.slice();\r\n      newDigits[idx] = val;\r\n      return newDigits;\r\n    });\r\n  }\r\n\r\n  const inputRefs = useRef<HTMLInputElement[]>([]);\r\n  useEffect(() => {\r\n    inputRefs.current = inputRefs.current.slice(0, digitNum);\r\n  }, [digitNum]);\r\n\r\n  function handleKeyUp(e: KeyboardEvent<HTMLInputElement>) {\r\n    if (e.key === \"Backspace\") {\r\n      const idx = Math.max(0, nowFocused - 1);\r\n      setNowFocused(idx);\r\n      setDigits(prev => {\r\n        const newDigits = prev.slice();\r\n        newDigits[idx] = '';\r\n        return newDigits;\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"digit-input\">\r\n      {digits.map((d, idx) => (\r\n        <input\r\n          key={idx}\r\n          ref={(el) => {\r\n            if (!el) return;\r\n            inputRefs.current[idx] = el;\r\n          }}\r\n          value={d}\r\n          pattern=\"\\d*\"\r\n          onChange={(e) => handleChange(e.target.value, idx)}\r\n          onKeyUp={handleKeyUp}\r\n        />\r\n      ))}\r\n      <div className=\"click-area\" onClick={focus}></div>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  ButtonProps,\r\n  Input,\r\n  Menu,\r\n  message,\r\n  Popconfirm,\r\n  Popover,\r\n  Progress,\r\n} from \"antd\";\r\nimport { createContext, ReactNode, useContext, useState } from \"react\";\r\nimport { createNewNote } from \"../../lib/note/archive\";\r\nimport { MenuStateCtx, MenuMethodCtx } from \"./MainMenu\";\r\nimport {\r\n  TeamOutlined,\r\n  UserOutlined,\r\n  ClearOutlined,\r\n  InboxOutlined,\r\n  FilePdfOutlined,\r\n  SettingOutlined,\r\n  CaretDownOutlined,\r\n  ArrowLeftOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { getUserName, saveUserName } from \"../../lib/user\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { getNoteID } from \"../../lib/network/http\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Title from \"antd/lib/typography/Title\";\r\nimport Dragger from \"antd/lib/upload/Dragger\";\r\nimport DigitInput from \"../ui/DigitInput\";\r\nimport { Setter } from \"../../lib/hooks\";\r\nimport localforage from \"localforage\";\r\nimport { useEffect } from \"react\";\r\nimport { FC } from \"react\";\r\nimport \"./right.sass\";\r\nimport \"animate.css\";\r\n\r\nconst OthersStateCtx = createContext({\r\n  setActive: (() => {}) as Setter<string>,\r\n});\r\n\r\nexport default function RightTools() {\r\n  return (\r\n    <div className=\"right-tools\">\r\n      <JoinTeamButton />\r\n      <OthersButton />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst OthersMenu = () => {\r\n  const { setActive } = useContext(OthersStateCtx);\r\n  return (\r\n    <div className=\"other-menu\">\r\n      <Menu\r\n        onClick={({ key }) => setActive(key)}\r\n        items={[\r\n          { key: \"PDF\", icon: <FilePdfOutlined />, label: \"Import PDF\" },\r\n          { key: \"PROFILE\", icon: <UserOutlined />, label: \"My profile\" },\r\n          { key: \"SETTINGS\", icon: <SettingOutlined />, label: \"Settings\" },\r\n        ]}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SeconaryMenu: FC<{\r\n  children: ReactNode;\r\n  title: string;\r\n}> = ({ children, title }) => {\r\n  const { setActive } = useContext(OthersStateCtx);\r\n  return (\r\n    <div className=\"secondary\">\r\n      <nav>\r\n        <Button\r\n          type=\"text\"\r\n          shape=\"circle\"\r\n          onClick={() => setActive(\"MENU\")}\r\n          icon={<ArrowLeftOutlined />}\r\n        />\r\n        <Title level={5}>{title}</Title>\r\n      </nav>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction UploadPdfPage() {\r\n  const [loading, setLoading] = useState(false);\r\n  const { tagUid } = useContext(MenuStateCtx);\r\n  const { setAllTags, setAllNotes } = useContext(MenuMethodCtx);\r\n  const [percent, setPercent] = useState(0);\r\n\r\n  async function handleFile(file: File) {\r\n    if (file.type !== \"application/pdf\") return;\r\n    setLoading(true);\r\n    const { LoadPDF } = await import(\"../../lib/note/pdfImage\");\r\n    const note = await LoadPDF(file, setPercent);\r\n    note.tagID = tagUid;\r\n    const { tags, allNotes } = await createNewNote(note);\r\n    setAllTags(tags);\r\n    setAllNotes(allNotes);\r\n    setLoading(false);\r\n    message.success(\"PDF Loaded\");\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    <SeconaryMenu title=\"Import PDF\">\r\n      <Dragger\r\n        disabled={loading}\r\n        multiple={false}\r\n        action=\"#\"\r\n        accept=\"application/pdf\"\r\n        beforeUpload={handleFile}\r\n      >\r\n        <p className=\"ant-upload-drag-icon\">\r\n          {loading ? (\r\n            <Progress width={48} type=\"circle\" percent={percent} />\r\n          ) : (\r\n            <InboxOutlined />\r\n          )}\r\n        </p>\r\n        <p className=\"ant-upload-hint\">Click or drag a pdf file here.</p>\r\n      </Dragger>\r\n    </SeconaryMenu>\r\n  );\r\n}\r\n\r\nconst ProfilePage = () => {\r\n  const userName = getUserName();\r\n  const [name, setName] = useState(userName);\r\n  const { setActive } = useContext(OthersStateCtx);\r\n  const handleEnter = () => {\r\n    if (!name) return;\r\n    saveUserName(name);\r\n    setActive(\"MENU\");\r\n  };\r\n  return (\r\n    <SeconaryMenu title=\"My profile\">\r\n      <div className=\"profile-page\">\r\n        <Input\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          prefix={<UserOutlined />}\r\n          allowClear\r\n        />\r\n        <Button\r\n          disabled={userName === name || !name}\r\n          onClick={handleEnter}\r\n          type=\"primary\"\r\n          block\r\n        >\r\n          OK\r\n        </Button>\r\n      </div>\r\n    </SeconaryMenu>\r\n  );\r\n};\r\n\r\nconst SettingsPage = () => {\r\n  const { menuInit } = useContext(MenuMethodCtx);\r\n\r\n  const clearAll = async () => {\r\n    await localforage.clear();\r\n    menuInit();\r\n  };\r\n\r\n  return (\r\n    <SeconaryMenu title=\"Settings\">\r\n      <Popconfirm\r\n        title=\"Everything will be deleted.\"\r\n        onConfirm={clearAll}\r\n        icon={<ClearOutlined />}\r\n        okText=\"Delete\"\r\n        okType=\"danger\"\r\n        okButtonProps={{ type: \"primary\" }}\r\n        cancelText=\"Cancel\"\r\n        placement=\"bottom\"\r\n      >\r\n        <Button icon={<ClearOutlined />} danger block>\r\n          Clear all\r\n        </Button>\r\n      </Popconfirm>\r\n    </SeconaryMenu>\r\n  );\r\n};\r\n\r\nconst OthersPage = () => {\r\n  const [height, setHeight] = useState(0);\r\n  const [active, setActive] = useState(\"\");\r\n\r\n  const calcHeight = (el: HTMLElement) => {\r\n    setHeight(el.clientHeight);\r\n  };\r\n\r\n  const cssProps = {\r\n    timeout: 300,\r\n    onEnter: calcHeight,\r\n    unmountOnExit: true,\r\n  };\r\n\r\n  const cssProps2 = {\r\n    ...cssProps,\r\n    classNames: \"secondary\",\r\n  };\r\n\r\n  useEffect(() => setActive(\"MENU\"), []);\r\n\r\n  return (\r\n    <OthersStateCtx.Provider value={{ setActive }}>\r\n      <section className=\"others-menu\" style={{ height }}>\r\n        <CSSTransition\r\n          classNames=\"primary\"\r\n          in={active === \"MENU\"}\r\n          {...cssProps}\r\n        >\r\n          <OthersMenu />\r\n        </CSSTransition>\r\n        <CSSTransition in={active === \"PDF\"} {...cssProps2}>\r\n          <UploadPdfPage />\r\n        </CSSTransition>\r\n        <CSSTransition in={active === \"PROFILE\"} {...cssProps2}>\r\n          <ProfilePage />\r\n        </CSSTransition>\r\n        <CSSTransition in={active === \"SETTINGS\"} {...cssProps2}>\r\n          <SettingsPage />\r\n        </CSSTransition>\r\n      </section>\r\n    </OthersStateCtx.Provider>\r\n  );\r\n};\r\n\r\nconst OthersButton = () => {\r\n  const btnProps: ButtonProps = {\r\n    shape: \"circle\",\r\n    icon: <CaretDownOutlined />,\r\n  };\r\n  return (\r\n    <Popover\r\n      placement=\"bottomRight\"\r\n      trigger=\"click\"\r\n      content={<OthersPage />}\r\n      zIndex={900}\r\n    >\r\n      <Button className=\"large\" {...btnProps} />\r\n      <Button className=\"small\" type=\"text\" {...btnProps} />\r\n    </Popover>\r\n  );\r\n};\r\n\r\nfunction JoinTeamButton() {\r\n  const [roomCode, setRoomCode] = useState(0);\r\n  const [animated, setAnimated] = useState(false);\r\n\r\n  const nav = useNavigate();\r\n  async function handleSubmit(code: number) {\r\n    const noteID = await getNoteID(code);\r\n    if (!noteID) {\r\n      setRoomCode(0);\r\n      setAnimated(true);\r\n      setTimeout(() => setAnimated(false), 1000);\r\n      return;\r\n    }\r\n    nav(`/team/${noteID}`);\r\n  }\r\n\r\n  return (\r\n    <Popover\r\n      placement=\"bottomRight\"\r\n      trigger=\"click\"\r\n      title=\"Join a team note\"\r\n      destroyTooltipOnHide\r\n      content={\r\n        <div\r\n          className={animated ? \"animate__animated animate__shakeX\" : undefined}\r\n        >\r\n          <DigitInput\r\n            value={roomCode}\r\n            onChange={setRoomCode}\r\n            onSubmit={handleSubmit}\r\n          />\r\n        </div>\r\n      }\r\n    >\r\n      <Button className=\"team-btn large\" shape=\"round\" icon={<TeamOutlined />}>\r\n        Team\r\n      </Button>\r\n      <Button\r\n        className=\"team-btn small\"\r\n        type=\"text\"\r\n        shape=\"circle\"\r\n        icon={<TeamOutlined />}\r\n      />\r\n    </Popover>\r\n  );\r\n}\r\n","import React, { FC, useEffect, useRef, useState } from \"react\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { useSwipeable } from \"react-swipeable\";\nimport { Setter } from \"../../lib/hooks\";\nimport classNames from \"classnames\";\nimport \"./swipe-delete.sass\";\n\nconst SwipeDelete: FC<{\n  onDelete: () => void;\n  uid: string;\n  nowSwiped?: string;\n  setNowSwiped?: Setter<string>;\n  disable?: boolean;\n  icon?: boolean;\n  className?: string;\n}> = ({\n  children,\n  nowSwiped,\n  setNowSwiped,\n  uid,\n  onDelete,\n  disable = false,\n  icon = false,\n  className,\n}) => {\n  const [deleted, setDeleted] = useState(false);\n  const [swiped, setSwiped] = useState(false);\n  const [height, setHeight] = useState<number>();\n  const button = useRef<HTMLDivElement>(null);\n  const deleting = swiped && (nowSwiped === undefined || nowSwiped === uid);\n\n  const showDelete = () => {\n    setSwiped(true);\n    setNowSwiped && setNowSwiped(uid);\n    setHeight(button.current?.clientHeight);\n  };\n\n  const hideDelete = () => {\n    setSwiped(false);\n    setNowSwiped && setNowSwiped(\"\");\n    setHeight(undefined);\n  };\n\n  const swipeHandler = useSwipeable({\n    onSwipedLeft: showDelete,\n    onSwipedRight: hideDelete,\n    preventDefaultTouchmoveEvent: true,\n    trackTouch: !disable,\n  });\n\n  useEffect(() => {\n    if (!disable) return;\n    setHeight(undefined);\n    setNowSwiped && setNowSwiped(\"\");\n    setSwiped(false);\n  }, [disable]);\n\n  return (\n    <div\n      className={classNames(\"swipe-wrapper\", className, {\n        deleted,\n        deleting,\n        icon,\n      })}\n      {...swipeHandler}\n      style={{ height }}\n    >\n      <div className=\"content\">{children}</div>\n      <div\n        className=\"button\"\n        onClickCapture={(e) => {\n          setDeleted(true);\n          setTimeout(onDelete, 300);\n          e.stopPropagation();\n        }}\n        ref={button}\n      >\n        {icon ? <DeleteOutlined /> : <span>Delete</span>}\n      </div>\n    </div>\n  );\n};\n\nexport default SwipeDelete;\n","import { Button, Input, Popconfirm, Popover, Select } from \"antd\";\r\nimport { FC, MouseEventHandler, useContext, useEffect, useState } from \"react\";\r\nimport { deleteTag, editTag, NoteTag, addNewTag } from \"../../lib/note/archive\";\r\nimport { colors } from \"../../lib/color\";\r\nimport { MenuStateCtx, MenuMethodCtx } from \"./MainMenu\";\r\nimport {\r\n  TagOutlined,\r\n  PlusOutlined,\r\n  DeleteOutlined,\r\n  SettingOutlined,\r\n  ProfileOutlined,\r\n} from \"@ant-design/icons\";\r\nimport Search from \"antd/lib/input/Search\";\r\nimport SwipeDelete from \"../ui/SwipeDelete\";\r\nimport classNames from \"classnames\";\r\n\r\nexport const TagCircle = ({ color }: { color: string }) => {\r\n  const style = { backgroundColor: color };\r\n  return <div className=\"tag-circle\" style={style} />;\r\n};\r\n\r\nconst TagItem: FC<{\r\n  noteTag: NoteTag;\r\n  removeTag: () => void;\r\n  onClick: MouseEventHandler<HTMLDivElement>;\r\n}> = ({ noteTag, removeTag, onClick }) => {\r\n  const { uid, color, name, notes } = noteTag;\r\n  const { editing, tagUid } = useContext(MenuStateCtx);\r\n  const { setAllTags } = useContext(MenuMethodCtx);\r\n  const [tagEditing, setTagEditing] = useState(false);\r\n  const [tagName, setTagName] = useState(name);\r\n  const [tagColor, setTagColor] = useState(color);\r\n\r\n  const cancelEditing = () => {\r\n    setTagName(name);\r\n    setTagColor(color);\r\n    setTagEditing(false);\r\n  };\r\n\r\n  const finishEditing = async () => {\r\n    const newTag: NoteTag = {\r\n      ...noteTag,\r\n      name: tagName,\r\n      color: tagColor,\r\n    };\r\n\r\n    const newAllTags = await editTag(newTag);\r\n    setAllTags(newAllTags);\r\n    setTagEditing(false);\r\n  };\r\n\r\n  const colorSelector = (\r\n    <Select value={tagColor} onSelect={setTagColor}>\r\n      {colors.map((c) => (\r\n        <Select.Option value={c} key={c}>\r\n          <TagCircle color={c} />\r\n        </Select.Option>\r\n      ))}\r\n    </Select>\r\n  );\r\n\r\n  const TagNameInput = (\r\n    <Input\r\n      className=\"tag-name-input\"\r\n      addonBefore={colorSelector}\r\n      value={tagName}\r\n      onChange={(e) => setTagName(e.target.value)}\r\n    />\r\n  );\r\n\r\n  useEffect(() => {\r\n    setTagEditing(false);\r\n  }, [editing]);\r\n\r\n  return (\r\n    <div\r\n      className={classNames(\"tag-item\", {\r\n        curr: tagUid === uid,\r\n        editing: editing && tagEditing,\r\n      })}\r\n      onClick={onClick}\r\n    >\r\n      {(editing && tagEditing) || (\r\n        <>\r\n          <TagCircle color={tagColor} />\r\n          <span className=\"tag-name\">{tagName}</span>\r\n        </>\r\n      )}\r\n      {editing || <span className=\"tag-num\">{notes.length}</span>}\r\n      {editing && !tagEditing && (\r\n        <Button\r\n          size=\"small\"\r\n          type=\"text\"\r\n          onClick={() => setTagEditing(true)}\r\n          icon={<SettingOutlined />}\r\n        />\r\n      )}\r\n      {editing && tagEditing && (\r\n        <>\r\n          {TagNameInput}\r\n          <div className=\"buttons\">\r\n            <Popconfirm\r\n              title=\"This tag will be deleted.\"\r\n              onConfirm={removeTag}\r\n              placement=\"left\"\r\n              cancelText=\"Cancel\"\r\n              icon={<DeleteOutlined />}\r\n              okText=\"Delete\"\r\n              okType=\"danger\"\r\n              okButtonProps={{ type: \"primary\" }}\r\n            >\r\n              <Button danger>Delete</Button>\r\n            </Popconfirm>\r\n            <Button onClick={cancelEditing}>Cancel</Button>\r\n            <Button\r\n              disabled={tagName === \"\"}\r\n              type=\"primary\"\r\n              onClick={finishEditing}\r\n            >\r\n              OK\r\n            </Button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AddTag = () => {\r\n  const { setAllTags } = useContext(MenuMethodCtx);\r\n  const [popShow, setPopShow] = useState(false);\r\n\r\n  async function addTag(val: string) {\r\n    const name = val.trim();\r\n    if (!name) {\r\n      return;\r\n    } else {\r\n      const tags = await addNewTag(name);\r\n      setAllTags(tags);\r\n      setPopShow(false);\r\n    }\r\n  }\r\n\r\n  const AddTagInput = () => (\r\n    <Search\r\n      placeholder=\"Tag name...\"\r\n      onSearch={addTag}\r\n      allowClear\r\n      enterButton={<Button icon={<PlusOutlined />} />}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <div className=\"add-tag\">\r\n      <Popover\r\n        visible={popShow}\r\n        onVisibleChange={setPopShow}\r\n        content={<AddTagInput />}\r\n        trigger=\"click\"\r\n        placement=\"topLeft\"\r\n        destroyTooltipOnHide\r\n      >\r\n        <Button\r\n          shape=\"round\"\r\n          icon={<TagOutlined />}\r\n          onClick={() => setPopShow(true)}\r\n        >\r\n          Add\r\n        </Button>\r\n      </Popover>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function SideMenu({ onSelect }: { onSelect?: () => void }) {\r\n  const { allTags, editing, tagUid, allNotes } = useContext(MenuStateCtx);\r\n  const { setTagUid, setAllTags } = useContext(MenuMethodCtx);\r\n  const { setEditing } = useContext(MenuMethodCtx);\r\n  const [nowSwiped, setNowSwiped] = useState(\"\");\r\n\r\n  async function removeOneTag(uid: string) {\r\n    const tags = await deleteTag(uid);\r\n    setTagUid(\"DEFAULT\");\r\n    setAllTags(tags);\r\n  }\r\n\r\n  const selectTag = (key: string) => {\r\n    setTagUid(key);\r\n    onSelect && onSelect();\r\n  };\r\n\r\n  const allNoteTag = (\r\n    <div\r\n      className={classNames(\"tag-item\", { curr: tagUid === \"DEFAULT\" })}\r\n      onClick={() => selectTag(\"DEFAULT\")}\r\n    >\r\n      <ProfileOutlined className=\"all-note-icon\" />\r\n      <span className=\"tag-name\">All Notes</span>\r\n      <span className=\"tag-num\">{Object.keys(allNotes).length}</span>\r\n    </div>\r\n  );\r\n\r\n  const swichEditing = () => {\r\n    setEditing((prev) => !prev);\r\n  }\r\n\r\n  const editButton = (\r\n    <Button\r\n      className=\"edit-btn small\"\r\n      shape=\"round\"\r\n      type={editing ? \"primary\" : \"default\"}\r\n      onClick={swichEditing}\r\n    >\r\n      {editing ? \"Done\" : \"Edit\"}\r\n    </Button>\r\n  );\r\n\r\n  return (\r\n    <aside className=\"side-menu\">\r\n      <div className=\"tag-list\">\r\n        {allNoteTag}\r\n        {Object.values(allTags).map((tag) => {\r\n          const { uid } = tag;\r\n          const removeTag = () => removeOneTag(uid);\r\n          return (\r\n            <SwipeDelete\r\n              key={uid}\r\n              uid={uid}\r\n              className=\"tag-swipe\"\r\n              onDelete={removeTag}\r\n              nowSwiped={nowSwiped}\r\n              setNowSwiped={setNowSwiped}\r\n              disable={editing}\r\n              icon\r\n            >\r\n              <TagItem\r\n                noteTag={tag}\r\n                removeTag={removeTag}\r\n                onClick={() => selectTag(uid)}\r\n              />\r\n            </SwipeDelete>\r\n          );\r\n        })}\r\n      </div>\r\n      <footer>\r\n        <AddTag />\r\n        {editButton}\r\n      </footer>\r\n    </aside>\r\n  );\r\n}\r\n","import { Button, Drawer } from \"antd\";\r\nimport { useContext, useState } from \"react\";\r\nimport { MenuStateCtx, MenuMethodCtx } from \"./MainMenu\";\r\nimport { MenuOutlined } from \"@ant-design/icons\";\r\nimport SideMenu from \"./SideMenu\";\r\n\r\nexport default function LeftTools() {\r\n  const [asideOn, setAsideOn] = useState(false);\r\n  const { editing } = useContext(MenuStateCtx);\r\n  const { setEditing } = useContext(MenuMethodCtx);\r\n\r\n  function swichEditing() {\r\n    setEditing((prev) => !prev);\r\n  }\r\n\r\n  const editButton = (\r\n    <Button\r\n      className=\"edit-btn large\"\r\n      onClick={swichEditing}\r\n      type={editing ? \"primary\" : \"text\"}\r\n    >\r\n      {editing ? \"Done\" : \"Edit\"}\r\n    </Button>\r\n  );\r\n\r\n  const AsideButton = (\r\n    <>\r\n      <Button\r\n        className=\"aside-btn\"\r\n        type=\"text\"\r\n        icon={<MenuOutlined />}\r\n        onClick={() => setAsideOn((prev) => !prev)}\r\n      />\r\n      <Drawer\r\n        className=\"aside-drawer\"\r\n        width={300}\r\n        placement=\"left\"\r\n        closable={false}\r\n        visible={asideOn}\r\n        onClose={() => setAsideOn(false)}\r\n        contentWrapperStyle={{ boxShadow: \"none\" }}\r\n        bodyStyle={{ padding: 0, overflow: \"hidden\" }}\r\n        destroyOnClose\r\n      >\r\n        <SideMenu onSelect={() => editing || setAsideOn(false)} />\r\n      </Drawer>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <div className=\"left-tools\">\r\n      {AsideButton}\r\n      {editButton}\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  FC,\r\n  useMemo,\r\n  useState,\r\n  useEffect,\r\n  useContext,\r\n  MouseEventHandler,\r\n} from \"react\";\r\nimport {\r\n  NoteTag,\r\n  deleteNote,\r\n  moveNoteTag,\r\n  editNoteData,\r\n} from \"../../lib/note/archive\";\r\nimport {\r\n  SwapOutlined,\r\n  TagsOutlined,\r\n  EditOutlined,\r\n  CloudOutlined,\r\n  CloseOutlined,\r\n  DeleteOutlined,\r\n  SearchOutlined,\r\n  ClockCircleOutlined,\r\n  SortAscendingOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { Button, Input, Popconfirm, Tag, Dropdown, Menu } from \"antd\";\r\nimport { MenuStateCtx, MenuMethodCtx } from \"./MainMenu\";\r\nimport { NoteInfo } from \"../../lib/note/note\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport SwipeDelete from \"../ui/SwipeDelete\";\r\nimport dafaultImg from \"../ui/default.png\";\r\nimport { Setter } from \"../../lib/hooks\";\r\nimport { TagCircle } from \"./SideMenu\";\r\nimport { List, Set } from \"immutable\";\r\nimport classNames from \"classnames\";\r\nimport moment from \"moment\";\r\n\r\nexport default function NoteList({ noteList }: { noteList: List<NoteInfo> }) {\r\n  const [nowSwiped, setNowSwiped] = useState(\"\");\r\n  const { editing } = useContext(MenuStateCtx);\r\n  const { setAllTags, setAllNotes } = useContext(MenuMethodCtx);\r\n  const [sortType, setSortType] = useState(\"LAST\");\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [selectedNotes, setSelectNotes] = useState(Set<string>());\r\n  const nav = useNavigate();\r\n\r\n  const removeNotes = async (uids: string[]) => {\r\n    let tags: Record<string, NoteTag> | undefined;\r\n    let allNotes: Record<string, NoteInfo> | undefined;\r\n    for (let uid of uids) {\r\n      const res = await deleteNote(uid);\r\n      tags = res.tags;\r\n      allNotes = res.allNotes;\r\n    }\r\n    tags && setAllTags(tags);\r\n    allNotes && setAllNotes(allNotes);\r\n  };\r\n\r\n  const moveNotes = async (noteIDs: string[], tagID: string) => {\r\n    let tags: Record<string, NoteTag> | undefined;\r\n    let allNotes: Record<string, NoteInfo> | undefined;\r\n    for (let noteID of noteIDs) {\r\n      const res = await moveNoteTag(noteID, tagID);\r\n      tags = res.tags;\r\n      allNotes = res.allNotes;\r\n    }\r\n    tags && setAllTags(tags);\r\n    allNotes && setAllNotes(allNotes);\r\n  };\r\n\r\n  const sortedList = useMemo(() => {\r\n    switch (sortType) {\r\n      case \"CREATE\":\r\n        return noteList.sortBy((n) => -n.createTime);\r\n      case \"LAST\":\r\n        return noteList.sortBy((n) => -n.lastTime);\r\n      case \"NAME\":\r\n        return noteList.sortBy((n) => n.name.toUpperCase());\r\n      default:\r\n        return noteList;\r\n    }\r\n  }, [noteList, sortType]);\r\n\r\n  const filterdList = useMemo(\r\n    () =>\r\n      sortedList.filter((n) =>\r\n        n.name.toLowerCase().includes(searchText.trim().toLowerCase())\r\n      ),\r\n    [searchText, sortedList]\r\n  );\r\n\r\n  useEffect(() => {\r\n    setSearchText(\"\");\r\n    setSelectNotes(Set());\r\n  }, [noteList, editing]);\r\n\r\n  return (\r\n    <div className=\"note-list\">\r\n      <HeadTools\r\n        sortType={sortType}\r\n        setSortType={setSortType}\r\n        searchText={searchText}\r\n        setSearchText={setSearchText}\r\n        onDelete={() => removeNotes(selectedNotes.toArray())}\r\n        onMove={(tagID) => moveNotes(selectedNotes.toArray(), tagID)}\r\n        disabled={selectedNotes.size === 0}\r\n      />\r\n      {filterdList.map((noteInfo) => {\r\n        const { uid, team } = noteInfo;\r\n        const removeNote = () => removeNotes([uid]);\r\n        const href = `${team ? \"team\" : \"reader\"}/${uid}`;\r\n        return (\r\n          <SwipeDelete\r\n            onDelete={removeNote}\r\n            nowSwiped={nowSwiped}\r\n            setNowSwiped={setNowSwiped}\r\n            disable={editing}\r\n            uid={uid}\r\n            key={uid}\r\n          >\r\n            <NoteItem\r\n              noteInfo={noteInfo}\r\n              onClick={(e) => {\r\n                if (e.target instanceof HTMLInputElement) return;\r\n                if (!editing) return nav(href);\r\n                setSelectNotes((prev) => {\r\n                  if (prev.has(uid)) return prev.delete(uid);\r\n                  else return prev.add(uid);\r\n                });\r\n              }}\r\n              selected={selectedNotes.has(uid)}\r\n            />\r\n          </SwipeDelete>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst HeadTools: FC<{\r\n  sortType: string;\r\n  setSortType: Setter<string>;\r\n  searchText: string;\r\n  setSearchText: Setter<string>;\r\n  onDelete: () => void;\r\n  onMove: (tagID: string) => void;\r\n  disabled: boolean;\r\n}> = ({\r\n  sortType,\r\n  setSortType,\r\n  searchText,\r\n  setSearchText,\r\n  onDelete,\r\n  onMove,\r\n  disabled = true,\r\n}) => {\r\n  const { editing, allTags } = useContext(MenuStateCtx);\r\n\r\n  const sortMenu = (\r\n    <Menu\r\n      onClick={({ key }) => setSortType(key)}\r\n      selectedKeys={[sortType]}\r\n      items={[\r\n        { icon: <ClockCircleOutlined />, key: \"CREATE\", label: \"Created Time\" },\r\n        { icon: <EditOutlined />, key: \"LAST\", label: \"Modified Time\" },\r\n        { icon: <SortAscendingOutlined />, key: \"NAME\", label: \"Name\" },\r\n      ]}\r\n    />\r\n  );\r\n\r\n  const sortButton = (\r\n    <Dropdown overlay={sortMenu} trigger={[\"click\"]} placement=\"bottom\">\r\n      <Button\r\n        className=\"sort-btn\"\r\n        type=\"text\"\r\n        shape=\"circle\"\r\n        icon={<SwapOutlined rotate={90} />}\r\n      />\r\n    </Dropdown>\r\n  );\r\n\r\n  const deleteButton = (\r\n    <Popconfirm\r\n      title=\"Notes will be deleted.\"\r\n      onConfirm={onDelete}\r\n      icon={<DeleteOutlined />}\r\n      placement=\"bottom\"\r\n      cancelText=\"Cancel\"\r\n      disabled={disabled}\r\n      okText=\"Delete\"\r\n      okType=\"danger\"\r\n      okButtonProps={{ type: \"primary\" }}\r\n    >\r\n      <Button\r\n        className=\"del-btn\"\r\n        shape=\"round\"\r\n        type=\"text\"\r\n        disabled={disabled}\r\n        danger={!disabled}\r\n        icon={<DeleteOutlined />}\r\n      >\r\n        Delete\r\n      </Button>\r\n    </Popconfirm>\r\n  );\r\n\r\n  const overlay = (\r\n    <Menu\r\n      onClick={({ key }) => onMove(key)}\r\n      items={[\r\n        {\r\n          key: \"DEFAULT\",\r\n          label: (\r\n            <div className=\"tag-select\">\r\n              <CloseOutlined className=\"none-tag-icon\" />\r\n              <span>No Tag</span>\r\n            </div>\r\n          ),\r\n        },\r\n        ...Object.values(allTags).map((t) => ({\r\n          key: t.uid,\r\n          label: (\r\n            <div className=\"tag-select\">\r\n              <TagCircle color={t.color} />\r\n              <span>{t.name}</span>\r\n            </div>\r\n          ),\r\n        })),\r\n      ]}\r\n    />\r\n  );\r\n\r\n  const tagButton = (\r\n    <Dropdown\r\n      disabled={disabled}\r\n      overlay={overlay}\r\n      trigger={[\"click\"]}\r\n      placement=\"bottom\"\r\n    >\r\n      <Button\r\n        shape=\"round\"\r\n        type=\"text\"\r\n        className=\"tag-btn\"\r\n        icon={<TagsOutlined />}\r\n        style={{ transition: \"none\" }}\r\n      >\r\n        Tag\r\n      </Button>\r\n    </Dropdown>\r\n  );\r\n\r\n  return (\r\n    <div className=\"head-tools\">\r\n      {editing ? (\r\n        <>\r\n          {tagButton}\r\n          {deleteButton}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Input\r\n            value={searchText}\r\n            onChange={(e) => setSearchText(e.target.value)}\r\n            className=\"search-input\"\r\n            prefix={<SearchOutlined />}\r\n            bordered={false}\r\n            allowClear\r\n          />\r\n          {sortButton}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst NoteItem: FC<{\r\n  noteInfo: NoteInfo;\r\n  onClick: MouseEventHandler<HTMLDivElement>;\r\n  selected: boolean;\r\n}> = ({ noteInfo, onClick, selected }) => {\r\n  const { team, uid, name, thumbnail, lastTime } = noteInfo;\r\n\r\n  const { editing } = useContext(MenuStateCtx);\r\n  const { setAllNotes } = useContext(MenuMethodCtx);\r\n  const [noteName, setNoteName] = useState(name);\r\n\r\n  const saveNoteName = () => {\r\n    const newName = noteName.trim();\r\n    if (!newName || newName === name) return setNoteName(name);\r\n    editNoteData(uid, { name: newName });\r\n    setAllNotes((prev) => ({\r\n      ...prev,\r\n      [uid]: { ...prev[uid], name: newName },\r\n    }));\r\n  };\r\n\r\n  const date = useMemo(() => moment(lastTime).calendar(), [lastTime]);\r\n\r\n  return (\r\n    <div className={classNames(\"note-item\", { selected })} onClick={onClick}>\r\n      <div className=\"timg-wrapper\">\r\n        <img src={thumbnail || dafaultImg} alt={name} className=\"timg\" />\r\n        {team && (\r\n          <Tag color=\"blue\" className=\"cloud-icon\">\r\n            <CloudOutlined />\r\n          </Tag>\r\n        )}\r\n      </div>\r\n      <div className=\"content\">\r\n        {editing || <p className=\"name\">{name}</p>}\r\n        {editing && (\r\n          <Input\r\n            className=\"name-input\"\r\n            value={noteName}\r\n            onChange={(e) => setNoteName(e.target.value)}\r\n            onBlur={saveNoteName}\r\n          />\r\n        )}\r\n        <p className=\"date\">{date}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, {\r\n  createContext,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from \"react\";\r\nimport {\r\n  createNewNote,\r\n  getAllNotes,\r\n  getAllTags,\r\n  NoteTag,\r\n} from \"../../lib/note/archive\";\r\nimport { createEmptyNote, NoteInfo } from \"../../lib/note/note\";\r\nimport { FormOutlined } from \"@ant-design/icons\";\r\nimport { Setter } from \"../../lib/hooks\";\r\nimport RightTools from \"./RightTools\";\r\nimport LeftTools from \"./LeftTools\";\r\nimport SideMenu from \"./SideMenu\";\r\nimport NoteList from \"./NoteList\";\r\nimport { List } from \"immutable\";\r\nimport { Button } from \"antd\";\r\nimport \"./menu.sass\";\r\n\r\nexport const MenuStateCtx = createContext({\r\n  tagUid: \"DEFAULT\",\r\n  editing: false,\r\n  allNotes: {} as Record<string, NoteInfo>,\r\n  allTags: {} as Record<string, NoteTag>,\r\n});\r\n\r\nexport const MenuMethodCtx = createContext({\r\n  setAllNotes: (() => {}) as Setter<Record<string, NoteInfo>>,\r\n  setAllTags: (() => {}) as Setter<Record<string, NoteTag>>,\r\n  setTagUid: (() => {}) as Setter<string>,\r\n  setEditing: (() => {}) as Setter<boolean>,\r\n  menuInit: () => {},\r\n});\r\n\r\nexport default function MainMenu() {\r\n  const [allNotes, setAllNotes] = useState<Record<string, NoteInfo>>({});\r\n  const [allTags, setAllTags] = useState<Record<string, NoteTag>>({});\r\n  const [tagUid, setTagUid] = useState(\"DEFAULT\");\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  const selectedTag = useMemo(\r\n    () =>\r\n      tagUid === \"DEFAULT\"\r\n        ? {\r\n            uid: \"\",\r\n            name: \"All Notes\",\r\n            color: \"#000000\",\r\n            notes: Object.keys(allNotes),\r\n          }\r\n        : allTags[tagUid],\r\n    [allNotes, allTags, tagUid]\r\n  );\r\n\r\n  const noteList = useMemo(\r\n    () =>\r\n      List(\r\n        selectedTag.notes\r\n          .filter((uid) => uid in allNotes)\r\n          .map((uid) => allNotes[uid])\r\n      ),\r\n    [selectedTag, allNotes]\r\n  );\r\n\r\n  const menuInit = () => {\r\n    getAllNotes().then(setAllNotes);\r\n    getAllTags().then(setAllTags);\r\n    document.title = \"Multibility\";\r\n  };\r\n  useEffect(menuInit, []);\r\n\r\n  return (\r\n    <MenuStateCtx.Provider value={{ tagUid, editing, allNotes, allTags }}>\r\n      <MenuMethodCtx.Provider\r\n        value={{ setAllNotes, setAllTags, setEditing, setTagUid, menuInit }}\r\n      >\r\n        <div className=\"main-menu container\">\r\n          <header>\r\n            <LeftTools />\r\n            <h2>{selectedTag.name}</h2>\r\n            <RightTools />\r\n          </header>\r\n          <main>\r\n            <SideMenu />\r\n            <NoteList noteList={noteList} />\r\n            <NewNoteButton />\r\n          </main>\r\n        </div>\r\n      </MenuMethodCtx.Provider>\r\n    </MenuStateCtx.Provider>\r\n  );\r\n}\r\n\r\nexport const NewNoteButton = () => {\r\n  const { tagUid } = useContext(MenuStateCtx);\r\n  const { setAllTags, setAllNotes } = useContext(MenuMethodCtx);\r\n\r\n  async function addNewNote() {\r\n    const note = createEmptyNote();\r\n    note.tagID = tagUid;\r\n    const { tags, allNotes } = await createNewNote(note);\r\n    setAllTags(tags);\r\n    setAllNotes(allNotes);\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      className=\"new-note\"\r\n      size=\"large\"\r\n      type=\"primary\"\r\n      shape=\"circle\"\r\n      onClick={addNewNote}\r\n      icon={<FormOutlined />}\r\n    />\r\n  );\r\n};\r\n"],"names":["DigitInput","value","digitNum","onChange","onSubmit","num2digits","num","Array","fill","String","slice","padEnd","split","map","s","useState","nowFocused","setNowFocused","digits","setDigits","focus","inputRefs","current","forEach","el","blur","useEffect","newDigits","idx","findIndex","d","newValue","Number","join","useRef","handleKeyUp","e","key","Math","max","prev","className","ref","pattern","val","test","handleChange","target","onKeyUp","onClick","OthersStateCtx","createContext","setActive","RightTools","JoinTeamButton","OthersButton","OthersMenu","useContext","items","icon","FilePdfOutlined","label","UserOutlined","SettingOutlined","SeconaryMenu","children","title","type","shape","ArrowLeftOutlined","Title","level","UploadPdfPage","loading","setLoading","tagUid","MenuStateCtx","MenuMethodCtx","setAllTags","setAllNotes","percent","setPercent","file","LoadPDF","note","tagID","createNewNote","tags","allNotes","message","Dragger","disabled","multiple","action","accept","beforeUpload","width","InboxOutlined","ProfilePage","userName","getUserName","name","setName","prefix","allowClear","saveUserName","block","SettingsPage","menuInit","clearAll","localforage","onConfirm","ClearOutlined","okText","okType","okButtonProps","cancelText","placement","danger","OthersPage","height","setHeight","active","cssProps","timeout","onEnter","clientHeight","unmountOnExit","cssProps2","classNames","Provider","style","CSSTransition","in","btnProps","CaretDownOutlined","trigger","content","zIndex","roomCode","setRoomCode","animated","setAnimated","nav","useNavigate","code","getNoteID","noteID","setTimeout","destroyTooltipOnHide","undefined","TeamOutlined","nowSwiped","setNowSwiped","uid","onDelete","disable","deleted","setDeleted","swiped","setSwiped","button","deleting","swipeHandler","useSwipeable","onSwipedLeft","onSwipedRight","preventDefaultTouchmoveEvent","trackTouch","onClickCapture","stopPropagation","DeleteOutlined","TagCircle","backgroundColor","color","TagItem","noteTag","removeTag","notes","editing","tagEditing","setTagEditing","tagName","setTagName","tagColor","setTagColor","finishEditing","newTag","editTag","newAllTags","colorSelector","onSelect","colors","c","TagNameInput","addonBefore","curr","length","size","AddTag","popShow","setPopShow","addTag","trim","addNewTag","AddTagInput","Search","placeholder","onSearch","enterButton","PlusOutlined","visible","onVisibleChange","TagOutlined","SideMenu","allTags","setTagUid","setEditing","deleteTag","selectTag","allNoteTag","ProfileOutlined","Object","keys","editButton","values","tag","removeOneTag","LeftTools","asideOn","setAsideOn","AsideButton","MenuOutlined","closable","onClose","contentWrapperStyle","boxShadow","bodyStyle","padding","overflow","destroyOnClose","NoteList","noteList","sortType","setSortType","searchText","setSearchText","Set","selectedNotes","setSelectNotes","removeNotes","uids","deleteNote","res","moveNotes","noteIDs","moveNoteTag","sortedList","useMemo","sortBy","n","createTime","lastTime","toUpperCase","filterdList","filter","toLowerCase","includes","HeadTools","toArray","onMove","noteInfo","team","href","NoteItem","HTMLInputElement","has","delete","add","selected","sortMenu","selectedKeys","ClockCircleOutlined","EditOutlined","SortAscendingOutlined","sortButton","overlay","SwapOutlined","rotate","deleteButton","CloseOutlined","t","tagButton","TagsOutlined","transition","SearchOutlined","bordered","thumbnail","noteName","setNoteName","date","moment","calendar","src","dafaultImg","alt","CloudOutlined","onBlur","newName","editNoteData","MainMenu","selectedTag","List","getAllNotes","then","getAllTags","document","NewNoteButton","createEmptyNote","FormOutlined"],"sourceRoot":""}