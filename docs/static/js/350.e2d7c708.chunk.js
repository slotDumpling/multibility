(self.webpackChunkmultibility=self.webpackChunkmultibility||[]).push([[350],{18406:function(e,t,n){"use strict";n.r(t),n.d(t,{PageWrapper:function(){return $e},ReaderMethodCtx:function(){return Ge},ReaderStateCtx:function(){return Ye},WIDTH:function(){return qe},default:function(){return Qe}});var r=n(93433),a=n(4942),i=n(1413),u=n(45987),o=n(15861),s=n(29439),c=n(87757),l=n.n(c),d=n(72791),f=n(61842),v=n.n(f),p={finger:!1,lineWidth:10,eraserWidth:10,color:"#000000",highlight:!1};function g(){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v().getItem("DRAW_CTRL");case 2:if(t=e.sent){e.next=7;break}return t=p,e.next=7,v().setItem("DRAW_CTRL",t);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v().setItem("DRAW_CTRL",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=n(92198),Z=n(75783),j=n(51570),S=n(16871),k=n(58105),y=n(97725),w=n(82670),C=n(15671),b=n(43144),P=n(24124),D={states:(0,P.D5)(),editStack:(0,P.aV)(),undoStack:(0,P.aV)()},I=(0,P.WV)(D),O=function(){function e(t,n){(0,C.Z)(this,e),this.immutable=t,this.lastOp=n}return(0,b.Z)(e,[{key:"getImmutable",value:function(){return this.immutable}},{key:"getStates",value:function(){return this.getImmutable().get("states")}},{key:"getOneState",value:function(e){return this.getStates().get(e)}},{key:"getEditStack",value:function(){return this.getImmutable().get("editStack")}},{key:"getUndoStack",value:function(){return this.getImmutable().get("undoStack")}},{key:"setState",value:function(t,n){var r=this.getOneState(t);if(!r||r===n)return this;var a=this.getImmutable().update("states",(function(e){return e.set(t,n)})).update("editStack",(function(e){return e.push(t)})).delete("undoStack"),u=n.lastOp;return new e(a,u&&(0,i.Z)((0,i.Z)({},u),{},{pageID:t}))}},{key:"addState",value:function(t,n,r){var a=n.state,i=n.ratio,u=w.D.loadFromFlat(a,r,r*i);return new e(this.getImmutable().update("states",(function(e){return e.set(t,u)})))}},{key:"deleteState",value:function(t){return new e(this.getImmutable().update("states",(function(e){return e.delete(t)})))}},{key:"isUndoable",value:function(){return this.getEditStack().size>0}},{key:"isRedoable",value:function(){return this.getUndoStack().size>0}},{key:"undo",value:function(){if(!this.isUndoable())return this;var t=this.getEditStack().last(),n=t&&this.getOneState(t);if(!n)return this;var r=w.D.undo(n),a=r.lastOp,u=a&&(0,i.Z)({pageID:t},a);return new e(this.getImmutable().update("editStack",(function(e){return e.pop()})).update("undoStack",(function(e){return e.push(t)})).update("states",(function(e){return e.set(t,r)})),u)}},{key:"redo",value:function(){if(!this.isRedoable())return this;var t=this.getUndoStack().last(),n=t&&this.getOneState(t);if(!n)return this;var r=w.D.redo(n),a=r.lastOp,u=a&&(0,i.Z)({pageID:t},a);return new e(this.getImmutable().update("undoStack",(function(e){return e.pop()})).update("editStack",(function(e){return e.push(t)})).update("states",(function(e){return e.set(t,r)})),u)}},{key:"getLastDS",value:function(){var e,t=null===(e=this.lastOp)||void 0===e?void 0:e.pageID,n=t&&this.getOneState(t);return n?[t,n]:void 0}}],[{key:"createFromList",value:function(t){return new e(I().set("states",(0,P.D5)(t)))}},{key:"createFromPages",value:function(t,n){var r=Object.entries(t);return e.createFromList(r.map((function(e){var t=(0,s.Z)(e,2),r=t[0],a=t[1],i=a.state,u=a.ratio;return[r,w.D.loadFromFlat(i,n,n*u)]})))}}]),e}(),N=n(763);function R(e,t,n){var r=e.indexOf(t),a=e.slice();return-1===r||a.splice(r+1,0,n),a}var E=n(87309),T=n(79286),M=n(81694),A=n.n(M),W=n(80184),L=function(){var e=(0,d.useContext)(Ge).addFinalPage,t=(0,d.useContext)(Ye).pageOrder,n=Boolean(t&&!t.length);return(0,W.jsx)("div",{className:A()("add-btn-wrapper",{empty:n}),children:(0,W.jsx)(E.Z,{type:"dashed",icon:(0,W.jsx)(T.Z,{}),block:!0,onClick:e,children:"Add page"})})};var F=n(49496),U=n(69228),z=n(96272),V=n(76586),K=n(47528),B=n(90785),H=n(91333),J=n(75594),_=n(4240),q=n(95055),Y=n(91511);function G(e){var t=e.value,n=(0,d.useState)(9999),r=(0,s.Z)(n,2),a=r[0],i=r[1],u=String(t>=0?t:a).padStart(4,"0").split("").map((function(e){return Number(e)}));function o(){i(Math.floor(1e4*Math.random()))}return(0,d.useEffect)((function(){if(-1!==t)return i(9999);var e=setTimeout(o,100);return function(){return clearTimeout(e)}}),[t]),(0,W.jsx)("div",{className:A()("digit-display",{disabled:-2===t}),children:u.map((function(e,t){return(0,W.jsx)(Q,{digit:e},t)}))})}function Q(e){var t=e.digit;return t<=9&&t>=0?(0,W.jsx)("div",{className:"digit",children:t}):(0,W.jsx)("div",{className:"digit",children:"*"})}var X=n(74115),$=n(69951),ee=n(61176),te=n(87661),ne=n(67629),re=n(23414),ae=n(82622),ie=n(10711),ue=n(75797),oe=n(53621),se=(0,n(92721).Z)({scriptUrl:"//at.alicdn.com/t/font_3181679_eb02zt96p4p.js"}),ce=n(29798),le=function(e){var t=e.activeKey,n=e.setActiveKey,r=(0,d.useContext)(Ye),a=r.pageOrder,u=r.inviewPages,o=(0,d.useContext)(Ge),c=o.setPageOrder,l=o.scrollPage,f=(0,d.useContext)(Y.TeamCtx).updateReorder,v=(0,d.useRef)({}),p=(0,d.useRef)(),g=(0,d.useMemo)((function(){return(null===a||void 0===a?void 0:a.find((function(e){return u.has(e)})))||""}),[a,u]);return(0,d.useEffect)((function(){var e,t,n,r;null===(e=v.current[g])||void 0===e||e.scrollIntoView();var a=(null===(t=v.current[g])||void 0===t?void 0:t.clientHeight)||0,i=(null===(n=p.current)||void 0===n?void 0:n.clientHeight)||0;null===(r=p.current)||void 0===r||r.scrollBy(0,-i/2+a/2)}),[]),(0,W.jsxs)("div",{className:"preview-container",children:[(0,W.jsx)(ve,{activeKey:t,setActiveKey:n}),(0,W.jsx)(ce.Z5,{onDragEnd:function(e){var t=e.source,n=e.destination;if(n&&a){var r=t.index,i=n.index,u=a[r];c((function(e){if(e){var t=function(e,t,n){var r=e.slice(),a=r.splice(t,1),i=(0,s.Z)(a,1)[0];return r.splice(n,0,i),r}(e,r,i);return f&&f(t),t}})),requestAnimationFrame((function(){return l(u)}))}},children:(0,W.jsx)(ce.bK,{droppableId:"droppable",children:function(e){var n=e.droppableProps,r=e.innerRef,u=e.placeholder;return(0,W.jsxs)("div",(0,i.Z)((0,i.Z)({className:"page-list",ref:function(e){r(e),e&&(p.current=e)}},n),{},{children:[null===a||void 0===a?void 0:a.map((function(e,n){return(0,W.jsx)(de,{uid:e,mode:t,pageIndex:n,currpageID:g,refRec:v.current},e)})),u,"ALL"===t&&(0,W.jsx)(L,{})]}))}})})]})},de=function(e){var t=e.uid,n=e.pageIndex,r=e.mode,a=e.currpageID,u=e.refRec,o=(0,d.useContext)(Ye),s=o.stateSet,c=o.teamState,l=o.pageRec,f=(0,d.useContext)(Ge),v=f.scrollPage,p=f.switchPageMarked,g=l&&l[t],m=null===s||void 0===s?void 0:s.getOneState(t),h=null===c||void 0===c?void 0:c.getOnePageState(t);if(!g||!m)return null;if("WRITTEN"===r&&m.isEmpty()&&(!h||h.every((function(e){return e.isEmpty()}))))return null;if("MARKED"===r&&!g.marked)return null;var x=function(e){p(t),e.stopPropagation()},Z=a===t,j="ALL"!==r;return(0,W.jsx)(ce._l,{draggableId:t,index:n,isDragDisabled:j,children:function(e,r){var a=e.innerRef,o=e.draggableProps,s=e.dragHandleProps,c=r.isDragging,l=g.image,d=g.marked;return(0,W.jsxs)("div",(0,i.Z)((0,i.Z)((0,i.Z)({ref:function(e){a(e),e&&(u[t]=e)},className:A()("page",{curr:Z,drag:c}),onClick:function(){return v(t)}},o),s),{},{children:[(0,W.jsx)($e,{uid:t,drawState:m,teamStateMap:h,thumbnail:l,preview:!0}),(0,W.jsx)("span",{className:A()("bookmark",{marked:d}),onClickCapture:x}),(0,W.jsx)("span",{className:"index",children:n+1}),(0,W.jsx)(fe,{uid:t})]}))}})},fe=function(e){var t=e.uid,n=(0,d.useState)(!1),r=(0,s.Z)(n,2),a=r[0],i=r[1],u=(0,d.useContext)(Ge),o=u.addPage,c=u.deletePage,l=(0,d.useContext)(Ye).teamOn,f=ee.Z.Item,v=(0,W.jsxs)(ee.Z,{onClick:function(e){var n=e.key,r=e.domEvent;"ADD"===n?o(t):"COPY"===n?o(t,!0):"DELETE"===n&&c(t),r.stopPropagation(),i(!1)},children:[(0,W.jsx)(f,{icon:(0,W.jsx)(T.Z,{}),children:"Add page"},"ADD"),(0,W.jsx)(f,{icon:(0,W.jsx)(re.Z,{}),children:"Duplicate"},"COPY"),(0,W.jsx)(f,{danger:!0,icon:(0,W.jsx)(ae.Z,{}),disabled:l,children:"Delete"},"DELETE")]});return(0,W.jsx)(U.Z,{content:v,trigger:"click",placement:"left",visible:a,onVisibleChange:i,destroyTooltipOnHide:!0,children:(0,W.jsx)("span",{className:"option",onClickCapture:function(e){i((function(e){return!e})),e.stopPropagation()},children:(0,W.jsx)(ie.Z,{})})})},ve=function(e){var t=e.activeKey,n=e.setActiveKey,r=te.Z.TabPane;return(0,W.jsxs)(te.Z,{className:"tabs",activeKey:t,onChange:n,tabBarGutter:10,size:"small",centered:!0,children:[(0,W.jsx)(r,{tab:(0,W.jsx)(se,{type:"icon-uf_paper"})},"ALL"),(0,W.jsx)(r,{tab:(0,W.jsx)(se,{type:"icon-bookmark2"})},"MARKED"),(0,W.jsx)(r,{tab:(0,W.jsx)(se,{type:"icon-write"})},"WRITTEN")]})};function pe(){var e=(0,d.useState)(!1),t=(0,s.Z)(e,2),n=t[0],r=t[1],a=(0,d.useState)("ALL"),i=(0,s.Z)(a,2),u=i[0],o=i[1],c={ALL:"All Pages",MARKED:"Bookmarks",WRITTEN:"Notes"}[u];return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(E.Z,{type:"text",icon:(0,W.jsx)(ue.Z,{}),onClick:function(){return r((function(e){return!e}))}}),(0,W.jsx)(ne.Z,{visible:n,onClose:function(){return r(!1)},width:200,title:c,closeIcon:(0,W.jsx)(oe.Z,{}),bodyStyle:{padding:0,overflow:"hidden"},destroyOnClose:!0,children:(0,W.jsx)(le,{activeKey:u,setActiveKey:o})})]})}var ge=n(56540),me=n(52242),he=n(65323),xe=n(78030),Ze=n(50446),je=n(14988),Se=n(62),ke=n(46781),ye=n(79784),we=n(98272),Ce=n(24215),be=n(17973),Pe=n(23605),De=n(56200),Ie=n(18301);function Oe(e){var t=e.handleUndo,n=e.handleRedo,r=e.instantSave,a=(0,d.useContext)(Ye),u=a.saved,o=a.stateSet,s=a.teamOn,c=a.mode,l=a.drawCtrl,f=(0,d.useContext)(Ge),v=f.setDrawCtrl,p=f.setMode,g=l.finger,m=(0,S.s0)(),h=function(e){v((function(t){return(0,i.Z)((0,i.Z)({},t),e)}))};return(0,d.useEffect)((function(){if("selected"===c)return F.ZP.info({className:"select-message",icon:(0,W.jsx)(ge.Z,{style:{display:"none"}}),content:(0,W.jsx)(Me,{setMode:p}),duration:0,key:"selected"}),function(){return F.ZP.destroy("selected")}}),[c]),(0,W.jsxs)("header",{children:[(0,W.jsxs)("div",{className:"left",children:[(0,W.jsx)(E.Z,{type:"text",onClick:function(){return m("/")},icon:(0,W.jsx)(me.Z,{style:{opacity:.8}})}),(0,W.jsx)("br",{}),(0,W.jsx)(E.Z,{type:"text",className:"save",onClick:r,disabled:u,icon:(0,W.jsx)(he.Z,{})})]}),(0,W.jsxs)("div",{className:"middle",children:[(0,W.jsx)(E.Z,{type:"text",shape:"circle",icon:(0,W.jsx)(xe.Z,{}),onClick:t,disabled:!(null!==o&&void 0!==o&&o.isUndoable())}),(0,W.jsx)(E.Z,{className:"redo",type:"text",shape:"circle",icon:(0,W.jsx)(Ze.Z,{}),onClick:n,disabled:!(null!==o&&void 0!==o&&o.isRedoable())}),(0,W.jsx)("br",{}),(0,W.jsx)(Ne,{updateDrawCtrl:h}),(0,W.jsx)(Te,{updateDrawCtrl:h}),(0,W.jsx)(E.Z,{type:["select","selected"].includes(c)?"default":"text",shape:"circle",onClick:function(){return p("select")},icon:(0,W.jsx)(je.Z,{})}),(0,W.jsx)(E.Z,{className:"finger",type:g?"primary":"text",ghost:g,shape:"circle",onClick:function(){return h({finger:!g})},icon:(0,W.jsx)(se,{type:"icon-finger"})})]}),(0,W.jsxs)("div",{className:"right",children:[s&&(0,W.jsx)(We,{}),s||(0,W.jsx)(Le,{}),(0,W.jsx)("br",{}),(0,W.jsx)(pe,{})]})]})}var Ne=function(e){var t=e.updateDrawCtrl,n=(0,d.useContext)(Ye).mode,r=(0,d.useContext)(Ge).setMode;return"draw"===n?(0,W.jsx)(U.Z,{content:(0,W.jsx)(Re,{updateDrawCtrl:t}),trigger:"click",placement:"bottom",getPopupContainer:function(e){return e},destroyTooltipOnHide:!0,children:(0,W.jsx)(E.Z,{type:"default",shape:"circle",icon:(0,W.jsx)(Se.Z,{})})}):(0,W.jsx)(E.Z,{type:"text",shape:"circle",onClick:function(){return r("draw")},icon:(0,W.jsx)(Se.Z,{})})},Re=function(e){var t=e.updateDrawCtrl,n=(0,d.useContext)(Ye).drawCtrl,r=n.lineWidth,a=n.highlight,i=(0,d.useState)(r),u=(0,s.Z)(i,2),o=u[0],c=u[1];return(0,W.jsxs)("div",{className:"pen-panel",children:[(0,W.jsxs)("div",{className:"pen-status",children:[(0,W.jsx)(z.Z,{min:5,max:100,value:o,onChange:c,onAfterChange:function(e){return t({lineWidth:e})}}),(0,W.jsx)(E.Z,{type:a?"primary":"text",ghost:a,shape:"circle",icon:(0,W.jsx)(se,{type:"icon-Highlight"}),onClick:function(){return t({highlight:!a})}})]}),(0,W.jsx)(Ee,{updateDrawCtrl:t})]})},Ee=function(e){var t=e.updateDrawCtrl,n=(0,d.useContext)(Ye).drawCtrl.color;return(0,W.jsx)("div",{className:"color-select",children:X.O9.map((function(e){return(0,W.jsxs)("label",{children:[(0,W.jsx)("input",{checked:n===e,type:"radio",name:"color",onChange:function(){return t({color:e})}}),(0,W.jsx)("div",{className:"circle",style:{"--circle-color":e}})]},e)}))})},Te=function(e){var t=e.updateDrawCtrl,n=(0,d.useContext)(Ge).setMode,r=(0,d.useContext)(Ye),a=r.mode,i=r.drawCtrl.eraserWidth,u=(0,d.useState)(i),o=(0,s.Z)(u,2),c=o[0],l=o[1],f=(0,W.jsx)("div",{className:"pen-panel",children:(0,W.jsx)(z.Z,{min:5,max:100,value:c,onChange:l,onAfterChange:function(e){return t({eraserWidth:e})}})});return"erase"===a?(0,W.jsx)(U.Z,{content:f,trigger:"click",placement:"bottom",getPopupContainer:function(e){return e},destroyTooltipOnHide:!0,children:(0,W.jsx)(E.Z,{type:"default",shape:"circle",icon:(0,W.jsx)(se,{type:"icon-eraser"})})}):(0,W.jsx)(E.Z,{type:"text",shape:"circle",onClick:function(){return n("erase")},icon:(0,W.jsx)(se,{type:"icon-eraser"})})},Me=function(e){var t=e.setMode,n={type:"text",shape:"round"};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(E.Z,(0,i.Z)({icon:(0,W.jsx)(ke.Z,{})},n)),(0,W.jsx)(E.Z,(0,i.Z)({icon:(0,W.jsx)(ye.Z,{})},n)),(0,W.jsx)(E.Z,(0,i.Z)({danger:!0,icon:(0,W.jsx)(ae.Z,{}),onClick:function(){return t("delete")}},n))]})},Ae=function(e){var t=e.userInfo,n=t.userName,r=t.userID,a=(0,d.useContext)(Y.TeamCtx),i=a.ignores,u=a.setIgnores,o=(0,d.useMemo)((function(){return(0,X.bM)(r)}),[r]),s=r===(0,$.VN)(),c=i.has(r)&&!s;return(0,W.jsxs)("div",{className:"user-item",children:[(0,W.jsx)(V.C,{className:"avatar",size:"small",style:{backgroundColor:o},children:n.slice(0,4)}),(0,W.jsx)("span",{className:"user-name",children:n}),s?(0,W.jsx)(K.Z,{className:"me-tag",children:"Me"}):(0,W.jsx)(E.Z,{disabled:s,type:"text",icon:c?(0,W.jsx)(we.Z,{}):(0,W.jsx)(Ce.Z,{}),onClick:function(){u((function(e){return e.has(r)?e.delete(r):e.add(r)}))}})]})};function We(){var e=(0,d.useContext)(Y.TeamCtx),t=e.code,n=e.userList,r=e.loadInfo,a=e.connected,i=window.location.href,u=(0,W.jsxs)("div",{className:"team-popover",children:[a||(0,W.jsx)(B.Z,{className:"disconn-alert",message:"Network failed.",icon:(0,W.jsx)(be.Z,{}),type:"error",showIcon:!0,banner:!0}),(0,W.jsx)(G,{value:t}),(0,W.jsx)(q.Z,{className:"copy-link code-font",value:i,enterButton:(0,W.jsx)(E.Z,{icon:(0,W.jsx)(re.Z,{})}),onSearch:function(){navigator.clipboard.writeText(i),F.ZP.destroy("copy"),F.ZP.success({content:"Share link copied!",icon:(0,W.jsx)(re.Z,{}),key:"copy"})}}),(0,W.jsx)(H.Z,{}),(0,W.jsx)("div",{className:"user-list",children:n.map((function(e){return(0,W.jsx)(Ae,{userInfo:e},e.userID)}))})]}),o=(0,W.jsxs)("div",{className:"team-title",children:[(0,W.jsx)("span",{children:"Team info"}),(0,W.jsx)(E.Z,{shape:"circle",type:"text",size:"small",icon:(0,W.jsx)(Pe.Z,{}),onClick:r})]});return(0,W.jsx)(U.Z,{content:u,trigger:"click",placement:"bottomRight",title:o,defaultVisible:!0,getPopupContainer:function(e){return e},children:(0,W.jsx)(E.Z,{type:"text",icon:(0,W.jsx)(J.Z,{status:a?"success":"error",count:a?n.length:"!",size:"small",children:(0,W.jsx)(De.Z,{})})})})}var Le=function(){var e=(0,d.useContext)(Ge).createRoom;return(0,W.jsx)(_.Z,{placement:"bottomRight",title:"Enable team editing?",onConfirm:e,okText:"Yes",cancelText:"No",children:(0,W.jsx)(E.Z,{type:"text",icon:(0,W.jsx)(Ie.Z,{})})})},Fe=n(64309);var Ue=n(12262),ze=n.n(Ue),Ve=function(e){var t=e.drawState,n=e.onChange,r=void 0===n?function(){}:n,a=e.otherStates,i=e.drawCtrl,u=void 0===i?p:i,o=e.mode,c=void 0===o?"draw":o,l=e.setMode,f=void 0===l?function(){}:l,v=e.readonly,g=void 0!==v&&v,m=e.preview,h=void 0!==m&&m,x=e.imgSrc,Z=t.width,j=t.height,S=(0,d.useRef)(null),k=(0,d.useRef)(new(ze().PaperScope)),y=(0,d.useRef)(),C=(0,d.useRef)(1),b=(0,d.useRef)(),D=(0,d.useState)(),I=(0,s.Z)(D,2),O=I[0],N=I[1],R=(0,d.useRef)(),E=(0,d.useState)((0,P.l4)()),T=(0,s.Z)(E,2),M=T[0],A=T[1],L=u.color,F=u.finger,U=u.lineWidth,z=u.highlight,V=u.eraserWidth,K=function(){var e,t=null===(e=S.current)||void 0===e?void 0:e.clientWidth;t&&(C.current=Z/t)},B=function(e){K(),k.current.activate();var t=e.point.multiply(C.current),n=new(ze().Shape.Rectangle)(t,new(ze().Size)(0,0));n.strokeColor=new(ze().Color)("#1890ff"),n.strokeWidth=3,n.dashOffset=0,n.dashArray=[30,20],N(n)},H={draw:function(){K(),k.current.activate(),b.current=new k.current.Path;var e=new(ze().Color)(L);z&&(e.alpha/=2,b.current.blendMode="multiply"),b.current.strokeColor=e,b.current.strokeWidth=U,b.current.strokeJoin="round",b.current.strokeCap="round"},erase:function(){K(),k.current.activate(),b.current=new k.current.Path;var e=new(ze().Color)("#0003");b.current.strokeColor=e,b.current.strokeWidth=V,b.current.strokeJoin="round",b.current.strokeCap="round"},select:function(e){B(e)},selected:function(e){k.current.activate();var t=e.point.multiply(C.current);O&&(t.isInside(O.strokeBounds)||(B(e),f("select")))},delete:function(){}}[c],J={draw:function(e){if(b.current){k.current.activate();var t=e.point.multiply(C.current);b.current.add(t),b.current.smooth()}},erase:function(e){var t,n=b.current;if(n){k.current.activate();var r=e.point.multiply(C.current);n.add(r),n.smooth();var a=null===(t=y.current)||void 0===t?void 0:t.filter((function(e){return!M.has(e.name)})).filter((function(t){return Je(t,n,e,C.current,V)})).map((function(e){return e.name}));a&&A((function(e){return e.concat(a)}))}},select:function(e){if(O){k.current.activate();var t=e.delta.multiply(C.current);O.size=O.size.add(new(ze().Size)(t.x,t.y)),O.position=O.position.add(t.divide(2))}},selected:function(e){var t=R.current;if(O&&t){var n=e.delta.multiply(C.current);O.position=O.position.add(n),t.position=t.position.add(n)}},delete:function(){}}[c],_={erase:function(){b.current&&(k.current.activate(),b.current.remove(),r((function(e){return w.D.eraseStrokes(e,M.toArray())})),A((0,P.l4)()))},draw:function(){if(b.current&&0!==b.current.segments.length&&(b.current.simplify(),0!==b.current.segments.length)){var e=b.current.exportJSON();b.current.remove(),r((function(t){return w.D.addStroke(t,e)}))}},select:function(){var e;if(!O||O.size.width<10||O.size.height<10)return N(void 0);k.current.activate();var t=O.strokeBounds;R.current=new(ze().Group),null===(e=y.current)||void 0===e||e.forEach((function(e){var n;e instanceof ze().Path&&((e.isInside(t)||e.intersects(O))&&(null===(n=R.current)||void 0===n||n.addChild(e)))})),f("selected")},selected:function(){},delete:function(){}}[c];(0,d.useEffect)((function(){!function(){if(S.current){k.current.setup(S.current);var e=h?200/Z:1;k.current.view.viewSize.width=Z*e,k.current.view.viewSize.height=j*e,k.current.view.scale(e,new(ze().Point)(0,0))}}(),k.current.activate();var e=S.current;return function(){e&&(0,Fe.j)(e)}}),[]);(0,d.useEffect)((function(){g||(k.current.view.onMouseDown=H,k.current.view.onMouseDrag=J,k.current.view.onMouseUp=_)}));var q=function(e){(function(e){return F||function(e){var t=e.touches[0];return"stylus"===(null===t||void 0===t?void 0:t.touchType)}(e)})(e)||e.stopPropagation()};(0,d.useEffect)((function(){if(x){var e,t=new Image;return t.src=x,t.onload=function(){k.current.activate(),(e=new(ze().Raster)(t)).position=k.current.view.center;var n=Z/t.width;e.scale(n),e.sendToBack()},function(){var t;null===(t=e)||void 0===t||t.remove()}}}),[x]),(0,d.useEffect)((function(){return k.current.activate(),y.current=[],t.getValidStrokes().forEach((function(e){Be(e,y.current,M)})),function(){var e;return null===(e=y.current)||void 0===e?void 0:e.forEach((function(e){return e.remove()}))}}),[t,M]),(0,d.useEffect)((function(){k.current.activate();var e=[];return null===a||void 0===a||a.forEach((function(t){t.getValidStrokes().forEach((function(t){Be(t,e)}))})),function(){return e.forEach((function(e){return e.remove()}))}}),[a]);var Y=function(){var e,t=null===(e=R.current)||void 0===e?void 0:e.children;if(null!==t&&void 0!==t&&t.length){var n=t.map((function(e){return[e.name,e.exportJSON()]}));r((function(e){return w.D.mutateStroke(e,n)}))}};return(0,d.useEffect)((function(){if("select"===c);else{if("selected"===c)return null!==O&&void 0!==O&&O.strokeColor&&(O.strokeColor.alpha/=2),k.current.activate(),Y;"delete"===c?(!function(){var e,t=null===(e=R.current)||void 0===e?void 0:e.children;if(null!==t&&void 0!==t&&t.length){var n=t.map((function(e){return e.name}));r((function(e){return w.D.eraseStrokes(e,n)}))}}(),f("select"),N(void 0)):N(void 0)}}),[c]),(0,d.useEffect)((function(){if(O){var e=0;return function t(){e=requestAnimationFrame((function(){O.dashOffset+=3,t()}))}(),function(){O.remove(),cancelAnimationFrame(e)}}}),[O]),(0,W.jsx)("canvas",{ref:S,className:"draw-canvas","data-paper-hidpi":!1,onTouchStartCapture:q,onTouchMoveCapture:q})},Ke=d.memo(Ve),Be=function(e,t,n){var r=e.pathData,a=e.uid;try{var i=new(ze().Path);i.importJSON(r),i.name=a,null!==n&&void 0!==n&&n.has(a)&&(i.opacity/=2),null===t||void 0===t||t.push(i)}catch(u){console.error(u)}},He=function(){var e=new WeakMap;return function(t,n,r){var a=e.get(t);if(a)return a;for(var i=t.point.multiply(n),u=t.delta.multiply(n),o=u.length/r*2,s=[],c=0;c<o;c+=1)s.push(i.subtract(u.multiply(c/o)));return e.set(t,s),s}}(),Je=function(e,t,n,r,a){var i,u=null===(i=t.lastSegment.curve)||void 0===i?void 0:i.strokeBounds;return!!(e instanceof ze().Path&&null!==u&&void 0!==u&&u.intersects(e.strokeBounds))&&(!!t.intersects(e)||He(n,r,a).some((function(t){var n,r=null===(n=e.getNearestPoint(t))||void 0===n?void 0:n.getDistance(t);return r&&r<(e.strokeWidth+a)/2})))},_e=["pageRec","pdf","pageOrder"],qe=2e3,Ye=(0,d.createContext)({noteID:"",noteInfo:void 0,stateSet:void 0,teamState:void 0,pageRec:void 0,pageOrder:void 0,saved:!0,teamOn:!1,inviewPages:(0,P.l4)(),refRec:{},drawCtrl:p,mode:"draw"}),Ge=(0,d.createContext)({createRoom:function(){},scrollPage:function(){},setInviewPages:function(){},switchPageMarked:function(){},setPageOrder:function(){},setPageState:function(){},addPage:function(){},addFinalPage:function(){},deletePage:function(){},setMode:function(){},setDrawCtrl:function(){}});function Qe(e){var t,n=e.teamOn,c=null!==(t=(0,S.UO)().noteID)&&void 0!==t?t:"",f=(0,S.s0)(),v=(0,d.useState)(),m=(0,s.Z)(v,2),k=m[0],C=m[1],b=(0,d.useState)(),D=(0,s.Z)(b,2),I=D[0],E=D[1],T=(0,d.useState)(),M=(0,s.Z)(T,2),A=M[0],U=M[1],z=(0,d.useState)(p),V=(0,s.Z)(z,2),K=V[0],B=V[1],H=(0,d.useState)("draw"),J=(0,s.Z)(H,2),_=J[0],q=J[1],G=(0,d.useState)(!0),Q=(0,s.Z)(G,2),X=Q[0],$=Q[1],ee=(0,d.useState)((0,P.l4)()),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ae=(0,d.useState)(),ie=(0,s.Z)(ae,2),ue=ie[0],oe=ie[1],se=(0,d.useState)(!1),ce=(0,s.Z)(se,2),le=ce[0],de=ce[1],fe=(0,d.useRef)({}),ve=function(){var e=(0,d.useRef)(!1);return(0,d.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}(),pe=(0,d.useContext)(Y.TeamCtx),ge=pe.teamState,me=pe.pushOperation,he=pe.teamUpdate,xe=pe.updateNewPage,Ze=function(){var e=(0,o.Z)(l().mark((function e(){var t,r,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.U9)(c);case 2:if(t=e.sent){e.next=6;break}return F.ZP.error("Note not found"),e.abrupt("return",f("/"));case 6:return r=t.pageRec,t.pdf,a=t.pageOrder,i=(0,u.Z)(t,_e),C(r),oe(a),E(i),U(O.createFromPages(r,qe)),e.t0=B,e.next=14,g();case 14:e.t1=e.sent,(0,e.t0)(e.t1),de(!0),n&&(0,j.f1)(c);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=(0,d.useCallback)((0,N.debounce)(function(){var e=(0,o.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.SP)(c,{pageRec:t});case 2:n=document.querySelector("canvas"),(r=null===n||void 0===n?void 0:n.toDataURL())&&(0,Z.SP)(c,{thumbnail:r}),ve.current&&$(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),5e3),[]),Se=je.flush,ke=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:return e.next=4,(0,j.r8)(c);case 4:if(e.sent){e.next=8;break}return F.ZP.error("Can't create room."),e.abrupt("return");case 8:return e.next=10,(0,Z.SP)(c,{team:!0});case 10:f("/team/"+c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){Se()};(0,d.useLayoutEffect)((function(){return Ze(),ye}),[c,n]),(0,y.x)(ye),(0,d.useEffect)((function(){I&&(document.title=I.name+" - Multibility")}),[I]),(0,d.useEffect)((function(){le&&function(e){h.apply(this,arguments)}(K)}),[K]),(0,d.useEffect)((function(){null!==A&&void 0!==A&&A.lastOp&&me&&me(A.lastOp)}),[A]),(0,d.useEffect)((function(){k&&le&&(je(k),$(!1))}),[k]),(0,d.useEffect)((function(){var e=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue&&le){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,Z.SP)(c,{pageOrder:ue});case 4:return e.next=6,Se();case 6:t=null===he||void 0===he?void 0:he.pageOrder,n&&JSON.stringify(ue)!==JSON.stringify(t)&&(0,j.f1)(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[ue]),(0,d.useEffect)((function(){if(he){var e=he.type,t=he.pageOrder;if("reorder"===e)oe(t);else if("newPage"===e){oe(t);var n=he.pageID,r=he.newPage;C((function(e){return e&&(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},n,r))})),U((function(e){return null===e||void 0===e?void 0:e.addState(n,r,qe)}))}}}),[he]);var we=function(e,t){var n=w.D.flaten(t);C((function(t){return t&&(0,i.Z)((0,i.Z)({},t),{},(0,a.Z)({},e,(0,i.Z)((0,i.Z)({},t[e]),{},{state:n})))}))},Ce=(0,d.useCallback)((function(e,t){U((function(n){return null===n||void 0===n?void 0:n.setState(e,t)})),we(e,t)}),[]),be=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?k&&k[e]:void 0,r=(0,x.D4)(n),u=(0,s.Z)(r,2),o=u[0],c=u[1];oe((function(t){if(t){var n=R(t,e,o);return xe&&xe(n,o,c),n}})),C((function(e){return e&&(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},o,c))})),U((function(e){return null===e||void 0===e?void 0:e.addState(o,c,qe)}))},Pe=(0,W.jsxs)("div",{className:"reader container",children:[(0,W.jsx)(Oe,{instantSave:Se,handleUndo:function(){U((function(e){if(e){var t=e.undo(),n=t.getLastDS();return n&&we.apply(void 0,(0,r.Z)(n)),t}}))},handleRedo:function(){U((function(e){if(e){var t=e.redo(),n=t.getLastDS();return n&&we.apply(void 0,(0,r.Z)(n)),t}}))}}),(0,W.jsxs)("main",{children:[null===ue||void 0===ue?void 0:ue.map((function(e){return(0,W.jsx)(Xe,{uid:e},e)})),(0,W.jsx)(L,{})]})]});return(0,W.jsx)(Ye.Provider,{value:{noteID:c,noteInfo:I,stateSet:A,teamState:ge,saved:X,teamOn:n,pageRec:k,pageOrder:ue,inviewPages:ne,refRec:fe.current,mode:_,drawCtrl:K},children:(0,W.jsx)(Ge.Provider,{value:{createRoom:ke,scrollPage:function(e){var t;null===(t=fe.current[e])||void 0===t||t.scrollIntoView()},setInviewPages:re,switchPageMarked:function(e){var t=k&&k[e];if(t){var n=!Boolean(t.marked);C((function(t){return t&&(0,i.Z)((0,i.Z)({},t),{},(0,a.Z)({},e,(0,i.Z)((0,i.Z)({},t[e]),{},{marked:n})))}))}},setPageOrder:oe,setPageState:Ce,addPage:be,addFinalPage:function(){var e=(0,N.last)(ue);e&&be(e)},deletePage:function(e){n?F.ZP.error("You can't delete pages from a team note."):(oe((function(t){return null===t||void 0===t?void 0:t.filter((function(t){return t!==e}))})),C((function(t){return t&&(0,N.omit)(t,e)})),U((function(t){return null===t||void 0===t?void 0:t.deleteState(e)})))},setMode:q,setDrawCtrl:B},children:Pe})})}var Xe=function(e){var t=e.uid,n=(0,d.useContext)(Ye),r=n.pageRec,a=n.stateSet,i=n.teamState,u=(0,d.useContext)(Ge).setPageState,o=r&&r[t],s=null===a||void 0===a?void 0:a.getOneState(t),c=null===i||void 0===i?void 0:i.getOnePageState(t),l=(0,d.useCallback)((function(e){return u(t,e)}),[t,u]);return o&&s?(0,W.jsx)($e,{drawState:s,teamStateMap:c,updateState:l,pdfIndex:o.pdfIndex,uid:t}):null},$e=function(e){var t=e.thumbnail,r=e.drawState,a=e.teamStateMap,i=e.updateState,u=e.pdfIndex,c=e.preview,f=void 0!==c&&c,v=e.uid,p=(0,d.useContext)(Ge).setInviewPages,g=(0,d.useContext)(Ye),m=g.refRec,h=g.noteID,x=(0,d.useState)(),Z=(0,s.Z)(x,2),j=Z[0],S=Z[1],y=(0,k.YD)({delay:100}),w=(0,s.Z)(y,2),C=w[0],b=w[1],P=r.height/r.width,D=(0,d.useCallback)((function(e){e&&(C(e),!f&&m&&(m[v]=e))}),[m]),I=(0,d.useCallback)(function(){var e=!1;return(0,o.Z)(l().mark((function t(){var r,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f&&u&&!e){t.next=2;break}return t.abrupt("return");case 2:return e=!0,t.next=5,Promise.all([n.e(643),n.e(701)]).then(n.bind(n,21176));case 5:return r=t.sent,a=r.getOnePageImage,t.t0=S,t.next=10,a(h,u);case 10:t.t1=t.sent,(0,t.t0)(t.t1);case 12:case"end":return t.stop()}}),t)})))}(),[f,u]);(0,d.useEffect)((function(){f||(b?(I(),p((function(e){return e.add(v)}))):p((function(e){return e.delete(v)})))}),[b,I,f]);var O=(0,d.useContext)(Y.TeamCtx).ignores,N=(0,d.useMemo)((function(){return a&&Array.from(a.deleteAll(O).values())}),[a,O]),R=j||!u,E=b&&R,T=Boolean(f||!R);return(0,W.jsxs)("section",{ref:D,className:"note-page",style:{paddingTop:"".concat(100*P,"%")},children:[E&&(0,W.jsx)(et,{drawState:r,otherStates:N,updateState:i,imgSrc:j||t||void 0,preview:f}),T&&(0,W.jsx)("div",{className:"mask"})]})};$e.displayName="PageWrapper";var et=function(e){var t=e.drawState,n=e.updateState,r=e.otherStates,a=e.preview,i=void 0!==a&&a,u=e.imgSrc,o=(0,d.useContext)(Ye),s=o.mode,c=o.drawCtrl,l=(0,d.useContext)(Ge).setMode,f=(0,d.useCallback)((function(e){if(n){var r=e instanceof w.D?e:e(t);n(r)}}),[n,t]);return(0,W.jsx)("div",{className:"page-draw",children:i?(0,W.jsx)(Ke,{drawState:t,otherStates:r,imgSrc:u,readonly:!0,preview:!0}):(0,W.jsx)(Ke,{drawState:t,otherStates:r,onChange:f,imgSrc:u,drawCtrl:c,mode:s,setMode:l})})};et.displayName="DrawWrapper"},91511:function(e,t,n){"use strict";n.r(t),n.d(t,{TeamCtx:function(){return D},default:function(){return I}});var r=n(45987),a=n(15861),i=n(29439),u=n(87757),o=n.n(u),s=n(49496),c=n(72791),l=n(16871),d=n(51570),f=n(13623),v=n(69951),p=n(18406),g=n(56058),m=n(87962),h=n(92198),x=n(15671),Z=n(43144),j=n(24124),S=n(82670),k=["pageID"],y={pageStates:(0,j.D5)(),pageInfos:(0,j.D5)()},w=(0,j.WV)(y),C=function(){function e(t){(0,x.Z)(this,e),this.immutable=t}return(0,Z.Z)(e,[{key:"getImmutable",value:function(){return this.immutable}},{key:"getPageStates",value:function(){return this.getImmutable().get("pageStates")}},{key:"getPageInfos",value:function(){return this.getImmutable().get("pageInfos")}},{key:"getOneState",value:function(e,t){var n;return null===(n=this.getPageStates().get(e))||void 0===n?void 0:n.get(t)}},{key:"getOnePageState",value:function(e){return this.getPageStates().get(e)}},{key:"getPageRatio",value:function(e){var t;return null===(t=this.getPageInfos().get(e))||void 0===t?void 0:t.ratio}},{key:"includesPage",value:function(e){return this.getPageStates().has(e)}},{key:"setState",value:function(t,n,r){var a=this.getPageStates().get(t);return a?new e(this.getImmutable().update("pageStates",(function(e){return e.set(t,a.set(n,r))}))):this}},{key:"addPage",value:function(t,n){var r=n.ratio;return new e(this.getImmutable().update("pageStates",(function(e){return e.set(t,(0,j.D5)())})).update("pageInfos",(function(e){return e.set(t,{ratio:r})})))}},{key:"pushOperation",value:function(e,t,n){var a=e.pageID,i=(0,r.Z)(e,k),u=this.getPageRatio(a);if(!this.includesPage(a)||!u)return this;var o=this.getOneState(a,t)||S.D.createEmpty(n,n*u),s=S.D.pushOperation(o,i);return this.setState(a,t,s)}},{key:"resetUser",value:function(e,t){for(var n=this,r=0,a=Object.entries(t);r<a.length;r++){var u=(0,i.Z)(a[r],2),o=u[0],s=u[1],c=s.state,l=s.ratio,d=n.getOneState(o,e);if(d){var f=d.width;n=n.setState(o,e,S.D.loadFromFlat(c,f,f*l))}}return n}}],[{key:"createFromTeamPages",value:function(t,n){var r=t.pageRec,a=w();return Object.entries(r).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],u=t[1],o=u.states,s=u.ratio,c=(0,j.D5)(Object.entries(o).map((function(e){var t=(0,i.Z)(e,2),r=t[0],a=t[1];return[r,S.D.loadFromFlat(a,n,n*s)]})));a=a.update("pageStates",(function(e){return e.set(r,c)})).update("pageInfos",(function(e){return e.set(r,{ratio:s})}))})),new e(a)}}]),e}(),b=n(80184),P=["image","marked"],D=(0,c.createContext)({code:-2,userList:[],ignores:(0,j.l4)(),setIgnores:function(){},loadInfo:void 0,teamState:void 0,pushOperation:void 0,teamUpdate:void 0,updateReorder:function(){},updateNewPage:function(){},connected:!1});function I(){var e,t=null!==(e=(0,l.UO)().noteID)&&void 0!==e?e:"",n=(0,c.useState)(),u=(0,i.Z)(n,2),x=u[0],Z=u[1],S=(0,c.useState)(-2),k=(0,i.Z)(S,2),y=k[0],w=k[1],I=(0,c.useState)([]),O=(0,i.Z)(I,2),N=O[0],R=O[1],E=(0,c.useState)((0,j.l4)()),T=(0,i.Z)(E,2),M=T[0],A=T[1],W=(0,c.useState)(function(e){return function(){return(0,f.io)(d._n,{autoConnect:!1,query:{userID:(0,v.VN)(),userName:(0,v.vW)(),noteID:e}})}}(t)),L=(0,i.Z)(W,1)[0],F=(0,c.useState)(),U=(0,i.Z)(F,2),z=U[0],V=U[1],K=(0,c.useState)(!1),B=(0,i.Z)(K,2),H=B[0],J=B[1],_=(0,c.useState)(!0),q=(0,i.Z)(_,2),Y=q[0],G=q[1],Q=(0,l.s0)(),X=function(){var e=(0,a.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.CD)(t);case 2:if(n=e.sent){e.next=6;break}return s.ZP.error("Failed loading the team note state"),e.abrupt("return",!1);case 6:return Z(C.createFromTeamPages(n,p.WIDTH)),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,a.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.dn)(t);case 2:if(n=e.sent){e.next=6;break}return s.ZP.error("Failed loading the team note info"),e.abrupt("return",!1);case 6:return w(n.code),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.ZP.loading("Loading team note...",0),e.next=3,$();case 3:if(e.t0=e.sent,!e.t0){e.next=8;break}return e.next=7,X();case 7:e.t0=e.sent;case 8:if(e.t0){e.next=11;break}return t(),e.abrupt("return",Q("/"));case 11:t(),J(!0),L.on("push",(function(e){var t=e.operation,n=e.userID;Z((function(e){return null===e||void 0===e?void 0:e.pushOperation(t,n,p.WIDTH)}))})),L.on("joined",(function(e){var t=e.joined,n=e.members,r=t.userID,a=t.userName;R(n),r!==(0,v.VN)()&&(s.ZP.destroy(r),s.ZP.success({icon:(0,b.jsx)(g.Z,{}),content:"".concat(a," joined room"),key:r}))})),L.on("leaved",(function(e){var t=e.leaved,n=e.members,r=t.userID,a=t.userName;R(n),r!==(0,v.VN)()&&(s.ZP.destroy(r),s.ZP.warning({icon:(0,b.jsx)(m.Z,{}),content:"".concat(a," leaved room"),key:r}))})),L.on("reorder",(function(e){var t=e.pageOrder;V({type:"reorder",pageOrder:t})})),L.on("newPage",(function(e){var t=e.pageID,n=e.newPage,r=e.pageOrder;Z((function(e){return null===e||void 0===e?void 0:e.addPage(t,n)})),n=(0,h.qJ)(n),V({type:"newPage",pageOrder:r,pageID:t,newPage:n})})),L.on("reset",(function(e){var t=e.userID,n=e.pageRec;t!==(0,v.VN)()&&Z((function(e){return null===e||void 0===e?void 0:e.resetUser(t,n)}))})),L.on("connect",(function(){return G(!0)})),L.on("disconnect",(function(){return G(!1)})),L.connect();case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){L.removeAllListeners(),L.disconnect()};(0,c.useEffect)((function(){return ee(),te}),[t]);return H?(0,b.jsx)(D.Provider,{value:{code:y,ignores:M,userList:N,loadInfo:$,connected:Y,setIgnores:A,teamUpdate:z,teamState:x,pushOperation:function(e){L.emit("push",{operation:e})},updateReorder:function(e){L.emit("reorder",{pageOrder:e})},updateNewPage:function(e,t,n){Z((function(e){return null===e||void 0===e?void 0:e.addPage(t,n)}));n.image,n.marked;var a=(0,r.Z)(n,P);L.emit("newPage",{pageOrder:e,pageID:t,newPage:a})}},children:(0,b.jsx)(p.default,{teamOn:!0})}):null}},64309:function(e,t,n){"use strict";function r(e,t){var n=document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("can't get virtual canvas context");return n.width=e,n.height=t,{canvas:n,context:r}}function a(e){e.width=1,e.height=1;var t=e.getContext("2d");null===t||void 0===t||t.clearRect(0,0,1,1)}n.d(t,{j:function(){return a},v:function(){return r}})},90858:function(){},64158:function(){}}]);
//# sourceMappingURL=350.e2d7c708.chunk.js.map