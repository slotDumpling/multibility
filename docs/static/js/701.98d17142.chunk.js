(self.webpackChunkmultibility=self.webpackChunkmultibility||[]).push([[701],{1176:function(e,t,n){"use strict";n.r(t),n.d(t,{LoadPDF:function(){return M},getOneImage:function(){return I},getOnePageImage:function(){return A},getPDFImages:function(){return k}});var r=n(1413),a=n(9439),u=n(7762),c=n(3433),s=n(5861),i=n(7757),o=n.n(i),f=n(1842),p=n.n(f),x=n(2560),h=n(434),l=n.n(h),v=n(4610),m=n(4309),g=n(2198);x.GlobalWorkerOptions.workerSrc=l();var b=function(){var e=(0,s.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,t.arrayBuffer();case 3:return e.t1=e.sent,n=new e.t0(e.t1),e.abrupt("return",x.getDocument(n).promise);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)(o().mark((function e(t,n,r){var a,u,c,s,i,f,p,x,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPage(n);case 2:return a=e.sent,u=a.getViewport({scale:r}),console.log({viewport:u}),c=u.height,s=u.width,i=c/s,f=(0,m.v)(Math.floor(s*r),Math.floor(c*r)),p=f.canvas,x=f.context,e.next=10,a.render({canvasContext:x,viewport:u,transform:[r,0,0,r,0,0]}).promise;case 10:return h=p.toDataURL(),(0,m.j)(p),e.abrupt("return",[h,i]);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function k(e){return d.apply(this,arguments)}function d(){return d=(0,s.Z)(o().mark((function e(t){var n,r,u,c,s,i,f,p,x,h,l,v=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:2,r=v.length>2?v[2]:void 0,e.next=4,b(t);case 4:u=e.sent,c=u.numPages,s=[],i=[],f=1;case 9:if(!(f<=c)){e.next=22;break}return e.next=12,w(u,f,n);case 12:p=e.sent,x=(0,a.Z)(p,2),h=x[0],l=x[1],s.push(h),i.push(l),r&&r(Math.floor(f/c*100));case 19:f+=1,e.next=9;break;case 22:return e.abrupt("return",{images:s,ratios:i});case 23:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function I(e,t){return y.apply(this,arguments)}function y(){return y=(0,s.Z)(o().mark((function e(t,n){var r,u,c,s,i,f,p=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:2,e.next=3,b(t);case 3:if(u=e.sent,c=u.numPages,!(n>c)){e.next=7;break}throw new Error("index out of range");case 7:return e.next=9,w(u,n,r);case 9:return s=e.sent,i=(0,a.Z)(s,1),f=i[0],e.abrupt("return",f);case 13:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}var Z=function(){var e=(0,s.Z)(o().mark((function e(t,n){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().getItem("IMAGE_CACHE");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:if(r=e.t0,a="IMAGE_".concat(t,"_").concat(n),r.includes(a)){e.next=9;break}return e.abrupt("return");case 9:return r=[a].concat((0,c.Z)(r.filter((function(e){return e!==a})))),e.next=12,p().setItem("IMAGE_CACHE",r);case 12:return e.next=14,p().getItem(a);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,s.Z)(o().mark((function e(t,n,r){var a,s,i,f,x,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().getItem("IMAGE_CACHE");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:if(a=e.t0,s="IMAGE_".concat(t,"_").concat(n),a=[s].concat((0,c.Z)(a.filter((function(e){return e!==s})))),!(a.length>10)){e.next=28;break}i=a.slice(10),a=a.slice(0,10),f=(0,u.Z)(i),e.prev=12,f.s();case 14:if((x=f.n()).done){e.next=20;break}return h=x.value,e.next=18,p().removeItem(h);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(12),f.e(e.t1);case 25:return e.prev=25,f.f(),e.finish(25);case 28:return e.next=30,p().setItem("IMAGE_CACHE",a);case 30:return e.next=32,p().setItem(s,r);case 32:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})));return function(t,n,r){return e.apply(this,arguments)}}();function A(e,t){return C.apply(this,arguments)}function C(){return(C=(0,s.Z)(o().mark((function e(t,n){var r,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t,n);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,p().getItem("PDF_".concat(t));case 7:if(a=e.sent,e.t0=a,!e.t0){e.next=13;break}return e.next=12,I(a,n,2);case 12:e.t0=e.sent;case 13:return(u=e.t0)&&E(t,n,u),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return _.apply(this,arguments)}function _(){return(_=(0,s.Z)(o().mark((function e(t,n){var a,u,c,s,i,f,p,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,.5,n);case 2:return a=e.sent,u=a.images,c=a.ratios,s={},i=[],u.forEach((function(e,t){var n=(0,v.v4)();s[n]={image:e,ratio:c[t],state:{strokes:{}},pdfIndex:t+1},i.push(n)})),f=t.name.replace(".pdf",""),e.next=11,t.arrayBuffer();case 11:return p=e.sent,x=new Blob([p],{type:"application/pdf"}),e.abrupt("return",(0,r.Z)((0,r.Z)({},(0,g.X)()),{},{name:f,withImg:!0,pdf:x,thumbnail:u[0],pageRec:s,pageOrder:i}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},4601:function(){},2767:function(){},8251:function(){},7677:function(){},1543:function(){},7324:function(){}}]);
//# sourceMappingURL=701.98d17142.chunk.js.map