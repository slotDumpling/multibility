(self.webpackChunkmultibility=self.webpackChunkmultibility||[]).push([[138],{72058:function(e,t,n){"use strict";n.d(t,{eG:function(){return x},mp:function(){return o},pW:function(){return f}});var r=n(37762),a=n(74165),u=n(93433),c=n(15861),s=n(61842),i=n.n(s)().createInstance({name:"imageForage"}),o=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,n){var r,c,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getItem("LIST");case 2:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==r;case 6:if(!e.t0){e.next=10;break}e.t2=r,e.next=11;break;case 10:e.t2=[];case 11:if(c=e.t2,s="".concat(t,"_").concat(n),c.includes(s)){e.next=15;break}return e.abrupt("return");case 15:return c=[s].concat((0,u.Z)(c.filter((function(e){return e!==s})))),e.next=18,i.setItem("LIST",c);case 18:return e.next=20,i.getItem(s);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,n,r){var c,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getItem("LIST");case 2:if(e.t1=c=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==c;case 6:if(!e.t0){e.next=10;break}e.t2=c,e.next=11;break;case 10:e.t2=[];case 11:return s=e.t2,o="".concat(t,"_").concat(n),(s=[o].concat((0,u.Z)(s.filter((function(e){return e!==o}))))).length>10&&(s=s.slice(0,10)),e.next=17,i.setItem("LIST",s);case 17:return e.next=19,i.setItem(o,r);case 19:p();case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n,u,c,s,o,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getItem("LIST");case 2:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==t;case 6:if(!e.t0){e.next=10;break}e.t2=t,e.next=11;break;case 10:e.t2=[];case 11:return n=e.t2,u=new Set(n),e.next=15,i.keys();case 15:c=e.sent,s=(0,r.Z)(c),e.prev=17,s.s();case 19:if((o=s.n()).done){e.next=28;break}if("LIST"!==(f=o.value)){e.next=23;break}return e.abrupt("continue",26);case 23:if(u.has(f)){e.next=26;break}return e.next=26,i.removeItem(f);case 26:e.next=19;break;case 28:e.next=33;break;case 30:e.prev=30,e.t3=e.catch(17),s.e(e.t3);case 33:return e.prev=33,s.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[17,30,33,36]])})));return function(){return e.apply(this,arguments)}}(),x=function(){return i.clear()}},21176:function(e,t,n){"use strict";n.r(t),n.d(t,{LoadPDF:function(){return y},getNotePageImage:function(){return d},getOneImage:function(){return g},getPDFImages:function(){return k}});var r=n(1413),a=n(29439),u=n(74165),c=n(15861),s=n(96153),i=n(35888),o=n(61842),f=n.n(o),p=n(49030),x=n(62560),l=n(20434),h=n.n(l),v=n(72058);x.GlobalWorkerOptions.workerSrc=h();var m=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,t.arrayBuffer();case 3:return e.t1=e.sent,n=new e.t0(e.t1),e.abrupt("return",x.getDocument(n).promise);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t,n,r){var a,c,i,o,f,p,x,l,h;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPage(n);case 2:return a=e.sent,c=a.getViewport({scale:r}),i=c.height,o=c.width,f=i/o,p=(0,s.v)(Math.floor(o*r),Math.floor(i*r)),x=p.canvas,l=p.context,e.next=9,a.render({canvasContext:l,viewport:c,transform:[r,0,0,r,0,0]}).promise;case 9:return h=x.toDataURL(),(0,s.j)(x),e.abrupt("return",[h,f]);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function k(e){return Z.apply(this,arguments)}function Z(){return Z=(0,c.Z)((0,u.Z)().mark((function e(t){var n,r,c,s,i,o,f,p,x,l,h,v=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:2,r=v.length>2?v[2]:void 0,e.next=4,m(t);case 4:c=e.sent,s=c.numPages,i=[],o=[],f=1;case 9:if(!(f<=s)){e.next=22;break}return e.next=12,b(c,f,n);case 12:p=e.sent,x=(0,a.Z)(p,2),l=x[0],h=x[1],i.push(l),o.push(h),r&&r(Math.floor(f/s*100));case 19:f+=1,e.next=9;break;case 22:return e.abrupt("return",{images:i,ratios:o});case 23:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function g(e,t){return w.apply(this,arguments)}function w(){return w=(0,c.Z)((0,u.Z)().mark((function e(t,n){var r,c,s,i,o,f,p=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:2,e.next=3,m(t);case 3:if(c=e.sent,s=c.numPages,!(n>s)){e.next=7;break}throw new Error("index out of range");case 7:return e.next=9,b(c,n,r);case 9:return i=e.sent,o=(0,a.Z)(i,1),f=o[0],e.abrupt("return",f);case 13:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function d(e,t){return I.apply(this,arguments)}function I(){return(I=(0,c.Z)((0,u.Z)().mark((function e(t,n){var r,a,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.mp)(t,n);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,f().getItem("PDF_".concat(t));case 7:if(a=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,g(a,n,2);case 12:return c=e.sent,(0,v.pW)(t,n,c),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return L.apply(this,arguments)}function L(){return(L=(0,c.Z)((0,u.Z)().mark((function e(t,n){var a,c,s,o,f,x,l,h;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,.5,n);case 2:return a=e.sent,c=a.images,s=a.ratios,o={},f=[],c.forEach((function(e,t){var n=(0,p.Z)(),r=s[t];r&&(o[n]={image:e,ratio:r,state:{strokes:{}},pdfIndex:t+1},f.push(n))})),x=t.name.replace(".pdf",""),e.next=11,t.arrayBuffer();case 11:return l=e.sent,h=new Blob([l],{type:"application/pdf"}),e.abrupt("return",(0,r.Z)((0,r.Z)({},(0,i.Xn)()),{},{name:x,withImg:!0,pdf:h,pageRec:o,pageOrder:f}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},14601:function(){},32767:function(){},28251:function(){},57677:function(){},1543:function(){},87324:function(){}}]);
//# sourceMappingURL=138.a687bbe2.chunk.js.map